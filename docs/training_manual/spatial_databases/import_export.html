<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>16.3. Lesson: Import and Export &mdash; QGIS Documentation  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/qgis_docs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/qgis_topbar.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/training_manual/spatial_databases/import_export.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="16.4. Lesson: Spatial Queries" href="spatial_queries.html" />
    <link rel="prev" title="16.2. Lesson: Simple Feature Model" href="simple_feature_model.html" /> 
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
    <div class="row isTesting">
     This documentation is a work in progress. For the Long Term Release and translations, please visit the <a href="https://docs.qgis.org/latest/en/docs/training_manual/spatial_databases/import_export.html">latest version</a>.
    </div>
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   
            <a href="../../index.html" class="icon icon-home"> QGIS Documentation
            <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                testing
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">For Users</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user_manual/index.html">QGIS Desktop User Guide/Manual (QGIS Testing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Server Guide/Manual (QGIS Testing)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Training Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../foreword/index.html">1. Course Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic_map/index.html">2. Module: Creating and Exploring a Basic Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector_classification/index.html">3. Module: Classifying Vector Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../map_composer/index.html">4. Module: Laying out the Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../create_vector_data/index.html">5. Module: Creating Vector Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector_analysis/index.html">6. Module: Vector Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rasters/index.html">7. Module: Rasters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../complete_analysis/index.html">8. Module: Completing the Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qgis_plugins/index.html">9. Module: Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../online_resources/index.html">10. Module: Online Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qgis_server/index.html">11. Module: QGIS Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grass/index.html">12. Module: GRASS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assessment/index.html">13. Module: Assessment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../forestry/index.html">14. Module: Forestry Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database_concepts/index.html">15. Module: Database Concepts with PostgreSQL</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">16. Module: Spatial Database Concepts with PostGIS</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="spatial_functions.html">16.1. Lesson: PostGIS Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="simple_feature_model.html">16.2. Lesson: Simple Feature Model</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">16.3. Lesson: Import and Export</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#shp2pgsql">16.3.1. shp2pgsql</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pgsql2shp">16.3.2. pgsql2shp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ogr2ogr">16.3.3. ogr2ogr</a></li>
<li class="toctree-l4"><a class="reference internal" href="#db-manager">16.3.4. DB Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ic">16.3.5. In Conclusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wn">16.3.6. What’s Next?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="spatial_queries.html">16.4. Lesson: Spatial Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="geometry.html">16.5. Lesson: Geometry Construction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../processing/index.html">17. The QGIS processing guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../databases/index.html">18. Module: Using Spatial Databases in QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/contribute.html">19. Appendix: Contributing To This Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/preparing_data.html">20. Preparing Exercise Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">A Gentle Introduction to GIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Writers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">Documentation Guidelines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyqgis_developer_cookbook/index.html">PyQGIS Cookbook (QGIS Testing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">Developers Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">QGIS Training Manual</a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">16. </span>Module: Spatial Database Concepts with PostGIS</a> &raquo;</li>
      <li><span class="section-number">16.3. </span>Lesson: Import and Export</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/training_manual/spatial_databases/import_export.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="simple_feature_model.html" class="btn btn-neutral float-left" title="16.2. Lesson: Simple Feature Model" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="spatial_queries.html" class="btn btn-neutral float-right" title="16.4. Lesson: Spatial Queries" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ls-import-and-export">
<h1><span class="section-number">16.3. </span>Lesson: Import and Export<a class="headerlink" href="#ls-import-and-export" title="Permalink to this headline"></a></h1>
<p>Of course, a database with no easy way to migrate data into it and out of it
would not be of much use. Fortunately, there are a number
of tools that will let you easily move data into and out of PostGIS.</p>
<section id="shp2pgsql">
<h2><span class="section-number">16.3.1. </span>shp2pgsql<a class="headerlink" href="#shp2pgsql" title="Permalink to this headline"></a></h2>
<p>shp2pgsql is a commandline tool to import ESRI Shapefile to the database.
Under Unix, you can use the following command for importing a new PostGIS
table:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>shp2pgsql -s &lt;SRID&gt; -c -D -I &lt;path to shapefile&gt; &lt;schema&gt;.&lt;table&gt; <span class="p">|</span> <span class="se">\</span>
  psql -d &lt;databasename&gt; -h &lt;hostname&gt; -U &lt;username&gt;
</pre></div>
</div>
<p>Under Windows, you have to perform the import process in two steps:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>shp2pgsql -s &lt;SRID&gt; -c -D -I &lt;path to shapefile&gt; &lt;schema&gt;.&lt;table&gt; &gt; import.sql
psql psql -d &lt;databasename&gt; -h &lt;hostname&gt; -U &lt;username&gt; -f import.sql
</pre></div>
</div>
<p>You may encounter this error:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR:  operator class <span class="s2">&quot;gist_geometry_ops&quot;</span> does not exist <span class="k">for</span> access method
<span class="s2">&quot;gist&quot;</span>
</pre></div>
</div>
<p>This is a known issue regarding the creation <em>in situ</em> of a spatial index for
the data you’re importing. To avoid the error, exclude the <kbd class="kbd docutils literal notranslate">-I</kbd> parameter.
This will mean that no spatial index is being created directly, and you’ll need
to create it in the database after the data have been imported. (The creation
of a spatial index will be covered in the next lesson.)</p>
</section>
<section id="pgsql2shp">
<h2><span class="section-number">16.3.2. </span>pgsql2shp<a class="headerlink" href="#pgsql2shp" title="Permalink to this headline"></a></h2>
<p>pgsql2shp is a commandline tool to export PostGIS Tables, Views or SQL select
queries. To do this under Unix:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pgsql2shp -f &lt;path to new shapefile&gt; -g &lt;geometry column name&gt; <span class="se">\</span>
  -h &lt;hostname&gt; -U &lt;username&gt; &lt;databasename&gt; &lt;table <span class="p">|</span> view&gt;
</pre></div>
</div>
<p>To export the data using a query:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pgsql2shp -f &lt;path to new shapefile&gt; -g &lt;geometry column name&gt; <span class="se">\</span>
  -h &lt;hostname&gt; -U &lt;username&gt; <span class="s2">&quot;&lt;query&gt;&quot;</span>
</pre></div>
</div>
</section>
<section id="ogr2ogr">
<h2><span class="section-number">16.3.3. </span>ogr2ogr<a class="headerlink" href="#ogr2ogr" title="Permalink to this headline"></a></h2>
<p>ogr2ogr is a very powerful tool to convert data into and from postgis to many
data formats. ogr2ogr is part of the GDAL/OGR Software and has to be installed
separately. To export a table from PostGIS to GML, you can use this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ogr2ogr -f GML export.gml PG:<span class="s1">&#39;dbname=&lt;databasename&gt; user=&lt;username&gt;</span>
<span class="s1">        host=&lt;hostname&gt;&#39;</span> &lt;Name of PostGIS-Table&gt;
</pre></div>
</div>
</section>
<section id="db-manager">
<h2><span class="section-number">16.3.4. </span>DB Manager<a class="headerlink" href="#db-manager" title="Permalink to this headline"></a></h2>
<p>You may have noticed another option in the <span class="guilabel">Database</span> menu labeled
<span class="guilabel">DB Manager</span>. This is a tool that provides a
unified interface for interacting with spatial databases including PostGIS. It
also allows you to import and export from databases to other formats. Since the
next module is largely devoted to using this tool, we will only briefly mention
it here.</p>
</section>
<section id="ic">
<h2><span class="section-number">16.3.5. </span>In Conclusion<a class="headerlink" href="#ic" title="Permalink to this headline"></a></h2>
<p>Importing and exporting data to and from the database can be done in many
various ways. Especially when using disparate data sources, you will probably
use these functions (or others like them) on a regular basis.</p>
</section>
<section id="wn">
<h2><span class="section-number">16.3.6. </span>What’s Next?<a class="headerlink" href="#wn" title="Permalink to this headline"></a></h2>
<p>Next we’ll look at how to query the data we’ve created before.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="simple_feature_model.html" class="btn btn-neutral float-left" title="16.2. Lesson: Simple Feature Model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="spatial_queries.html" class="btn btn-neutral float-right" title="16.4. Lesson: Spatial Queries" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">Last updated on Oct 19, 2021 22:25.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages
example of expected format: .../locale-en-lc-messages-docs-gentle-gis-introduction-data-capture-po--release-3-16 
for the page ...3.16/docs/gentle_gis_introduction/data_capture.html in release_3.16 branch-->
<!--Make sure that mismatching languages codes are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: testing
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/testing/en/docs/training_manual/spatial_databases/import_export.html">en</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/en/docs/training_manual/spatial_databases/import_export.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/en/docs/training_manual/spatial_databases/import_export.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/en/docs/training_manual/spatial_databases/import_export.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/en/docs/training_manual/spatial_databases/import_export.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/en/docs/training_manual/spatial_databases/import_export.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/en/docs/training_manual/spatial_databases/import_export.html">2.18</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.14/en/docs/training_manual/spatial_databases/import_export.html">2.14</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.8/en/docs/training_manual/spatial_databases/import_export.html">2.8</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.6/en/docs/training_manual/spatial_databases/import_export.html">2.6</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.2/en/docs/training_manual/spatial_databases/import_export.html">2.2</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.0/en/docs/training_manual/spatial_databases/import_export.html">2.0</a></dd>
        
          <dd><a href="https://docs.qgis.org/1.8/en/docs/training_manual/spatial_databases/import_export.html">1.8</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/testing/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/testing/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/training_manual/spatial_databases/import_export.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/en" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/master" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/master" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>