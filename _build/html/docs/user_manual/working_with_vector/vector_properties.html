<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>15.1. The Vector Properties Dialog &mdash; QGIS Documentation  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/qgis_docs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/qgis_topbar.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/qgis_logo.ico"/>
    <link rel="canonical" href="https://docs.qgis.org/latest/en/docs/user_manual/working_with_vector/vector_properties.html"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="15.2. Working with the Attribute Table" href="attribute_table.html" />
    <link rel="prev" title="15. Working with Vector Data" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

  <nav class="release_status_topbar">
    <div class="row isTesting">
     This documentation is a work in progress. For the Long Term Release and translations, please visit the <a href="https://docs.qgis.org/latest/en/docs/user_manual/working_with_vector/vector_properties.html">latest version</a>.
    </div>
  </nav>

   

 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
   
            <a href="../../index.html" class="icon icon-home"> QGIS Documentation
            <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                testing
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
   <a href= "../../../genindex.html">Index</a>
 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">For Wageningen Students</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../land_degradation_development/index.html">Land Degradation and Development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Users</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">QGIS Desktop User Guide/Manual (QGIS Testing)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../preamble/preamble.html">1. Preamble</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/foreword.html">2. Foreword</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/conventions.html">3. Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/features.html">4. Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/getting_started.html">5. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/project_files.html">6. Working with Project Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_gui.html">7. QGIS GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/browser.html">8. The Browser panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/qgis_configuration.html">9. QGIS Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_projections/working_with_projections.html">10. Working with Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/general_tools.html">11. General Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../expressions/index.html">12. Level up with Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style_library/index.html">13. The Style Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../managing_data_source/index.html">14. Managing Data Source</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">15. Working with Vector Data</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">15.1. The Vector Properties Dialog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#information-properties">15.1.1. Information Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source-properties">15.1.2. Source Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#symbology-properties">15.1.3. Symbology Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#labels-properties">15.1.4. Labels Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#diagrams-properties">15.1.5. Diagrams Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#masks-properties">15.1.6. Masks Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#d-view-properties">15.1.7. 3D View Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fields-properties">15.1.8. Fields Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#attributes-form-properties">15.1.9. Attributes Form Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#joins-properties">15.1.10. Joins Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#auxiliary-storage-properties">15.1.11. Auxiliary Storage Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#actions-properties">15.1.12. Actions Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#display-properties">15.1.13. Display Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rendering-properties">15.1.14. Rendering Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variables-properties">15.1.15. Variables Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metadata-properties">15.1.16. Metadata Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies-properties">15.1.17. Dependencies Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#legend-properties">15.1.18. Legend Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qgis-server-properties">15.1.19. QGIS Server Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#digitizing-properties">15.1.20. Digitizing Properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="attribute_table.html">15.2. Working with the Attribute Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="editing_geometry_attributes.html">15.3. Editing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_raster/index.html">16. Working with Raster Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_mesh/mesh_properties.html">17. Working with Mesh Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_vector_tiles/vector_tiles_properties.html">18. Working with Vector Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../print_composer/index.html">19. Laying out the maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_ogc/ogc_client_support.html">20. Working with OGC / ISO protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../working_with_gps/index.html">21. Working with GPS Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auth_system/index.html">22. Authentication System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grass_integration/grass_integration.html">23. GRASS GIS Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing/index.html">24. QGIS processing framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../processing_algs/index.html">25. Processing providers and algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">26. Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/help_and_support.html">27. Help and Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/contributors.html">28. Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendices/index.html">29. Appendices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../literature_web/literature_and_web_references.html">30. Literature and Web References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../server_manual/index.html">QGIS Server Guide/Manual (QGIS Testing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training_manual/index.html">Training Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gentle_gis_introduction/index.html">A Gentle Introduction to GIS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Writers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_guidelines/index.html">Documentation Guidelines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyqgis_developer_cookbook/index.html">PyQGIS Cookbook (QGIS Testing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers_guide/index.html">Developers Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGIS Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">QGIS User Guide</a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">15. </span>Working with Vector Data</a> &raquo;</li>
      <li><span class="section-number">15.1. </span>The Vector Properties Dialog</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/qgis/QGIS-Documentation/blob/master/docs/user_manual/working_with_vector/vector_properties.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="index.html" class="btn btn-neutral float-left" title="15. Working with Vector Data" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="attribute_table.html" class="btn btn-neutral float-right" title="15.2. Working with the Attribute Table" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-vector-properties-dialog">
<span id="vector-properties-dialog"></span><h1><span class="section-number">15.1. </span>The Vector Properties Dialog<a class="headerlink" href="#the-vector-properties-dialog" title="Permalink to this headline"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#information-properties" id="id78">Information Properties</a></p></li>
<li><p><a class="reference internal" href="#source-properties" id="id79">Source Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#settings" id="id80">Settings</a></p></li>
<li><p><a class="reference internal" href="#coordinate-reference-system-and-geometry" id="id81">Coordinate Reference System and Geometry</a></p></li>
<li><p><a class="reference internal" href="#query-builder" id="id82">Query Builder</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#symbology-properties" id="id83">Symbology Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#features-rendering" id="id84">Features rendering</a></p>
<ul>
<li><p><a class="reference internal" href="#single-symbol-renderer" id="id85">Single Symbol Renderer</a></p></li>
<li><p><a class="reference internal" href="#no-symbols-renderer" id="id86">No Symbols Renderer</a></p></li>
<li><p><a class="reference internal" href="#categorized-renderer" id="id87">Categorized Renderer</a></p></li>
<li><p><a class="reference internal" href="#graduated-renderer" id="id88">Graduated Renderer</a></p></li>
<li><p><a class="reference internal" href="#proportional-symbol-and-multivariate-analysis" id="id89">Proportional Symbol and Multivariate Analysis</a></p></li>
<li><p><a class="reference internal" href="#rule-based-renderer" id="id90">Rule-based Renderer</a></p></li>
<li><p><a class="reference internal" href="#point-displacement-renderer" id="id91">Point displacement Renderer</a></p></li>
<li><p><a class="reference internal" href="#point-cluster-renderer" id="id92">Point Cluster Renderer</a></p></li>
<li><p><a class="reference internal" href="#inverted-polygon-renderer" id="id93">Inverted Polygon Renderer</a></p></li>
<li><p><a class="reference internal" href="#heatmap-renderer" id="id94">Heatmap Renderer</a></p></li>
<li><p><a class="reference internal" href="#d-renderer" id="id95">2.5D Renderer</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#layer-rendering" id="id96">Layer rendering</a></p></li>
<li><p><a class="reference internal" href="#other-settings" id="id97">Other Settings</a></p>
<ul>
<li><p><a class="reference internal" href="#symbol-levels" id="id98">Symbol levels</a></p></li>
<li><p><a class="reference internal" href="#data-defined-size-legend" id="id99">Data-defined size legend</a></p></li>
<li><p><a class="reference internal" href="#draw-effects" id="id100">Draw effects</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#labels-properties" id="id101">Labels Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#setting-the-automated-placement-engine" id="id102">Setting the automated placement engine</a></p></li>
<li><p><a class="reference internal" href="#rule-based-labeling" id="id103">Rule-based labeling</a></p></li>
<li><p><a class="reference internal" href="#define-labels-based-on-expressions" id="id104">Define labels based on expressions</a></p></li>
<li><p><a class="reference internal" href="#using-data-defined-override-for-labeling" id="id105">Using data-defined override for labeling</a></p>
<ul>
<li><p><a class="reference internal" href="#the-label-toolbar" id="id106">The Label Toolbar</a></p></li>
<li><p><a class="reference internal" href="#customize-the-labels-from-the-map-canvas" id="id107">Customize the labels from the map canvas</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#diagrams-properties" id="id108">Diagrams Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#attributes" id="id109">Attributes</a></p></li>
<li><p><a class="reference internal" href="#rendering" id="id110">Rendering</a></p></li>
<li><p><a class="reference internal" href="#size" id="id111">Size</a></p></li>
<li><p><a class="reference internal" href="#placement" id="id112">Placement</a></p></li>
<li><p><a class="reference internal" href="#options" id="id113">Options</a></p></li>
<li><p><a class="reference internal" href="#legend" id="id114">Legend</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#masks-properties" id="id115">Masks Properties</a></p></li>
<li><p><a class="reference internal" href="#d-view-properties" id="id116">3D View Properties</a></p></li>
<li><p><a class="reference internal" href="#fields-properties" id="id117">Fields Properties</a></p></li>
<li><p><a class="reference internal" href="#attributes-form-properties" id="id118">Attributes Form Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#customizing-a-form-for-your-data" id="id119">Customizing a form for your data</a></p>
<ul>
<li><p><a class="reference internal" href="#the-autogenerated-form" id="id120">The autogenerated form</a></p></li>
<li><p><a class="reference internal" href="#the-drag-and-drop-designer" id="id121">The drag and drop designer</a></p></li>
<li><p><a class="reference internal" href="#using-custom-ui-file" id="id122">Using custom ui-file</a></p></li>
<li><p><a class="reference internal" href="#enhance-your-form-with-custom-functions" id="id123">Enhance your form with custom functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#configure-the-field-behavior" id="id124">Configure the field behavior</a></p>
<ul>
<li><p><a class="reference internal" href="#common-settings" id="id125">Common settings</a></p>
<ul>
<li><p><a class="reference internal" href="#widget-display" id="id126">Widget display</a></p></li>
<li><p><a class="reference internal" href="#general-options" id="id127">General options</a></p></li>
<li><p><a class="reference internal" href="#default-values" id="id128">Default values</a></p></li>
<li><p><a class="reference internal" href="#constraints" id="id129">Constraints</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#edit-widgets" id="id130">Edit widgets</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#joins-properties" id="id131">Joins Properties</a></p></li>
<li><p><a class="reference internal" href="#auxiliary-storage-properties" id="id132">Auxiliary Storage Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#labeling" id="id133">Labeling</a></p></li>
<li><p><a class="reference internal" href="#symbology" id="id134">Symbology</a></p></li>
<li><p><a class="reference internal" href="#attribute-table-and-widgets" id="id135">Attribute table and widgets</a></p></li>
<li><p><a class="reference internal" href="#management" id="id136">Management</a></p></li>
<li><p><a class="reference internal" href="#auxiliary-storage-database" id="id137">Auxiliary storage database</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#actions-properties" id="id138">Actions Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#defining-actions" id="id139">Defining Actions</a></p></li>
<li><p><a class="reference internal" href="#using-actions" id="id140">Using Actions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#display-properties" id="id141">Display Properties</a></p></li>
<li><p><a class="reference internal" href="#rendering-properties" id="id142">Rendering Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#scale-dependent-visibility" id="id143">Scale dependent visibility</a></p></li>
<li><p><a class="reference internal" href="#simplify-geometry" id="id144">Simplify geometry</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#variables-properties" id="id145">Variables Properties</a></p></li>
<li><p><a class="reference internal" href="#metadata-properties" id="id146">Metadata Properties</a></p></li>
<li><p><a class="reference internal" href="#dependencies-properties" id="id147">Dependencies Properties</a></p></li>
<li><p><a class="reference internal" href="#legend-properties" id="id148">Legend Properties</a></p></li>
<li><p><a class="reference internal" href="#qgis-server-properties" id="id149">QGIS Server Properties</a></p></li>
<li><p><a class="reference internal" href="#digitizing-properties" id="id150">Digitizing Properties</a></p>
<ul>
<li><p><a class="reference internal" href="#automatic-fixes" id="id151">Automatic Fixes</a></p></li>
<li><p><a class="reference internal" href="#geometry-checks" id="id152">Geometry Checks</a></p></li>
<li><p><a class="reference internal" href="#topology-checks" id="id153">Topology Checks</a></p>
<ul>
<li><p><a class="reference internal" href="#gap-check-exceptions" id="id154">Gap check exceptions</a></p></li>
<li><p><a class="reference internal" href="#geometry-validation-panel" id="id155">Geometry validation panel</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>The <span class="guilabel">Layer Properties</span> dialog for a vector layer provides general
settings to manage appearance of layer features in the map (symbology,
labeling, diagrams), interaction with the mouse (actions, map tips, form
design). It also provides information about the layer.</p>
<p>To access the <span class="guilabel">Layer Properties</span> dialog:</p>
<ul class="simple">
<li><p>In the <span class="guilabel">Layers</span> panel, double-click the layer or right-click
and select <span class="guilabel">Properties…</span> from the pop-up menu;</p></li>
<li><p>Go to <span class="menuselection">Layer ► Layer Properties…</span> menu when the layer
is selected.</p></li>
</ul>
<p>The vector <span class="guilabel">Layer Properties</span> dialog provides the following sections:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/metadata.png"><img alt="metadata" src="../../../_images/metadata.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorinformationmenu"><span class="std std-ref">Information</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/system.png"><img alt="system" src="../../../_images/system.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorsourcemenu"><span class="std std-ref">Source</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/symbology.png"><img alt="symbology" src="../../../_images/symbology.png" style="width: 2em;" /></a> <a class="reference internal" href="#vector-style-menu"><span class="std std-ref">Symbology</span></a><sup>[1]</sup></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labeling" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vector-labels-tab"><span class="std std-ref">Labels</span></a><sup>[1]</sup></p></td>
<td><p><a class="reference internal" href="../../../_images/labelmask.png"><img alt="labelmask" src="../../../_images/labelmask.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vector-mask-menu"><span class="std std-ref">Mask</span></a><sup>[1]</sup></p></td>
<td><p><a class="reference internal" href="../../../_images/3d.png"><img alt="3d" src="../../../_images/3d.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#sec-3-d-view"><span class="std std-ref">3D View</span></a><sup>[1]</sup></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/diagram.png"><img alt="diagram" src="../../../_images/diagram.png" style="width: 2em;" /></a> <a class="reference internal" href="#sec-diagram"><span class="std std-ref">Diagrams</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/mSourceFields.png"><img alt="sourceFields" src="../../../_images/mSourceFields.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vector-fields-menu"><span class="std std-ref">Fields</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/mActionFormView.png"><img alt="formView" src="../../../_images/mActionFormView.png" style="width: 1.2em;" /></a> <a class="reference internal" href="#vector-attributes-menu"><span class="std std-ref">Attributes Form</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/join.png"><img alt="join" src="../../../_images/join.png" style="width: 2em;" /></a> <a class="reference internal" href="#sec-joins"><span class="std std-ref">Joins</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/mIconAuxiliaryStorage.png"><img alt="auxiliaryStorage" src="../../../_images/mIconAuxiliaryStorage.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">Auxiliary Storage</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/action.png"><img alt="action" src="../../../_images/action.png" style="width: 2em;" /></a> <a class="reference internal" href="#actions-menu"><span class="std std-ref">Actions</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/display.png"><img alt="display" src="../../../_images/display.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#maptips"><span class="std std-ref">Display</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/rendering.png"><img alt="rendering" src="../../../_images/rendering.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorrenderingmenu"><span class="std std-ref">Rendering</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/temporal.png"><img alt="temporal" src="../../../_images/temporal.png" style="width: 1.5em;" /></a> <span class="guilabel">Temporal</span></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorvariablesmenu"><span class="std std-ref">Variables</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/editmetadata.png"><img alt="editMetadata" src="../../../_images/editmetadata.png" style="width: 1.2em;" /></a> <a class="reference internal" href="#vectormetadatamenu"><span class="std std-ref">Metadata</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/dependencies.png"><img alt="dependencies" src="../../../_images/dependencies.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectordependenciesmenu"><span class="std std-ref">Dependencies</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../../../_images/legend.png"><img alt="legend" src="../../../_images/legend.png" style="width: 1.2em;" /></a> <a class="reference internal" href="#vectorlegendmenu"><span class="std std-ref">Legend</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/overlay.png"><img alt="overlay" src="../../../_images/overlay.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#vectorservermenu"><span class="std std-ref">QGIS Server</span></a></p></td>
<td><p><a class="reference internal" href="../../../_images/digitizing.png"><img alt="digitizing" src="../../../_images/digitizing.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#digitizingmenu"><span class="std std-ref">Digitizing</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../plugins/plugins.html#plugins"><span class="std std-ref">External plugins</span></a><sup>[2]</sup> tabs</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><sup>[1]</sup> Also available in the <a class="reference internal" href="../introduction/general_tools.html#layer-styling-panel"><span class="std std-ref">Layer styling panel</span></a></p>
<p><sup>[2]</sup> <a class="reference internal" href="../plugins/plugins.html#plugins"><span class="std std-ref">External plugins</span></a> you install can optionally add tabs to this
dialog. Those are not presented in this document. Refer to their documentation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Share full or partial properties of the layer styles</strong></p>
<p>The <span class="menuselection">Style</span> menu at the bottom of the dialog allows you to import or export
these or part of these properties from/to several destination (file, clipboard, database).
See <a class="reference internal" href="../introduction/general_tools.html#manage-custom-style"><span class="std std-ref">Managing Custom Styles</span></a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because properties (symbology, label, actions, default values, forms…) of
embedded layers (see <a class="reference internal" href="../introduction/general_tools.html#nesting-projects"><span class="std std-ref">Nesting Projects</span></a>) are pulled from the original
project file and to avoid changes that may break this behavior, the layer
properties dialog is made unavailable for these layers.</p>
</div>
<section id="information-properties">
<span id="vectorinformationmenu"></span><h2><a class="toc-backref" href="#id78"><span class="section-number">15.1.1. </span>Information Properties</a><a class="headerlink" href="#information-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/metadata.png"><img alt="metadata" src="../../../_images/metadata.png" style="width: 1.5em;" /></a> The <span class="guilabel">Information</span> tab is read-only and represents an interesting
place to quickly grab summarized information and metadata on the current layer.
Provided information are:</p>
<ul class="simple">
<li><p>based on the provider of the layer: format of storage, path, geometry type,
data source encoding, extent…</p></li>
<li><p>the Coordinate Reference System: name, units, method, accuracy, reference
(i.e. whether it’s static or dynamic)</p></li>
<li><p>picked from the <a class="reference internal" href="#vectormetadatamenu"><span class="std std-ref">filled metadata</span></a>: access, extents,
links, contacts, history…</p></li>
<li><p>and related to its geometry (spatial extent, CRS…) or its attributes (number
of fields, characteristics of each…).</p></li>
</ul>
</section>
<section id="source-properties">
<span id="vectorsourcemenu"></span><h2><a class="toc-backref" href="#id79"><span class="section-number">15.1.2. </span>Source Properties</a><a class="headerlink" href="#source-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/system.png"><img alt="system" src="../../../_images/system.png" style="width: 1.5em;" /></a> Use this tab to define general settings for the vector layer.</p>
<figure class="align-center" id="id13">
<span id="figure-vector-general"></span><img alt="../../../_images/vector_source_menu.png" src="../../../_images/vector_source_menu.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.1 </span><span class="caption-text">Source tab in vector Layer Properties dialog</span><a class="headerlink" href="#id13" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="settings">
<h3><a class="toc-backref" href="#id80"><span class="section-number">15.1.2.1. </span>Settings</a><a class="headerlink" href="#settings" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Set a <span class="guilabel">Layer name</span> different from the layer filename that will be
used to identify the layer in the project (in the <span class="guilabel">Layers Panel</span>, with
expressions, in print layout legend, …)</p></li>
<li><p>Depending on the data format, select the <span class="guilabel">Data source encoding</span> if not
correctly detected by QGIS.</p></li>
</ul>
</section>
<section id="coordinate-reference-system-and-geometry">
<h3><a class="toc-backref" href="#id81"><span class="section-number">15.1.2.2. </span>Coordinate Reference System and Geometry</a><a class="headerlink" href="#coordinate-reference-system-and-geometry" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Displays the layer’s <a class="reference internal" href="../working_with_projections/working_with_projections.html#layer-crs"><span class="std std-ref">Assigned Coordinate Reference System (CRS)</span></a>.
You can change the layer’s CRS, selecting a recently used one
in the drop-down list or clicking on <a class="reference internal" href="../../../_images/mActionSetProjection.png"><img alt="setProjection" src="../../../_images/mActionSetProjection.png" style="width: 1.5em;" /></a> <sup>Select CRS</sup> button
(see <a class="reference internal" href="../working_with_projections/working_with_projections.html#crs-selector"><span class="std std-ref">Coordinate Reference System Selector</span></a>). Use this process only if the CRS applied to the
layer is a wrong one or if none was applied.
If you wish to reproject your data into another CRS, rather use layer reprojection
algorithms from Processing or <a class="reference internal" href="../managing_data_source/create_layers.html#general-saveas"><span class="std std-ref">Save it into another layer</span></a>.</p></li>
<li><p><span class="guilabel">Create spatial index</span> (only for OGR-supported formats).</p></li>
<li><p><span class="guilabel">Update extents</span> information for a layer.</p></li>
</ul>
</section>
<section id="query-builder">
<span id="vector-query-builder"></span><span id="index-0"></span><h3><a class="toc-backref" href="#id82"><span class="section-number">15.1.2.3. </span>Query Builder</a><a class="headerlink" href="#query-builder" title="Permalink to this headline"></a></h3>
<p>The <span class="guilabel">Query Builder</span> dialog is accessible through the eponym button
at the bottom of the <span class="guilabel">Source</span> tab in the Layer Properties dialog,
under the <span class="guilabel">Provider feature filter</span> group.</p>
<p>The Query Builder provides an interface that allows
you to define a subset of the features in the layer using a SQL-like WHERE
clause and to display the result in the main window. As long as the query is
active, only the features corresponding to its result are available in the
project.</p>
<p>You can use one or more layer attributes to define the filter in the <code class="docutils literal notranslate"><span class="pre">Query</span>
<span class="pre">Builder</span></code>.
The use of more than one attribute is shown in <a class="reference internal" href="#figure-vector-querybuilder"><span class="std std-numref">Fig. 15.2</span></a>.
In the example, the filter combines the attributes</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">toa</span></code> (<code class="docutils literal notranslate"><span class="pre">DateTime</span></code> field: <code class="docutils literal notranslate"><span class="pre">cast(&quot;toa&quot;</span> <span class="pre">as</span> <span class="pre">character)</span> <span class="pre">&gt;</span> <span class="pre">'2017-05-17'</span></code> and
<code class="docutils literal notranslate"><span class="pre">cast(&quot;toa&quot;</span> <span class="pre">as</span> <span class="pre">character)</span> <span class="pre">&lt;</span> <span class="pre">'2019-12-24T18:00:00'</span></code>),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> (<code class="docutils literal notranslate"><span class="pre">String</span></code> field: <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;</span> <span class="pre">&gt;</span> <span class="pre">'S'</span></code>) and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FID</span></code> (<code class="docutils literal notranslate"><span class="pre">Integer</span></code> field: <code class="docutils literal notranslate"><span class="pre">FID</span> <span class="pre">&gt;</span> <span class="pre">10</span></code>)</p></li>
</ul>
<p>using the AND, OR and NOT operators and parenthesis.
This syntax (including the DateTime format for the <code class="docutils literal notranslate"><span class="pre">toa</span></code> field) works for
GeoPackage datasets.</p>
<p>The filter is made at the data provider (OGR, PostgreSQL, MSSQL…) level.
So the syntax depends on the data provider (DateTime is for instance not
supported for the ESRI Shapefile format).
The complete expression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;toa&quot;</span> <span class="k">as</span> <span class="n">character</span><span class="p">)</span> <span class="o">&gt;</span> <span class="s1">&#39;2017-05-17&#39;</span> <span class="n">AND</span>
<span class="n">cast</span><span class="p">(</span><span class="s2">&quot;toa&quot;</span> <span class="k">as</span> <span class="n">character</span><span class="p">)</span> <span class="o">&lt;</span> <span class="s1">&#39;2019-12-24T18:00:00&#39;</span> <span class="n">AND</span>
<span class="n">NOT</span> <span class="p">(</span><span class="s2">&quot;name&quot;</span> <span class="o">&gt;</span> <span class="s1">&#39;S&#39;</span> <span class="n">OR</span> <span class="n">FID</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also open the <span class="guilabel">Query Builder</span> dialog using the <span class="guilabel">Filter…</span>
option from the <span class="menuselection">Layer</span> menu or the layer contextual menu.
The <span class="guilabel">Fields</span>, <span class="guilabel">Values</span> and <span class="guilabel">Operators</span> sections in
the dialog help you to construct the SQL-like query exposed in the
<span class="guilabel">Provider specific filter expression</span> box.</p>
<figure class="align-center" id="id14">
<span id="figure-vector-querybuilder"></span><img alt="../../../_images/queryBuilder.png" src="../../../_images/queryBuilder.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.2 </span><span class="caption-text">Query Builder</span><a class="headerlink" href="#id14" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The <strong>Fields</strong> list contains all the fields of the layer. To add an attribute
column to the SQL WHERE clause field, double-click its name or just type it into
the SQL box.</p>
<p>The <strong>Values</strong> frame lists the values of the currently selected field. To list all
unique values of a field, click the <span class="guilabel">All</span> button. To instead list the first
25 unique values of the column, click the <span class="guilabel">Sample</span> button. To add a value
to the SQL WHERE clause field, double click its name in the Values list.
You can use the search box at the top of the Values frame to easily browse and
find attribute values in the list.</p>
<p>The <strong>Operators</strong> section contains all usable operators. To add an operator to
the SQL WHERE clause field, click the appropriate button. Relational operators
( <code class="docutils literal notranslate"><span class="pre">=</span></code> , <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> , …), string comparison operator (<code class="docutils literal notranslate"><span class="pre">LIKE</span></code>), and logical
operators (<code class="docutils literal notranslate"><span class="pre">AND</span></code>, <code class="docutils literal notranslate"><span class="pre">OR</span></code>, …) are available.</p>
<p>The <span class="guilabel">Test</span> button helps you check your query and displays a message box with
the number of features satisfying the current query.
Use the <span class="guilabel">Clear</span> button to wipe the SQL query and revert the layer to its
original state (ie, fully load all the features).</p>
<p>When a filter is applied,
QGIS treats the resulting subset acts as if it were the entire layer. For
example if you applied the filter above for ‘Borough’ (<code class="docutils literal notranslate"><span class="pre">&quot;TYPE_2&quot;</span> <span class="pre">=</span> <span class="pre">'Borough'</span></code>),
you can not display, query, save or edit <code class="docutils literal notranslate"><span class="pre">Anchorage</span></code>, because that is a
‘Municipality’ and therefore not part of the subset.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Filtered layers are indicated in the Layers Panel</strong></p>
<p>In the <span class="guilabel">Layers</span> panel, filtered layer is listed with a <a class="reference internal" href="../../../_images/mIndicatorFilter.png"><img alt="indicatorFilter" src="../../../_images/mIndicatorFilter.png" style="width: 1.5em;" /></a>
<sup>Filter</sup> icon next to it indicating the query used when the mouse hovers
over the button. Double-click the icon opens the <span class="guilabel">Query Builder</span> dialog
for edit.</p>
</div>
</section>
</section>
<section id="symbology-properties">
<span id="vector-style-menu"></span><span id="index-1"></span><h2><a class="toc-backref" href="#id83"><span class="section-number">15.1.3. </span>Symbology Properties</a><a class="headerlink" href="#symbology-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/symbology.png"><img alt="symbology" src="../../../_images/symbology.png" style="width: 2em;" /></a> The Symbology tab provides you with a comprehensive tool for
rendering and symbolizing your vector data. You can use tools that are
common to all vector data, as well as special symbolizing tools that were
designed for the different kinds of vector data. However all types share the
following dialog structure: in the upper part, you have a widget that helps
you prepare the classification and the symbol to use for features and at
the bottom the <a class="reference internal" href="#layer-rendering"><span class="std std-ref">Layer rendering</span></a> widget.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Switch quickly between different layer representations</strong></p>
<p>Using the <span class="menuselection">Styles ► Add</span> menu at the bottom of the
<span class="guilabel">Layer Properties</span> dialog, you can save as many styles as needed.
A style is the combination of all properties of a layer (such as symbology,
labeling, diagram, fields form, actions…) as you want. Then, simply
switch between styles from the context menu of the layer in <span class="guilabel">Layers Panel</span>
to automatically get different representations of your data.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Export vector symbology</strong></p>
<p>You have the option to export vector symbology from QGIS into Google *.kml,
*.dxf and MapInfo *.tab files. Just open the right mouse menu of the layer
and click on <span class="menuselection">Save As…</span> to specify the name of the output file
and its format. In the dialog, use the <span class="menuselection">Symbology export</span> menu
to save the symbology either as <span class="menuselection">Feature symbology ►</span> or as
<span class="menuselection">Symbol layer symbology ►</span>. If you have used symbol layers,
it is recommended to use the second setting.</p>
</div>
<section id="features-rendering">
<h3><a class="toc-backref" href="#id84"><span class="section-number">15.1.3.1. </span>Features rendering</a><a class="headerlink" href="#features-rendering" title="Permalink to this headline"></a></h3>
<p>The renderer is responsible for drawing a feature together with the correct
symbol. Regardless layer geometry type, there are four common types of
renderers: single symbol, categorized, graduated and rule-based. For point
layers, there are a point displacement and a heatmap renderers available while
polygon layers can also be rendered with the inverted polygons and 2.5 D renderers.</p>
<p>There is no continuous color renderer, because it is in fact only a special
case of the graduated renderer. The categorized and graduated renderers can be
created by specifying a symbol and a color ramp - they will set the colors for
symbols appropriately. For each data type (points, lines and polygons), vector
symbol layer types are available. Depending on the chosen renderer, the dialog
provides different additional sections.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you change the renderer type when setting the style of a vector layer the
settings you made for the symbol will be maintained. Be aware that this
procedure only works for one change. If you repeat changing the renderer
type the settings for the symbol will get lost.</p>
</div>
<section id="single-symbol-renderer">
<span id="index-2"></span><span id="id1"></span><h4><a class="toc-backref" href="#id85"><span class="section-number">15.1.3.1.1. </span>Single Symbol Renderer</a><a class="headerlink" href="#single-symbol-renderer" title="Permalink to this headline"></a></h4>
<p>The <a class="reference internal" href="../../../_images/rendererSingleSymbol.png"><img alt="singleSymbol" src="../../../_images/rendererSingleSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">Single Symbol</span> renderer is used to render
all features of the layer using a single user-defined symbol.
See <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">The Symbol Selector</span></a> for further information about symbol representation.</p>
<figure class="align-center" id="id15">
<span id="figure-single-symbology"></span><img alt="../../../_images/singlesymbol_ng_line.png" src="../../../_images/singlesymbol_ng_line.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.3 </span><span class="caption-text">Single symbol line properties</span><a class="headerlink" href="#id15" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="no-symbols-renderer">
<span id="no-symbol-renderer"></span><span id="index-3"></span><h4><a class="toc-backref" href="#id86"><span class="section-number">15.1.3.1.2. </span>No Symbols Renderer</a><a class="headerlink" href="#no-symbols-renderer" title="Permalink to this headline"></a></h4>
<p>The <a class="reference internal" href="../../../_images/rendererNullSymbol.png"><img alt="nullSymbol" src="../../../_images/rendererNullSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">No Symbols</span> renderer is a special use case of the
Single Symbol renderer as it applies the same rendering to all features.
Using this renderer, no symbol will be drawn for features,
but labeling, diagrams and other non-symbol parts will still be shown.</p>
<p>Selections can still be made on the layer in the canvas and selected
features will be rendered with a default symbol. Features being edited
will also be shown.</p>
<p>This is intended as a handy shortcut for layers which you only want
to show labels or diagrams for, and avoids the need to render
symbols with totally transparent fill/border to achieve this.</p>
</section>
<section id="categorized-renderer">
<span id="index-4"></span><span id="id2"></span><h4><a class="toc-backref" href="#id87"><span class="section-number">15.1.3.1.3. </span>Categorized Renderer</a><a class="headerlink" href="#categorized-renderer" title="Permalink to this headline"></a></h4>
<p>The <a class="reference internal" href="../../../_images/rendererCategorizedSymbol.png"><img alt="categorizedSymbol" src="../../../_images/rendererCategorizedSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">Categorized</span> renderer is used to render the
features of a layer, using a user-defined symbol whose aspect reflects the
discrete values of a field or an expression.</p>
<figure class="align-center" id="id16">
<span id="figure-categorized-symbology"></span><img alt="../../../_images/categorysymbol_ng_line.png" src="../../../_images/categorysymbol_ng_line.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.4 </span><span class="caption-text">Categorized Symbolizing options</span><a class="headerlink" href="#id16" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>To use categorized symbology for a layer:</p>
<ol class="arabic">
<li><p>Select the <span class="guilabel">Value</span> of classification: it can be an existing field
or an <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">expression</span></a> you can type in the box or build
using the associated <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> button. Using expressions for categorizing
avoids the need to create an ad hoc field for symbology purposes (eg, if your
classification criteria are derived from one or more attributes).</p>
<p>The expression used to classify features can be of any type; eg, it can:</p>
<ul>
<li><p>be a comparison. In this case, QGIS returns values <code class="docutils literal notranslate"><span class="pre">1</span></code> (<strong>True</strong>) and
<code class="docutils literal notranslate"><span class="pre">0</span></code> (<strong>False</strong>). Some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>myfield &gt;= 100
$id = @atlas_featureid
myfield % 2 = 0
within( $geometry, @atlas_geometry )
</pre></div>
</div>
</li>
<li><p>combine different fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">concat</span><span class="p">(</span> <span class="n">field_1</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">field_2</span> <span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>be a calculation on fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfield</span> <span class="o">%</span> <span class="mi">2</span>
<span class="n">year</span><span class="p">(</span> <span class="n">myfield</span> <span class="p">)</span>
<span class="n">field_1</span> <span class="o">+</span> <span class="n">field_2</span>
<span class="n">substr</span><span class="p">(</span> <span class="n">field_1</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span> <span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>be used to transform linear values to discrete classes, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="n">THEN</span> <span class="s1">&#39;Big&#39;</span> <span class="n">ELSE</span> <span class="s1">&#39;Small&#39;</span> <span class="n">END</span>
</pre></div>
</div>
</li>
<li><p>combine several discrete values into a single category, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CASE</span>
<span class="n">WHEN</span> <span class="n">building</span> <span class="n">IN</span> <span class="p">(</span><span class="s1">&#39;residence&#39;</span><span class="p">,</span> <span class="s1">&#39;mobile home&#39;</span><span class="p">)</span> <span class="n">THEN</span> <span class="s1">&#39;residential&#39;</span>
<span class="n">WHEN</span> <span class="n">building</span> <span class="n">IN</span> <span class="p">(</span><span class="s1">&#39;commercial&#39;</span><span class="p">,</span> <span class="s1">&#39;industrial&#39;</span><span class="p">)</span> <span class="n">THEN</span> <span class="s1">&#39;Commercial and Industrial&#39;</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>While you can use any kind of expression to categorize features,
for some complex expressions it might be simpler to use <a class="reference internal" href="#rule-based-rendering"><span class="std std-ref">rule-based
rendering</span></a>.</p>
</div>
</li>
<li><p>Configure the <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">Symbol</span></a>, which will be used as
base symbol for all the classes;</p></li>
<li><p>Indicate the <a class="reference internal" href="../style_library/style_manager.html#color-ramp"><span class="std std-ref">Color ramp</span></a>, ie the range of colors from which
the color applied to each symbol is selected.</p>
<p>Besides the common options of the <a class="reference internal" href="../introduction/general_tools.html#color-ramp-widget"><span class="std std-ref">color ramp widget</span></a>,
you can apply a <a class="reference internal" href="../../../_images/checkbox_unchecked.png"><img alt="unchecked" src="../../../_images/checkbox_unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Random Color Ramp</span> to the categories.
You can click the <span class="guilabel">Shuffle Random Colors</span> entry to regenerate a new set
of random colors if you are not satisfied.</p>
</li>
<li><p>Then click on the <span class="guilabel">Classify</span> button to create classes from the
distinct values of the provided field or expression.</p></li>
<li><p><span class="guilabel">Apply</span> the changes if the <a class="reference internal" href="../introduction/general_tools.html#layer-styling-panel"><span class="std std-ref">live update</span></a>
is not in use and each feature on the map canvas will be rendered with the
symbol of its class.</p>
<p>By default, QGIS appends an <span class="guilabel">all other values</span> class to the list.
While empty at the beginning, this class is used as a default class for any
feature not falling into the other classes (eg, when you create features
with new values for the classification field / expression).</p>
</li>
</ol>
<p>Further tweaks can be done to the default classification:</p>
<ul class="simple">
<li><p>You can <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>Add</sup> new categories, <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="signMinus" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> <sup>Remove</sup>
selected categories or <span class="guilabel">Delete All</span> of them.</p></li>
<li><p>A class can be disabled by unchecking the checkbox to the left of the
class name; the corresponding features are hidden on the map.</p></li>
<li><p>Drag-and-drop the rows to reorder the classes</p></li>
<li><p>To change the symbol, the value or the legend of a class, double click the item.</p></li>
</ul>
<p>Right-clicking over selected item(s) shows a contextual menu to:</p>
<ul>
<li><p><span class="guilabel">Copy Symbol</span> and <span class="guilabel">Paste Symbol</span>, a convenient way
to apply the item’s representation to others</p></li>
<li><p><span class="guilabel">Change Color…</span> of the selected symbol(s)</p></li>
<li><p><span class="guilabel">Change Opacity…</span> of the selected symbol(s)</p></li>
<li><p><span class="guilabel">Change Output Unit…</span> of the selected symbol(s)</p></li>
<li><p><span class="guilabel">Change Width…</span> of the selected line symbol(s)</p></li>
<li><p><span class="guilabel">Change Size…</span> of the selected point symbol(s)</p></li>
<li><p><span class="guilabel">Change Angle…</span> of the selected point symbol(s)</p></li>
<li><p><span class="guilabel">Merge Categories</span>: Groups multiple selected categories into a single
one. This allows simpler styling of layers with a large number of categories,
where it may be possible to group numerous distinct categories into a smaller
and more manageable set of categories which apply to multiple values.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Since the symbol kept for the merged categories is the one of the
topmost selected category in the list, you may want to move the category
whose symbol you wish to reuse to the top before merging.</p>
</div>
</li>
<li><p><span class="guilabel">Unmerge Categories</span> that were previously merged</p></li>
</ul>
<p id="categorized-advanced-menu">The <span class="guilabel">Advanced</span> menu gives access to options to speed classification
or fine-tune the symbols rendering:</p>
<ul class="simple">
<li><p><span class="guilabel">Match to saved symbols</span>: Using the <a class="reference internal" href="../style_library/style_manager.html#vector-style-manager"><span class="std std-ref">symbols library</span></a>, assigns to each category a symbol whose name
represents the classification value of the category</p></li>
<li><p><span class="guilabel">Match to symbols from file…</span>: Provided a file with symbols,
assigns to each category a symbol whose name represents the classification
value of the category</p></li>
<li><p><a class="reference internal" href="#symbols-levels"><span class="std std-ref">Symbol levels…</span></a> to define the order of symbols rendering.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Edit categories directly from the</strong> <span class="guilabel">Layers</span> <strong>panel</strong></p>
<p>When a layer symbology is based on a <a class="reference internal" href="#categorized-renderer"><span class="std std-ref">categorized</span></a>,
<a class="reference internal" href="#graduated-renderer"><span class="std std-ref">graduated</span></a> or <a class="reference internal" href="#rule-based-rendering"><span class="std std-ref">rule-based</span></a>
symbology mode, you can edit each of the categories from the <span class="guilabel">Layers</span>
Panel. Right-click on a sub-item of the layer and you will:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/mActionToggleAllLayers.png"><img alt="toggleAllLayers" src="../../../_images/mActionToggleAllLayers.png" style="width: 1.5em;" /></a> <span class="guilabel">Toggle items</span> visibility</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionShowAllLayers.png"><img alt="showAllLayers" src="../../../_images/mActionShowAllLayers.png" style="width: 1.5em;" /></a> <span class="guilabel">Show all items</span></p></li>
<li><p><a class="reference internal" href="../../../_images/mActionHideAllLayers.png"><img alt="hideAllLayers" src="../../../_images/mActionHideAllLayers.png" style="width: 1.5em;" /></a> <span class="guilabel">Hide all items</span></p></li>
<li><p>Modify the symbol color thanks to the <a class="reference internal" href="../introduction/general_tools.html#color-selector"><span class="std std-ref">color selector</span></a> wheel</p></li>
<li><p><span class="guilabel">Edit symbol…</span> from the <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">symbol selector</span></a> dialog</p></li>
<li><p><span class="guilabel">Copy symbol</span></p></li>
<li><p><span class="guilabel">Paste symbol</span></p></li>
</ul>
</div>
</section>
<section id="graduated-renderer">
<span id="index-5"></span><span id="id3"></span><h4><a class="toc-backref" href="#id88"><span class="section-number">15.1.3.1.4. </span>Graduated Renderer</a><a class="headerlink" href="#graduated-renderer" title="Permalink to this headline"></a></h4>
<p>The <a class="reference internal" href="../../../_images/rendererGraduatedSymbol.png"><img alt="graduatedSymbol" src="../../../_images/rendererGraduatedSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">Graduated</span> renderer is used to render
all the features from a layer, using an user-defined symbol whose color or size
reflects the assignment of a selected feature’s attribute to a class.</p>
<p>Like the Categorized Renderer, the Graduated Renderer allows you
to define rotation and size scale from specified columns.</p>
<p>Also, analogous to the Categorized Renderer, it allows you to select:</p>
<ul class="simple">
<li><p>The value (using the fields listbox or the <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a>
<sup>Set value expression</sup> function)</p></li>
<li><p>The symbol (using the Symbol selector dialog)</p></li>
<li><p>The legend format and the precision</p></li>
<li><p>The method to use to change the symbol: color or size</p></li>
<li><p>The colors (using the color Ramp list) if the color method is selected</p></li>
<li><p>The size (using the size domain and its unit)</p></li>
</ul>
<p>Then you can use the Histogram tab which shows an interactive histogram of the
values from the assigned field or expression. Class breaks can be moved or
added using the histogram widget.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use Statistical Summary panel to get more information on your vector
layer. See <a class="reference internal" href="../introduction/general_tools.html#statistical-summary"><span class="std std-ref">Statistical Summary Panel</span></a>.</p>
</div>
<p>Back to the Classes tab, you can specify the number of classes and also the
mode for classifying features within the classes (using the Mode list). The
available modes are:</p>
<ul class="simple">
<li><p>Equal Count (Quantile): each class will have the same number of elements
(the idea of a boxplot).</p></li>
<li><p>Equal Interval: each class will have the same size (e.g. with the values
from 1 to 16 and four classes, each class will have a size of four).</p></li>
<li><p>Logarithmic scale: suitable for data with a wide range of values.
Narrow classes for low values and wide classes for large values (e.g. for
decimal numbers with range [0..100] and two classes, the first class will
be from 0 to 10 and the second class from 10 to 100).</p></li>
<li><p>Natural Breaks (Jenks): the variance within each class is minimized while
the variance between classes is maximized.</p></li>
<li><p>Pretty Breaks: computes a sequence of about n+1 equally spaced nice values
which cover the range of the values in x. The values are chosen so that they
are 1, 2 or 5 times a power of 10. (based on pretty from the R statistical
environment <a class="reference external" href="https://www.rdocumentation.org/packages/base/topics/pretty">https://www.rdocumentation.org/packages/base/topics/pretty</a>).</p></li>
<li><p>Standard Deviation: classes are built depending on the standard deviation of
the values.</p></li>
</ul>
<p>The listbox in the center part of the <span class="guilabel">Symbology</span> tab lists the classes
together with their ranges, labels and symbols that will be rendered.</p>
<p>Click on <strong>Classify</strong> button to create classes using the chosen mode. Each
classes can be disabled unchecking the checkbox at the left of the class name.</p>
<p>To change symbol, value and/or label of the class, just double click
on the item you want to change.</p>
<p>Right-clicking over selected item(s) shows a contextual menu to:</p>
<ul class="simple">
<li><p><span class="guilabel">Copy Symbol</span> and <span class="guilabel">Paste Symbol</span>, a convenient way
to apply the item’s representation to others</p></li>
<li><p><span class="guilabel">Change Color…</span> of the selected symbol(s)</p></li>
<li><p><span class="guilabel">Change Opacity…</span> of the selected symbol(s)</p></li>
<li><p><span class="guilabel">Change Output Unit…</span> of the selected symbol(s)</p></li>
<li><p><span class="guilabel">Change Width…</span> of the selected line symbol(s)</p></li>
<li><p><span class="guilabel">Change Size…</span> of the selected point symbol(s)</p></li>
<li><p><span class="guilabel">Change Angle…</span> of the selected point symbol(s)</p></li>
</ul>
<p>The example in <a class="reference internal" href="#figure-graduated-symbology"><span class="std std-numref">Fig. 15.5</span></a> shows the graduated rendering dialog for
the major_rivers layer of the QGIS sample dataset.</p>
<figure class="align-center" id="id17">
<span id="figure-graduated-symbology"></span><img alt="../../../_images/graduatedsymbol_ng_line.png" src="../../../_images/graduatedsymbol_ng_line.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.5 </span><span class="caption-text">Graduated Symbolizing options</span><a class="headerlink" href="#id17" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Thematic maps using an expression</strong></p>
<p>Categorized and graduated thematic maps can be created using the result
of an expression. In the properties dialog for vector layers, the attribute
chooser is extended with a <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> <sup>Set column expression</sup> function.
So you don’t need to write the classification attribute
to a new column in your attribute table if you want the classification
attribute to be a composite of multiple fields, or a formula of some sort.</p>
</div>
</section>
<section id="proportional-symbol-and-multivariate-analysis">
<span id="proportional-symbols"></span><span id="index-6"></span><h4><a class="toc-backref" href="#id89"><span class="section-number">15.1.3.1.5. </span>Proportional Symbol and Multivariate Analysis</a><a class="headerlink" href="#proportional-symbol-and-multivariate-analysis" title="Permalink to this headline"></a></h4>
<p>Proportional Symbol and Multivariate Analysis are not
rendering types available from the Symbology rendering drop-down list.
However with the <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">data-defined override</span></a> options applied
over any of the previous
rendering options, QGIS allows you to display your point and line data with
such representation.</p>
<p><strong>Creating proportional symbol</strong></p>
<p>To apply a proportional rendering:</p>
<ol class="arabic">
<li><p>First apply to the layer the <a class="reference internal" href="#single-symbol-renderer"><span class="std std-ref">single symbol renderer</span></a>.</p></li>
<li><p>Then set the symbol to apply to the features.</p></li>
<li><p>Select the item at the upper level of the symbol tree, and use the
<a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>Data-defined override</sup> <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">button</span></a> next
to the <span class="guilabel">Size</span> (for point layer) or <span class="guilabel">Width</span> (for line
layer) option.</p></li>
<li><p>Select a field or enter an expression, and for each feature, QGIS will apply
the output value to the property and proportionally resize the symbol in the
map canvas.</p>
<p>If need be, use the <span class="guilabel">Size assistant…</span> option of the <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a>
menu to apply some transformation (exponential, flannery…) to the symbol
size rescaling (see <a class="reference internal" href="../introduction/general_tools.html#data-defined-assistant"><span class="std std-ref">Using the data-defined assistant interface</span></a> for more details).</p>
</li>
</ol>
<p>You can choose to display the proportional symbols in the <a class="reference internal" href="../introduction/general_tools.html#label-legend"><span class="std std-ref">Layers panel</span></a> and the <a class="reference internal" href="../print_composer/composer_items/composer_legend.html#layout-legend-item"><span class="std std-ref">print layout legend item</span></a>:
unfold the <span class="guilabel">Advanced</span> drop-down list at the bottom of the main dialog of
the <span class="guilabel">Symbology</span> tab and select <strong>Data-defined size legend…</strong> to
configure the legend items (see <a class="reference internal" href="#data-defined-size-legend"><span class="std std-ref">Data-defined size legend</span></a> for details).</p>
<figure class="align-center" id="id18">
<span id="figure-symbology-proportional"></span><img alt="../../../_images/proportional_symbols.png" src="../../../_images/proportional_symbols.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.6 </span><span class="caption-text">Scaling airports size based on elevation of the airport</span><a class="headerlink" href="#id18" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Creating multivariate analysis</strong></p>
<p>A multivariate analysis rendering helps you evaluate the relationship between
two or more variables e.g., one can be represented by a color ramp while the
other is represented by a size.</p>
<p>The simplest way to create multivariate analysis in QGIS is to:</p>
<ol class="arabic simple">
<li><p>First apply a categorized or graduated rendering on a layer, using the same
type of symbol for all the classes.</p></li>
<li><p>Then, apply a proportional symbology on the classes:</p>
<ol class="arabic simple">
<li><p>Click on the <span class="guilabel">Change</span> button above the classification frame:
you get the <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">The Symbol Selector</span></a> dialog.</p></li>
<li><p>Rescale the size or width of the symbol layer using the <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a>
<a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">data defined override</span></a> widget as seen above.</p></li>
</ol>
</li>
</ol>
<p>Like the proportional symbol, the scaled symbology can be added to the layer
tree, on top of the categorized or graduated classes symbols using the
<a class="reference internal" href="#data-defined-size-legend"><span class="std std-ref">data defined size legend</span></a> feature. And
both representation are also available in the print layout legend item.</p>
<figure class="align-center" id="id19">
<span id="figure-symbology-multivariate"></span><img alt="../../../_images/multivariate_example.png" src="../../../_images/multivariate_example.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.7 </span><span class="caption-text">Multivariate example with scaled size legend</span><a class="headerlink" href="#id19" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="rule-based-renderer">
<span id="rule-based-rendering"></span><span id="index-7"></span><h4><a class="toc-backref" href="#id90"><span class="section-number">15.1.3.1.6. </span>Rule-based Renderer</a><a class="headerlink" href="#rule-based-renderer" title="Permalink to this headline"></a></h4>
<p>The <a class="reference internal" href="../../../_images/rendererRuleBasedSymbol.png"><img alt="ruleBasedSymbol" src="../../../_images/rendererRuleBasedSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">Rule-based</span> renderer is used to render
all the features from a layer,
using rule-based symbols whose aspect reflects the assignment of a selected
feature’s attribute to a class. The rules are based on SQL statements and can
be nested.
The dialog allows rule grouping by filter or scale, and you can decide
if you want to enable symbol levels or use only the first-matched rule.</p>
<p>To create a rule:</p>
<ol class="arabic simple">
<li><p>Activate an existing row by double-clicking it (by default, QGIS adds a
symbol without a rule when the rendering mode is enabled) or click the
<a class="reference internal" href="../../../_images/mActionProjectProperties.png"><img alt="projectProperties" src="../../../_images/mActionProjectProperties.png" style="width: 1.5em;" /></a> <sup>Edit rule</sup> or <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>Add rule</sup> button.</p></li>
<li><p>In the <span class="guilabel">Edit Rule</span> dialog that opens, you can define a label
to help you identify each rule. This is the label that will be displayed
in the <span class="guilabel">Layers Panel</span> and also in the print composer legend.</p></li>
<li><p>Manually enter an expression in the text box next to the <a class="reference internal" href="../../../_images/radiobuttonon.png"><img alt="radioButtonOn" src="../../../_images/radiobuttonon.png" style="width: 1.5em;" /></a>
<span class="guilabel">Filter</span> option or press the <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> button next to it to open
the expression string builder dialog.</p></li>
<li><p>Use the provided functions and the layer attributes to build an <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">expression</span></a> to filter the features you’d like to retrieve. Press
the <span class="guilabel">Test</span> button to check the result of the query.</p></li>
<li><p>You can enter a longer label to complete the rule description.</p></li>
<li><p>You can use the <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Scale Range</span> option to set scales at which
the rule should be applied.</p></li>
<li><p>Finally, configure the <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">symbol to use</span></a> for these features.</p></li>
<li><p>And press <span class="guilabel">OK</span>.</p></li>
</ol>
<p>A new row summarizing the rule is added to the Layer Properties dialog.
You can create as many rules as necessary following the steps above or copy
pasting an existing rule. Drag-and-drop the rules on top of each other to nest
them and refine the upper rule features in subclasses.</p>
<p>Selecting a rule, you can also organize its features in subclasses using the
<span class="guilabel">Refine selected rules</span> drop-down menu. Automated rule refinement can be
based on:</p>
<ul class="simple">
<li><p><strong>scales</strong>;</p></li>
<li><p><strong>categories</strong>: applying a <a class="reference internal" href="#categorized-renderer"><span class="std std-ref">categorized renderer</span></a>;</p></li>
<li><p>or <strong>ranges</strong>: applying a <a class="reference internal" href="#graduated-renderer"><span class="std std-ref">graduated renderer</span></a>.</p></li>
</ul>
<p>Refined classes appear like sub-items of the rule, in a tree hierarchy and like
above, you can set symbology of each class.</p>
<p>In the <span class="guilabel">Edit rule</span> dialog, you can avoid writing all the rules and
make use of the <a class="reference internal" href="../../../_images/radiobuttonoff.png"><img alt="radioButtonOff" src="../../../_images/radiobuttonoff.png" style="width: 1.5em;" /></a> <span class="guilabel">Else</span> option to catch all the
features that do not match any of the other rules, at the same level. This
can also be achieved by writing <code class="docutils literal notranslate"><span class="pre">Else</span></code> in the <em>Rule</em> column of the
<span class="menuselection">Layer Properties ► Symbology ► Rule-based</span> dialog.</p>
<p>Right-clicking over selected item(s) shows a contextual menu to:</p>
<ul class="simple">
<li><p><span class="guilabel">Copy</span> and <span class="guilabel">Paste</span>, a convenient way to create new
item(s) based on existing item(s)</p></li>
<li><p><span class="guilabel">Copy Symbol</span> and <span class="guilabel">Paste Symbol</span>, a convenient way
to apply the item’s representation to others</p></li>
<li><p><span class="guilabel">Change Color…</span> of the selected symbol(s)</p></li>
<li><p><span class="guilabel">Change Opacity…</span> of the selected symbol(s)</p></li>
<li><p><span class="guilabel">Change Output Unit…</span> of the selected symbol(s)</p></li>
<li><p><span class="guilabel">Change Width…</span> of the selected line symbol(s)</p></li>
<li><p><span class="guilabel">Change Size…</span> of the selected point symbol(s)</p></li>
<li><p><span class="guilabel">Change Angle…</span> of the selected point symbol(s)</p></li>
<li><p><span class="guilabel">Refine Current Rule</span>: open a submenu that allows to
refine the current rule with <strong>scales</strong>, <strong>categories</strong> (categorized renderer)
or <strong>Ranges</strong> (graduated renderer).</p></li>
</ul>
<p>The created rules also appear in a tree hierarchy in the map legend.
Double-click the rules in the map legend and the Symbology tab of the layer
properties appears showing the rule that is the background for the symbol in
the tree.</p>
<p>The example in <a class="reference internal" href="#figure-rule-based-symbology"><span class="std std-numref">Fig. 15.8</span></a> shows the rule-based rendering
dialog for the rivers layer of the QGIS sample dataset.</p>
<figure class="align-center" id="id20">
<span id="figure-rule-based-symbology"></span><img alt="../../../_images/rulesymbol_ng_line.png" src="../../../_images/rulesymbol_ng_line.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.8 </span><span class="caption-text">Rule-based Symbolizing options</span><a class="headerlink" href="#id20" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="point-displacement-renderer">
<span id="point-displacement"></span><span id="index-8"></span><h4><a class="toc-backref" href="#id91"><span class="section-number">15.1.3.1.7. </span>Point displacement Renderer</a><a class="headerlink" href="#point-displacement-renderer" title="Permalink to this headline"></a></h4>
<p>The <a class="reference internal" href="../../../_images/rendererPointDisplacementSymbol.png"><img alt="pointDisplacementSymbol" src="../../../_images/rendererPointDisplacementSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">Point Displacement</span> renderer works to
visualize all features of a point layer, even if they have the same location.
To do this, the renderer takes the points falling in a given <span class="guilabel">Distance</span>
tolerance from each other and places them around their barycenter following
different <span class="guilabel">Placement methods</span>:</p>
<ul class="simple">
<li><p><strong>Ring</strong>: places all the features on a circle whose radius depends on the
number of features to display.</p></li>
<li><p><strong>Concentric rings</strong>: uses a set of concentric circles to show the features.</p></li>
<li><p><strong>Grid</strong>: generates a regular grid with a point symbol at each intersection.</p></li>
</ul>
<p>The <span class="guilabel">Center symbol</span> widget helps you customize the symbol and color
of the middle point.
For the distributed points symbols, you can apply any of the <em>No symbols</em>,
<em>Single symbol</em>, <em>Categorized</em>, <em>Graduated</em> or <em>Rule-based</em> renderer using the
<span class="guilabel">Renderer</span> drop-down list and customize them using the
<span class="guilabel">Renderer Settings…</span> button.</p>
<p>While the minimal spacing of the <span class="guilabel">Displacement lines</span> depends on the
point symbol renderer’s, you can still customize some of its settings such as
the <span class="guilabel">Stroke width</span>, <span class="guilabel">Stroke color</span> and <span class="guilabel">Size
adjustment</span> (eg, to add more spacing between the rendered points).</p>
<p>Use the <span class="guilabel">Labels</span> group options to perform points labeling: the labels
are placed near the displaced position of the symbol, and not at the feature
real position. Other than the <span class="guilabel">Label attribute</span>, <span class="guilabel">Label
font</span> and <span class="guilabel">Label color</span>, you can set the <span class="guilabel">Minimum map
scale</span> to display the labels.</p>
<figure class="align-center" id="id21">
<span id="figure-displacement-symbology"></span><img alt="../../../_images/poi_displacement.png" src="../../../_images/poi_displacement.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.9 </span><span class="caption-text">Point displacement dialog</span><a class="headerlink" href="#id21" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Point Displacement renderer does not alter feature geometry, meaning that
points are not moved from their position. They are still located
at their initial place. Changes are only visual, for rendering purpose.
Use instead the Processing <a class="reference internal" href="../processing_algs/qgis/vectorgeometry.html#qgispointsdisplacement"><span class="std std-ref">Points displacement</span></a> algorithm
if you want to create displaced features.</p>
</div>
</section>
<section id="point-cluster-renderer">
<span id="point-cluster"></span><span id="index-9"></span><h4><a class="toc-backref" href="#id92"><span class="section-number">15.1.3.1.8. </span>Point Cluster Renderer</a><a class="headerlink" href="#point-cluster-renderer" title="Permalink to this headline"></a></h4>
<p>Unlike the <a class="reference internal" href="../../../_images/rendererPointDisplacementSymbol.png"><img alt="pointDisplacementSymbol" src="../../../_images/rendererPointDisplacementSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">Point Displacement</span> renderer
which blows up nearest or overlaid point features placement, the <a class="reference internal" href="../../../_images/rendererPointClusterSymbol.png"><img alt="pointClusterSymbol" src="../../../_images/rendererPointClusterSymbol.png" style="width: 1.5em;" /></a>
<span class="guilabel">Point Cluster</span> renderer groups nearby points into a single
rendered marker symbol. Based on a specified <span class="guilabel">Distance</span>, points
that fall within from each others are merged into a single symbol.
Points aggregation is made based on the closest group being formed, rather
than just assigning them the first group within the search distance.</p>
<p>From the main dialog, you can:</p>
<ul class="simple">
<li><p>set the symbol to represent the point cluster in the <span class="guilabel">Cluster symbol</span>;
the default rendering displays the number of aggregated features thanks to the
<code class="docutils literal notranslate"><span class="pre">&#64;cluster_size</span></code> <a class="reference internal" href="../introduction/general_tools.html#general-tools-variables"><span class="std std-ref">variable</span></a> on Font marker
symbol layer.</p></li>
<li><p>use the <span class="guilabel">Renderer</span> drop-down list to apply any of the other feature
rendering types to the layer (single, categorized, rule-based…). Then, push
the <span class="guilabel">Renderer Settings…</span> button to configure features’ symbology as usual.
Note that this renderer is only visible on features that are not clustered.
Also, when the symbol color is the same for all the point features inside a
cluster, that color sets the <code class="docutils literal notranslate"><span class="pre">&#64;cluster_color</span></code> variable of the cluster.</p></li>
</ul>
<figure class="align-center" id="id22">
<span id="figure-cluster-symbology"></span><img alt="../../../_images/cluster_symbol.png" src="../../../_images/cluster_symbol.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.10 </span><span class="caption-text">Point Cluster dialog</span><a class="headerlink" href="#id22" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Point Cluster renderer does not alter feature geometry,
meaning that points are not moved from their position. They are still located
at their initial place. Changes are only visual, for rendering purpose.
Use instead the Processing <a class="reference internal" href="../processing_algs/qgis/vectoranalysis.html#qgiskmeansclustering"><span class="std std-ref">K-means clustering</span></a> or
<a class="reference internal" href="../processing_algs/qgis/vectoranalysis.html#qgisdbscanclustering"><span class="std std-ref">DBSCAN clustering</span></a> algorithm if you want to create cluster-based
features.</p>
</div>
</section>
<section id="inverted-polygon-renderer">
<span id="index-10"></span><span id="id4"></span><h4><a class="toc-backref" href="#id93"><span class="section-number">15.1.3.1.9. </span>Inverted Polygon Renderer</a><a class="headerlink" href="#inverted-polygon-renderer" title="Permalink to this headline"></a></h4>
<p>The <a class="reference internal" href="../../../_images/rendererInvertedSymbol.png"><img alt="invertedSymbol" src="../../../_images/rendererInvertedSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">Inverted Polygon</span> renderer allows user
to define a symbol to fill in
outside of the layer’s polygons. As above you can select subrenderers, namely
Single symbol, Graduated, Categorized, Rule-Based or 2.5D renderer.</p>
<figure class="align-center" id="id23">
<span id="figure-inverted-symbology"></span><img alt="../../../_images/inverted_polygon_symbol.png" src="../../../_images/inverted_polygon_symbol.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.11 </span><span class="caption-text">Inverted Polygon dialog</span><a class="headerlink" href="#id23" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="heatmap-renderer">
<span id="heatmap"></span><span id="index-11"></span><h4><a class="toc-backref" href="#id94"><span class="section-number">15.1.3.1.10. </span>Heatmap Renderer</a><a class="headerlink" href="#heatmap-renderer" title="Permalink to this headline"></a></h4>
<p>With the <a class="reference internal" href="../../../_images/rendererHeatmapSymbol.png"><img alt="heatmapSymbol" src="../../../_images/rendererHeatmapSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">Heatmap</span> renderer you can create live
dynamic heatmaps for (multi)point layers.
You can specify the heatmap radius in millimeters, points, pixels, map units or
inches, choose and edit a color ramp for the heatmap style and use a slider for
selecting a trade-off between render speed and quality. You can also define a
maximum value limit and give a weight to points using a field or an expression.
When adding or removing a feature the heatmap renderer updates the heatmap style
automatically.</p>
<figure class="align-center" id="id24">
<span id="figure-heatmap-symbology"></span><img alt="../../../_images/heatmap_symbol.png" src="../../../_images/heatmap_symbol.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.12 </span><span class="caption-text">Heatmap dialog</span><a class="headerlink" href="#id24" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="d-renderer">
<span id="d-rendering"></span><span id="index-12"></span><h4><a class="toc-backref" href="#id95"><span class="section-number">15.1.3.1.11. </span>2.5D Renderer</a><a class="headerlink" href="#d-renderer" title="Permalink to this headline"></a></h4>
<p>Using the <a class="reference internal" href="../../../_images/renderer25dSymbol.png"><img alt="25dSymbol" src="../../../_images/renderer25dSymbol.png" style="width: 1.5em;" /></a> <span class="guilabel">2.5D</span> renderer it’s possible to create
a 2.5D effect on your layer’s features.
You start by choosing a <span class="guilabel">Height</span> value (in map units). For that
you can use a fixed value, one of your layer’s fields, or an expression. You also
need to choose an <span class="guilabel">Angle</span> (in degrees) to recreate the viewer position
(0° means west, growing in counter clock wise). Use advanced configuration options
to set the <span class="guilabel">Roof Color</span> and <span class="guilabel">Wall Color</span>. If you would like
to simulate solar radiation on the features walls, make sure to check the
<a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Shade walls based on aspect</span> option. You can also
simulate a shadow by setting a <span class="guilabel">Color</span> and <span class="guilabel">Size</span> (in map
units).</p>
<figure class="align-center" id="id25">
<span id="figure-25d-symbology"></span><img alt="../../../_images/2_5dsymbol.png" src="../../../_images/2_5dsymbol.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.13 </span><span class="caption-text">2.5D dialog</span><a class="headerlink" href="#id25" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Using 2.5D effect with other renderers</strong></p>
<p>Once you have finished setting the basic style on the 2.5D renderer, you can
convert this to another renderer (single, categorized, graduated). The 2.5D
effects will be kept and all other renderer specific options will be
available for you to fine tune them (this way you can have for example categorized
symbols with a nice 2.5D representation or add some extra styling to your 2.5D
symbols). To make sure that the shadow and the “building” itself do not interfere
with other nearby features, you may need to enable Symbols Levels (
<span class="menuselection">Advanced ► Symbol levels…</span>).
The 2.5D height and angle values are saved in the layer’s variables,
so you can edit it afterwards in the variables tab of the layer’s properties dialog.</p>
</div>
</section>
</section>
<section id="layer-rendering">
<span id="index-13"></span><span id="id5"></span><h3><a class="toc-backref" href="#id96"><span class="section-number">15.1.3.2. </span>Layer rendering</a><a class="headerlink" href="#layer-rendering" title="Permalink to this headline"></a></h3>
<p>From the Symbology tab, you can also set some options that invariably act on all
features of the layer:</p>
<ul>
<li><p><span class="guilabel">Opacity</span> <img alt="slider" src="../../../_images/slider.png" />: You can make the underlying layer in
the map canvas visible with this tool. Use the slider to adapt the visibility
of your vector layer to your needs. You can also make a precise definition of
the percentage of visibility in the menu beside the slider.</p></li>
<li><p><span class="guilabel">Blending mode</span> at the <span class="guilabel">Layer</span> and <span class="guilabel">Feature</span> levels:
You can achieve special rendering effects with these tools that you may previously
only know from graphics programs. The pixels of your overlaying and
underlaying layers are mixed through the settings described in <a class="reference internal" href="../introduction/general_tools.html#blend-modes"><span class="std std-ref">Blending Modes</span></a>.</p></li>
<li><p>Apply <a class="reference internal" href="#draw-effects"><span class="std std-ref">paint effects</span></a> on all the layer features with the
<span class="guilabel">Draw Effects</span> button.</p></li>
<li><p><span class="guilabel">Control feature rendering order</span> allows you, using features
attributes, to define the z-order in which they shall be rendered.
Activate the checkbox and click on the <a class="reference internal" href="../../../_images/sort.png"><img alt="sort" src="../../../_images/sort.png" style="width: 1.5em;" /></a> button beside.
You then get the <span class="guilabel">Define Order</span> dialog in which you:</p>
<ol class="arabic simple">
<li><p>Choose a field or build an expression to apply to the layer features.</p></li>
<li><p>Set in which order the fetched features should be sorted, i.e. if you choose
<strong>Ascending</strong> order, the features with lower value are rendered under those
with higher value.</p></li>
<li><p>Define when features returning NULL value should be rendered: <strong>first</strong>
(bottom) or <strong>last</strong> (top).</p></li>
<li><p>Repeat the above steps as many times as rules you wish to use.</p></li>
</ol>
<p>The first rule is applied
to all the features in the layer, z-ordering them according to their returned value.
Then, within each group of features with the same value (including those with
NULL value) and thus the same z-level, the next rule is applied to sort them.
And so on…</p>
</li>
</ul>
<figure class="align-center" id="id26">
<span id="figure-layer-rendering"></span><img alt="../../../_images/layer_rendering_options.png" src="../../../_images/layer_rendering_options.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.14 </span><span class="caption-text">Layer rendering options</span><a class="headerlink" href="#id26" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="other-settings">
<h3><a class="toc-backref" href="#id97"><span class="section-number">15.1.3.3. </span>Other Settings</a><a class="headerlink" href="#other-settings" title="Permalink to this headline"></a></h3>
<section id="symbol-levels">
<span id="symbols-levels"></span><span id="index-14"></span><h4><a class="toc-backref" href="#id98"><span class="section-number">15.1.3.3.1. </span>Symbol levels</a><a class="headerlink" href="#symbol-levels" title="Permalink to this headline"></a></h4>
<p>For renderers that allow stacked symbol layers (only heatmap doesn’t) there is
an option to control the rendering order of each symbol’s levels.</p>
<p>For most of the renderers, you can access the Symbols levels option by clicking
the <span class="guilabel">Advanced</span> button below the saved symbols list and choosing
<span class="guilabel">Symbol levels</span>. For the <a class="reference internal" href="#rule-based-rendering"><span class="std std-ref">Rule-based Renderer</span></a> the option is
directly available through <span class="guilabel">Symbols Levels…</span> button, while for
<a class="reference internal" href="#point-displacement"><span class="std std-ref">Point displacement Renderer</span></a> renderer the same button is inside the
<span class="guilabel">Rendering settings</span> dialog.</p>
<p>To activate symbols levels, select the <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Enable symbol
levels</span>. Each row will show up a small sample of the combined symbol, its label
and the individual symbols layer divided into columns with a number next to it.
The numbers represent the rendering order level in which the symbol layer
will be drawn. Lower values levels are drawn first, staying at the bottom, while
higher values are drawn last, on top of the others.</p>
<figure class="align-center" id="id27">
<span id="figure-symbol-levels"></span><img alt="../../../_images/symbol_levels.png" src="../../../_images/symbol_levels.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.15 </span><span class="caption-text">Symbol levels dialog</span><a class="headerlink" href="#id27" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If symbols levels are deactivated, the complete symbols will be drawn
according to their respective features order. Overlapping symbols will
simply obfuscate to other below. Besides, similar symbols won’t “merge” with
each other.</p>
</div>
<figure class="align-center" id="id28">
<span id="figure-symbol-levels-example"></span><img alt="../../../_images/symbol_levels_examples.png" src="../../../_images/symbol_levels_examples.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.16 </span><span class="caption-text">Symbol levels activated (A) and deactivated (B) difference</span><a class="headerlink" href="#id28" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="data-defined-size-legend">
<span id="id6"></span><h4><a class="toc-backref" href="#id99"><span class="section-number">15.1.3.3.2. </span>Data-defined size legend</a><a class="headerlink" href="#data-defined-size-legend" title="Permalink to this headline"></a></h4>
<p>When a layer is rendered with the <a class="reference internal" href="#proportional-symbols"><span class="std std-ref">proportional symbol or the multivariate
rendering</span></a> or when a <a class="reference internal" href="#diagram-size"><span class="std std-ref">scaled size diagram</span></a> is applied to the layer, you can allow the display of the scaled
symbols in both the <a class="reference internal" href="../introduction/general_tools.html#label-legend"><span class="std std-ref">Layers panel</span></a> and the <a class="reference internal" href="../print_composer/composer_items/composer_legend.html#layout-legend-item"><span class="std std-ref">print
layout legend</span></a>.</p>
<p>To enable the <span class="guilabel">Data-defined Size Legend</span> dialog to render symbology,
select the eponym option in the <span class="guilabel">Advanced</span> button below the saved symbols
list. For diagrams, the option is available under the <span class="guilabel">Legend</span> tab.
The dialog provides the following options to:</p>
<ul class="simple">
<li><p>select the type of legend: <a class="reference internal" href="../../../_images/radiobuttonon.png"><img alt="radioButtonOn" src="../../../_images/radiobuttonon.png" style="width: 1.5em;" /></a> <span class="guilabel">Legend not enabled</span>,
<a class="reference internal" href="../../../_images/radiobuttonoff.png"><img alt="radioButtonOff" src="../../../_images/radiobuttonoff.png" style="width: 1.5em;" /></a> <span class="guilabel">Separated legend items</span> and <a class="reference internal" href="../../../_images/radiobuttonoff.png"><img alt="radioButtonOff" src="../../../_images/radiobuttonoff.png" style="width: 1.5em;" /></a>
<span class="guilabel">Collapsed legend</span>. For the latter option, you can select whether
the legend items are aligned at the <strong>Bottom</strong> or at the <strong>Center</strong>;</p></li>
<li><p>set the <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">symbol to use</span></a> for legend representation;</p></li>
<li><p>insert the title in the legend;</p></li>
<li><p>resize the classes to use: by default, QGIS provides you with a legend of
five classes (based on natural pretty breaks) but you can apply your own
classification using the <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Manual size classes</span> option.
Use the <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> and <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="signMinus" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> buttons to set your custom classes
values and labels.</p></li>
</ul>
<p>A preview of the legend is displayed in the right panel of the dialog and
updated as you set the parameters. For collapsed legend, a leader line from
the horizontal center of the symbol to the corresponding legend text is drawn.</p>
<figure class="align-center" id="id29">
<span id="figure-size-legend"></span><img alt="../../../_images/data_defined_size_legend.png" src="../../../_images/data_defined_size_legend.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.17 </span><span class="caption-text">Setting size scaled legend</span><a class="headerlink" href="#id29" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, data-defined size legend for layer symbology can only be
applied to point layer using single, categorized or graduated symbology.</p>
</div>
</section>
<section id="draw-effects">
<span id="index-15"></span><span id="id7"></span><h4><a class="toc-backref" href="#id100"><span class="section-number">15.1.3.3.3. </span>Draw effects</a><a class="headerlink" href="#draw-effects" title="Permalink to this headline"></a></h4>
<p>In order to improve layer rendering and avoid (or at least reduce)
the resort to other software for final rendering of maps, QGIS provides another
powerful functionality: the <a class="reference internal" href="../../../_images/mIconPaintEffects.png"><img alt="paintEffects" src="../../../_images/mIconPaintEffects.png" style="width: 1.5em;" /></a> <span class="guilabel">Draw Effects</span> options,
which adds paint effects for customizing the visualization of vector layers.</p>
<p>The option is available in the <span class="menuselection">Layer Properties ► Symbology</span> dialog,
under the <a class="reference internal" href="#layer-rendering"><span class="std std-ref">Layer rendering</span></a> group (applying to the whole
layer) or in <a class="reference internal" href="../style_library/symbol_selector.html#symbol-selector"><span class="std std-ref">symbol layer properties</span></a> (applying
to corresponding features). You can combine both usage.</p>
<p>Paint effects can be activated by checking the <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Draw effects</span> option
and clicking the <a class="reference internal" href="../../../_images/mIconPaintEffects.png"><img alt="paintEffects" src="../../../_images/mIconPaintEffects.png" style="width: 1.5em;" /></a> <sup>Customize effects</sup> button. That will open
the <span class="guilabel">Effect Properties</span> Dialog (see <a class="reference internal" href="#figure-effects-source"><span class="std std-numref">Fig. 15.18</span></a>). The following
effect types, with custom options are available:</p>
<ul>
<li><p><strong>Source</strong>: Draws the feature’s original style according to the configuration
of the layer’s properties. The <span class="guilabel">Opacity</span> of its style can be adjusted
as well as the <a class="reference internal" href="../introduction/general_tools.html#blend-modes"><span class="std std-ref">Blend mode</span></a> and <a class="reference internal" href="#draw-modes"><span class="std std-ref">Draw mode</span></a>.
These are common properties for all types of effects.</p>
<figure class="align-center" id="id30">
<span id="figure-effects-source"></span><img alt="../../../_images/source.png" src="../../../_images/source.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.18 </span><span class="caption-text">Draw Effects: Source dialog</span><a class="headerlink" href="#id30" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>Blur</strong>: Adds a blur effect on the vector layer. The custom options that you
can change are the <span class="guilabel">Blur type</span> (<span class="guilabel">Stack blur (fast)</span> or
<span class="guilabel">Gaussian blur (quality)</span>) and the <span class="guilabel">Blur strength</span>.</p>
<figure class="align-center" id="id31">
<span id="figure-effects-blur"></span><img alt="../../../_images/blur.png" src="../../../_images/blur.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.19 </span><span class="caption-text">Draw Effects: Blur dialog</span><a class="headerlink" href="#id31" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>Colorise</strong>: This effect can be used to make a version of the style using one
single hue. The base will always be a grayscale version of the symbol and you
can:</p>
<ul class="simple">
<li><p>Use the <a class="reference internal" href="../../../_images/selectstring.png"><img alt="selectString" src="../../../_images/selectstring.png" style="width: 2.5em;" /></a> <span class="guilabel">Grayscale</span> to select how to create it:
options are ‘By lightness’, ‘By luminosity’, ‘By average’ and ‘Off’.</p></li>
<li><p>If <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Colorise</span> is selected, it will be possible to mix
another color and choose how strong it should be.</p></li>
<li><p>Control the <span class="guilabel">Brightness</span>, <span class="guilabel">Contrast</span> and
<span class="guilabel">Saturation</span> levels of the resulting symbol.</p></li>
</ul>
<figure class="align-center" id="id32">
<span id="figure-effects-colorize"></span><img alt="../../../_images/colorise.png" src="../../../_images/colorise.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.20 </span><span class="caption-text">Draw Effects: Colorize dialog</span><a class="headerlink" href="#id32" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>Drop Shadow</strong>: Using this effect adds a shadow on the feature, which looks
like adding an extra dimension. This effect can be customized by changing the
<span class="guilabel">Offset</span> angle and distance, determining where the shadow shifts
towards to and the proximity to the source object. <span class="menuselection">Drop Shadow</span>
also has the option to change the <span class="guilabel">Blur radius</span> and the
<span class="guilabel">Color</span> of the effect.</p>
<figure class="align-center" id="id33">
<span id="figure-effects-drop-shadow"></span><img alt="../../../_images/drop_shadow.png" src="../../../_images/drop_shadow.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.21 </span><span class="caption-text">Draw Effects: Drop Shadow dialog</span><a class="headerlink" href="#id33" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>Inner Shadow</strong>: This effect is similar to the <span class="guilabel">Drop Shadow</span>
effect, but it adds the shadow effect on the inside of the edges of the feature.
The available options for customization are the same as the <span class="guilabel">Drop
Shadow</span> effect.</p>
<figure class="align-center" id="id34">
<span id="figure-effects-inner-shadow"></span><img alt="../../../_images/inner_shadow.png" src="../../../_images/inner_shadow.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.22 </span><span class="caption-text">Draw Effects: Inner Shadow dialog</span><a class="headerlink" href="#id34" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>Inner Glow</strong>: Adds a glow effect inside the feature. This effect can be
customized by adjusting the <span class="guilabel">Spread</span> (width) of the glow, or
the <span class="guilabel">Blur radius</span>. The latter specifies the proximity from
the edge of the feature where you want any blurring to happen. Additionally,
there are options to customize the color of the glow using a <span class="guilabel">Single
color</span> or a <span class="guilabel">Color ramp</span>.</p>
<figure class="align-center" id="id35">
<span id="figure-effects-inner-glow"></span><img alt="../../../_images/inner_glow.png" src="../../../_images/inner_glow.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.23 </span><span class="caption-text">Draw Effects: Inner Glow dialog</span><a class="headerlink" href="#id35" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>Outer Glow</strong>: This effect is similar to the <span class="guilabel">Inner Glow</span> effect,
but it adds the glow effect on the outside of the edges of the feature.
The available options for customization are the same as the <span class="guilabel">Inner
Glow</span> effect.</p>
<figure class="align-center" id="id36">
<span id="figure-effects-outer-glow"></span><img alt="../../../_images/outer_glow.png" src="../../../_images/outer_glow.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.24 </span><span class="caption-text">Draw Effects: Outer Glow dialog</span><a class="headerlink" href="#id36" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p><strong>Transform</strong>: Adds the possibility of transforming the shape of the symbol.
The first options available for customization are the <span class="guilabel">Reflect
horizontal</span> and <span class="guilabel">Reflect vertical</span>, which actually create a
reflection on the horizontal and/or vertical axes. The other options are:</p>
<ul class="simple">
<li><p><span class="guilabel">Shear X,Y</span>: Slants the feature along the X and/or Y axis.</p></li>
<li><p><span class="guilabel">Scale X,Y</span>: Enlarges or minimizes the feature along the X
and/or Y axis by the given percentage.</p></li>
<li><p><span class="guilabel">Rotation</span>: Turns the feature around its center point.</p></li>
<li><p>and <span class="guilabel">Translate X,Y</span> changes the position of the item based on
a distance given on the X and/or Y axis.</p></li>
</ul>
<figure class="align-center" id="id37">
<span id="figure-effects-transform"></span><img alt="../../../_images/transform.png" src="../../../_images/transform.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.25 </span><span class="caption-text">Draw Effects: Transform dialog</span><a class="headerlink" href="#id37" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
</ul>
<p>One or more effect types can be used at the same time. You (de)activate an effect
using its checkbox in the effects list. You can change the selected effect type by
using the <a class="reference internal" href="../../../_images/selectstring.png"><img alt="selectString" src="../../../_images/selectstring.png" style="width: 2.5em;" /></a> <span class="guilabel">Effect type</span> option. You can reorder the effects
using <a class="reference internal" href="../../../_images/mActionArrowUp.png"><img alt="arrowUp" src="../../../_images/mActionArrowUp.png" style="width: 1.5em;" /></a> <sup>Move up</sup> and <a class="reference internal" href="../../../_images/mActionArrowDown.png"><img alt="arrowDown" src="../../../_images/mActionArrowDown.png" style="width: 1.5em;" /></a> <sup>Move down</sup>
buttons, and also add/remove effects using the <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>Add new effect</sup>
and <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="signMinus" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> <sup>Remove effect</sup> buttons.</p>
<p>There are some common options available for all draw effect types.
<span class="guilabel">Opacity</span> and <span class="guilabel">Blend mode</span> options work similar
to the ones described in <a class="reference internal" href="#layer-rendering"><span class="std std-ref">Layer rendering</span></a> and can be used in all draw
effects except for the transform one.</p>
<p id="draw-modes">There is also a <a class="reference internal" href="../../../_images/selectstring.png"><img alt="selectString" src="../../../_images/selectstring.png" style="width: 2.5em;" /></a> <span class="guilabel">Draw mode</span> option available for
every effect, and you can choose whether to render and/or modify the
symbol, following some rules:</p>
<ul class="simple">
<li><p>Effects render from top to bottom.</p></li>
<li><p><span class="guilabel">Render only</span> mode means that the effect will be visible.</p></li>
<li><p><span class="guilabel">Modifier only</span> mode means that the effect will not be visible
but the changes that it applies will be passed to the next effect
(the one immediately below).</p></li>
<li><p>The <span class="guilabel">Render and Modify</span> mode will make the effect visible and
pass any changes to the next effect. If the effect is at the top of the
effects list or if the immediately above effect is not in modify mode,
then it will use the original source symbol from the layers properties
(similar to source).</p></li>
</ul>
</section>
</section>
</section>
<section id="labels-properties">
<span id="vector-labels-tab"></span><h2><a class="toc-backref" href="#id101"><span class="section-number">15.1.4. </span>Labels Properties</a><a class="headerlink" href="#labels-properties" title="Permalink to this headline"></a></h2>
<p>The <a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labeling" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <span class="guilabel">Labels</span> properties provides you with all the needed
and appropriate capabilities to configure smart labeling on vector layers. This
dialog can also be accessed from the <span class="guilabel">Layer Styling</span> panel, or using
the <a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labeling" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <sup>Layer Labeling Options</sup> button of the <strong>Labels toolbar</strong>.</p>
<p>The first step is to choose the labeling method from the drop-down list.
Available methods are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/labelingNone.png"><img alt="labelingNone" src="../../../_images/labelingNone.png" style="width: 1.5em;" /></a> <span class="guilabel">No labels</span>: the default value, showing no labels
from the layer</p></li>
<li><p><a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labeling" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <span class="guilabel">Single labels</span>: Show labels on the map using a single
attribute or an expression</p></li>
<li><p><a class="reference internal" href="../../../_images/labelingRuleBased.png"><img alt="labelingRuleBased" src="../../../_images/labelingRuleBased.png" style="width: 1.5em;" /></a> <a class="reference internal" href="#rule-based-labeling"><span class="std std-ref">Rule-based labeling</span></a></p></li>
<li><p>and <a class="reference internal" href="../../../_images/labelingObstacle.png"><img alt="labelingObstacle" src="../../../_images/labelingObstacle.png" style="width: 1.5em;" /></a> <span class="guilabel">Blocking</span>: allows to set a layer as just an
obstacle for other layer’s labels without rendering any labels of its own.</p></li>
</ul>
<p>The next steps assume you select the <a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labeling" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <span class="guilabel">Single labels</span>
option, opening the following dialog.</p>
<figure class="align-center" id="id38">
<span id="figure-labels"></span><img alt="../../../_images/label_menu_text.png" src="../../../_images/label_menu_text.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.26 </span><span class="caption-text">Layer labeling settings - Single labels</span><a class="headerlink" href="#id38" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>At the top of the dialog, a <span class="guilabel">Value</span> drop-down list is enabled.
You can select an attribute column to use for labeling. By default, the
<a class="reference internal" href="#maptips"><span class="std std-ref">display field</span></a> is used. Click <a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> if you want to define
labels based on expressions - See <a class="reference internal" href="#labeling-with-expressions"><span class="std std-ref">Define labels based on expressions</span></a>.</p>
<p>Below are displayed options to customize the labels, under various tabs:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/text.png"><img alt="text" src="../../../_images/text.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-text"><span class="std std-ref">Text</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelformatting.png"><img alt="labelformatting" src="../../../_images/labelformatting.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-formatting"><span class="std std-ref">Formatting</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelbuffer.png"><img alt="labelbuffer" src="../../../_images/labelbuffer.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-buffer"><span class="std std-ref">Buffer</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelmask.png"><img alt="labelmask" src="../../../_images/labelmask.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-mask"><span class="std std-ref">Mask</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelbackground.png"><img alt="labelbackground" src="../../../_images/labelbackground.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-background"><span class="std std-ref">Background</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelshadow.png"><img alt="labelshadow" src="../../../_images/labelshadow.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-shadow"><span class="std std-ref">Shadow</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelcallout.png"><img alt="labelcallout" src="../../../_images/labelcallout.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-callouts"><span class="std std-ref">Callouts</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/labelplacement.png"><img alt="labelplacement" src="../../../_images/labelplacement.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-placement"><span class="std std-ref">Placement</span></a></p></li>
<li><p><a class="reference internal" href="../../../_images/render.png"><img alt="render" src="../../../_images/render.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-rendering"><span class="std std-ref">Rendering</span></a></p></li>
</ul>
<p>Description of how to set each property is exposed at <a class="reference internal" href="../style_library/label_settings.html#showlabels"><span class="std std-ref">Setting a label</span></a>.</p>
<section id="setting-the-automated-placement-engine">
<span id="automated-placement"></span><span id="index-16"></span><h3><a class="toc-backref" href="#id102"><span class="section-number">15.1.4.1. </span>Setting the automated placement engine</a><a class="headerlink" href="#setting-the-automated-placement-engine" title="Permalink to this headline"></a></h3>
<p>You can use the automated placement settings to configure a project-level
automated behavior of the labels. In the top right corner of the
<span class="guilabel">Labels</span> tab, click the <a class="reference internal" href="../../../_images/mIconAutoPlacementSettings.png"><img alt="autoPlacement" src="../../../_images/mIconAutoPlacementSettings.png" style="width: 1.5em;" /></a> <sup>Automated placement
settings (applies to all layers)</sup> button, opening a dialog with the following
options:</p>
<figure class="align-center" id="id39">
<span id="figure-automated-placement"></span><img alt="../../../_images/placement_engine.png" src="../../../_images/placement_engine.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.27 </span><span class="caption-text">The labels automated placement engine</span><a class="headerlink" href="#id39" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p><span class="guilabel">Number of candidates</span>: calculates and assigns to line and
polygon features the number of possible labels placement based on their size.
The longer or wider a feature is, the more candidates it has, and its labels
can be better placed with less risk of collision.</p></li>
<li><p><span class="guilabel">Text rendering</span>: sets the default value for label rendering
widgets when <a class="reference internal" href="../introduction/qgis_gui.html#exportingmapcanvas"><span class="std std-ref">exporting a map canvas</span></a> or
<a class="reference internal" href="../print_composer/create_output.html#create-output"><span class="std std-ref">a layout</span></a> to PDF or SVG.
If <span class="guilabel">Always render labels as text</span> is selected then labels can be
edited in external applications (e.g. Inkscape) as normal text. BUT the side
effect is that the rendering quality is decreased, and there are issues with
rendering when certain text settings like buffers are in place. That’s why
<span class="guilabel">Always render labels as paths (recommended)</span> which exports labels
as outlines, is recommended.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Allow truncated labels on edges of map</span>: controls
whether labels which fall partially outside of the map extent should be
rendered. If checked, these labels will be shown (when there’s no way to
place them fully within the visible area). If unchecked then partially
visible labels will be skipped. Note that this setting has no effects on
labels’ display in the <a class="reference internal" href="../print_composer/composer_items/composer_map.html#layout-map-item"><span class="std std-ref">layout map item</span></a>.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox_unchecked.png"><img alt="unchecked" src="../../../_images/checkbox_unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Show all labels for all layers (i.e. including
colliding objects)</span>. Note that this option can be also set per layer (see
<a class="reference internal" href="../style_library/label_settings.html#labels-rendering"><span class="std std-ref">Rendering tab</span></a>)</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox_unchecked.png"><img alt="unchecked" src="../../../_images/checkbox_unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Show unplaced labels</span>: allows to determine whether any
important labels are missing from the maps (e.g. due to overlaps or other
constraints). They are displayed using a customizable color.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox_unchecked.png"><img alt="unchecked" src="../../../_images/checkbox_unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Show candidates (for debugging)</span>: controls whether boxes
should be drawn on the map showing all the candidates generated for label placement.
Like the label says, it’s useful only for debugging and testing the effect different
labeling settings have. This could be handy for a better manual placement with
tools from the <a class="reference internal" href="#label-toolbar"><span class="std std-ref">label toolbar</span></a>.</p></li>
<li><p><span class="guilabel">Project labeling version</span>: QGIS supports two different versions of
label automatic placement:</p>
<ul>
<li><p><span class="guilabel">Version 1</span>: the old system (used by QGIS versions 3.10 and earlier,
and when opening projects created in these versions in QGIS 3.12 or later).
Version 1 treats label and obstacle priorities as “rough guides” only,
and it’s possible that a low-priority label will be placed over a high-priority
obstacle in this version. Accordingly, it can be difficult to obtain the
desired labeling results when using this version and it is thus
recommended only for compatibility with older projects.</p></li>
<li><p><span class="guilabel">Version 2 (recommended)</span>: this is the default system in new
projects created in QGIS 3.12 or later. In version 2, the logic dictating
when labels are allowed to overlap <a class="reference internal" href="../style_library/label_settings.html#labels-obstacles"><span class="std std-ref">obstacles</span></a>
has been reworked. The newer logic forbids any labels from overlapping
any obstacles with a greater obstacle weight compared to the label’s
priority. As a result, this version results in much more predictable
and easier to understand labeling results.</p></li>
</ul>
</li>
</ul>
</section>
<section id="rule-based-labeling">
<span id="id8"></span><h3><a class="toc-backref" href="#id103"><span class="section-number">15.1.4.2. </span>Rule-based labeling</a><a class="headerlink" href="#rule-based-labeling" title="Permalink to this headline"></a></h3>
<p>With rule-based labeling multiple label configurations can be defined
and applied selectively on the base of expression filters and scale range, as in
<a class="reference internal" href="#rule-based-rendering"><span class="std std-ref">Rule-based rendering</span></a>.</p>
<p>To create a rule, select the <a class="reference internal" href="../../../_images/labelingRuleBased.png"><img alt="labelingRuleBased" src="../../../_images/labelingRuleBased.png" style="width: 1.5em;" /></a> <strong>Rule-based labeling</strong> option in the main
drop-down list from the <span class="guilabel">Labels</span> tab and click the <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> button
at the bottom  of the dialog. Then fill the new dialog with a description and an
expression to filter features. You can also set a <a class="reference internal" href="../introduction/general_tools.html#label-scaledepend"><span class="std std-ref">scale range</span></a> in which the label rule should be applied. The other
options available in this dialog are the <a class="reference internal" href="../style_library/label_settings.html#showlabels"><span class="std std-ref">common settings</span></a>
seen beforehand.</p>
<figure class="align-center" id="id40">
<span id="figure-labels-rule-settings"></span><img alt="../../../_images/label_rule_settings.png" src="../../../_images/label_rule_settings.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.28 </span><span class="caption-text">Rule settings</span><a class="headerlink" href="#id40" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>A summary of existing rules is shown in the main dialog (see <a class="reference internal" href="#figure-labels-rule-based"><span class="std std-numref">Fig. 15.29</span></a>).
You can add multiple rules, reorder or imbricate them with a drag-and-drop.
You can as well remove them with the <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="signMinus" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> button or edit them with
<a class="reference internal" href="../../../_images/mActionProjectProperties.png"><img alt="projectProperties" src="../../../_images/mActionProjectProperties.png" style="width: 1.5em;" /></a> button or a double-click.</p>
<figure class="align-center" id="id41">
<span id="figure-labels-rule-based"></span><img alt="../../../_images/label_rules_panel.png" src="../../../_images/label_rules_panel.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.29 </span><span class="caption-text">Rule based labeling panel</span><a class="headerlink" href="#id41" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="define-labels-based-on-expressions">
<span id="labeling-with-expressions"></span><span id="index-17"></span><h3><a class="toc-backref" href="#id104"><span class="section-number">15.1.4.3. </span>Define labels based on expressions</a><a class="headerlink" href="#define-labels-based-on-expressions" title="Permalink to this headline"></a></h3>
<p>Whether you choose single or rule-based labeling type, QGIS allows using
expressions to label features.</p>
<p>Assuming you are using the <span class="guilabel">Single labels</span> method, click the
<a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> button near the <span class="guilabel">Value</span> drop-down list in the
<a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labeling" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a> <span class="guilabel">Labels</span> tab of the properties dialog.</p>
<p>In <a class="reference internal" href="#figure-labels-expression"><span class="std std-numref">Fig. 15.30</span></a>, you see a sample expression to label the alaska
trees layer with tree type and area, based on the field ‘VEGDESC’, some
descriptive text, and the function <code class="docutils literal notranslate"><span class="pre">$area</span></code> in combination with
<code class="docutils literal notranslate"><span class="pre">format_number()</span></code> to make it look nicer.</p>
<figure class="align-center" id="id42">
<span id="figure-labels-expression"></span><img alt="../../../_images/label_expression.png" src="../../../_images/label_expression.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.30 </span><span class="caption-text">Using expressions for labeling</span><a class="headerlink" href="#id42" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Expression based labeling is easy to work with. All you have to take
care of is that:</p>
<ul class="simple">
<li><p>You may need to combine all elements (strings, fields, and functions)
with a string concatenation function such as <code class="docutils literal notranslate"><span class="pre">concat</span></code>, <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">||</span></code>. Be
aware that in some situations (when null or numeric value are involved) not
all of these tools will fit your need.</p></li>
<li><p>Strings are written in ‘single quotes’.</p></li>
<li><p>Fields are written in “double quotes” or without any quote.</p></li>
</ul>
<p>Let’s have a look at some examples:</p>
<ol class="arabic">
<li><p>Label based on two fields ‘name’ and ‘place’ with a comma as separator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;name&quot;</span> <span class="o">||</span> <span class="s1">&#39;, &#39;</span> <span class="o">||</span> <span class="s2">&quot;place&quot;</span>
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">John</span> <span class="n">Smith</span><span class="p">,</span> <span class="n">Paris</span>
</pre></div>
</div>
</li>
<li><p>Label based on two fields ‘name’ and ‘place’ with other texts:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;My name is &#39; + &quot;name&quot; + &#39;and I live in &#39; + &quot;place&quot;
&#39;My name is &#39; || &quot;name&quot; || &#39;and I live in &#39; || &quot;place&quot;
concat(&#39;My name is &#39;, name, &#39; and I live in &#39;, &quot;place&quot;)
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">My</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">John</span> <span class="n">Smith</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">live</span> <span class="ow">in</span> <span class="n">Paris</span>
</pre></div>
</div>
</li>
<li><p>Label based on two fields ‘name’ and ‘place’ with other texts combining
different concatenation functions:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>concat(&#39;My name is &#39;, name, &#39; and I live in &#39; || place)
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">My</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">John</span> <span class="n">Smith</span> <span class="ow">and</span> <span class="n">I</span> <span class="n">live</span> <span class="ow">in</span> <span class="n">Paris</span>
</pre></div>
</div>
<p>Or, if the field ‘place’ is NULL, returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">My</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">John</span> <span class="n">Smith</span>
</pre></div>
</div>
</li>
<li><p>Multi-line label based on two fields ‘name’ and ‘place’ with a
descriptive text:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>concat(&#39;My name is &#39;, &quot;name&quot;, &#39;\n&#39; , &#39;I live in &#39; , &quot;place&quot;)
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">My</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">John</span> <span class="n">Smith</span>
<span class="n">I</span> <span class="n">live</span> <span class="ow">in</span> <span class="n">Paris</span>
</pre></div>
</div>
</li>
<li><p>Label based on a field and the $area function to show the place’s name
and its rounded area size in a converted unit:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;The area of &#39; || &quot;place&quot; || &#39; has a size of &#39;
|| round($area/10000) || &#39; ha&#39;
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">area</span> <span class="n">of</span> <span class="n">Paris</span> <span class="n">has</span> <span class="n">a</span> <span class="n">size</span> <span class="n">of</span> <span class="mi">10500</span> <span class="n">ha</span>
</pre></div>
</div>
</li>
<li><p>Create a CASE ELSE condition. If the population value in field
<cite>population</cite> is &lt;= 50000 it is a town, otherwise it is a city:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>concat(&#39;This place is a &#39;,
CASE WHEN &quot;population&quot; &lt;= 50000 THEN &#39;town&#39; ELSE &#39;city&#39; END)
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">place</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">town</span>
</pre></div>
</div>
</li>
<li><p>Display name for the cities and no label for the other features
(for the “city” context, see example above):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CASE WHEN &quot;population&quot; &gt; 50000 THEN &quot;NAME&quot; END
</pre></div>
</div>
<p>Returns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Paris</span>
</pre></div>
</div>
</li>
</ol>
<p>As you can see in the expression builder, you have hundreds of functions available
to create simple and very complex expressions to label your data in QGIS. See
<a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">Expressions</span></a> chapter for more information and examples on expressions.</p>
</section>
<section id="using-data-defined-override-for-labeling">
<span id="data-defined-labeling"></span><span id="index-18"></span><h3><a class="toc-backref" href="#id105"><span class="section-number">15.1.4.4. </span>Using data-defined override for labeling</a><a class="headerlink" href="#using-data-defined-override-for-labeling" title="Permalink to this headline"></a></h3>
<p>With the <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>Data defined override</sup> function, the settings for
the labeling are overridden by entries in the attribute table or expressions
based on them. This feature can be used to
set values for most of the labeling options described above.</p>
<p>For example, using the Alaska QGIS sample dataset, let’s label the <code class="file docutils literal notranslate"><span class="pre">airports</span></code>
layer with their name, based on their militarian <code class="docutils literal notranslate"><span class="pre">USE</span></code>, i.e. whether the airport
is accessible to :</p>
<ul class="simple">
<li><p>military people, then display it in gray color, size 8;</p></li>
<li><p>others, then show in blue color, size 10.</p></li>
</ul>
<p>To do this, after you enabled the labeling on the <code class="docutils literal notranslate"><span class="pre">NAME</span></code> field of the layer
(see <a class="reference internal" href="../style_library/label_settings.html#showlabels"><span class="std std-ref">Setting a label</span></a>):</p>
<ol class="arabic">
<li><p>Activate the <span class="guilabel">Text</span> tab.</p></li>
<li><p>Click on the <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> icon next to the <span class="guilabel">Size</span> property.</p></li>
<li><p>Select <span class="guilabel">Edit…</span> and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CASE</span>
  <span class="n">WHEN</span> <span class="s2">&quot;USE&quot;</span> <span class="n">like</span> <span class="s1">&#39;%Military%&#39;</span> <span class="n">THEN</span> <span class="mi">8</span> <span class="o">--</span> <span class="n">because</span> <span class="n">compatible</span> <span class="n">values</span> <span class="n">are</span> <span class="s1">&#39;Military&#39;</span>
                                      <span class="o">--</span> <span class="ow">and</span> <span class="s1">&#39;Joint Military/Civilian&#39;</span>
  <span class="n">ELSE</span> <span class="mi">10</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
<li><p>Press <span class="guilabel">OK</span> to validate. The dialog closes and the <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> button
becomes <a class="reference internal" href="../../../_images/mIconDataDefineExpressionOn.png"><img alt="dataDefineExpressionOn" src="../../../_images/mIconDataDefineExpressionOn.png" style="width: 1.5em;" /></a> meaning that an rule is being run.</p></li>
<li><p>Then click the button next to the color property, type the expression below
and validate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CASE</span>
  <span class="n">WHEN</span> <span class="s2">&quot;USE&quot;</span> <span class="n">like</span> <span class="s1">&#39;%Military%&#39;</span> <span class="n">THEN</span> <span class="s1">&#39;150, 150, 150&#39;</span>
  <span class="n">ELSE</span> <span class="s1">&#39;0, 0, 255&#39;</span>
<span class="n">END</span>
</pre></div>
</div>
</li>
</ol>
<p>Likewise, you can customize any other property of the label, the way you want.
See more details on the <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>Data-define override</sup> widget’s
description and manipulation in <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">Data defined override setup</span></a> section.</p>
<figure class="align-center" id="id43">
<span id="figure-labels-attribute-data-defined"></span><img alt="../../../_images/label_attribute_data_defined.png" src="../../../_images/label_attribute_data_defined.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.31 </span><span class="caption-text">Airports labels are formatted based on their attributes</span><a class="headerlink" href="#id43" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Use the data-defined override to label every part of multi-part features</strong></p>
<p>There is an option to set the labeling for multi-part features independently from
your label properties. Choose the  <a class="reference internal" href="../../../_images/render.png"><img alt="render" src="../../../_images/render.png" style="width: 1.5em;" /></a> <a class="reference internal" href="../style_library/label_settings.html#labels-rendering"><span class="std std-ref">Rendering</span></a>,
<code class="docutils literal notranslate"><span class="pre">Feature</span> <span class="pre">options</span></code>, go to the <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>Data-define override</sup> button
next to the checkbox <a class="reference internal" href="../../../_images/checkbox_unchecked.png"><img alt="unchecked" src="../../../_images/checkbox_unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Label every part of multipart-features</span>
and define the labels as described in <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">Data defined override setup</span></a>.</p>
</div>
<section id="the-label-toolbar">
<span id="label-toolbar"></span><h4><a class="toc-backref" href="#id106"><span class="section-number">15.1.4.4.1. </span>The Label Toolbar</a><a class="headerlink" href="#the-label-toolbar" title="Permalink to this headline"></a></h4>
<p>The <span class="guilabel">Label Toolbar</span> provides some tools to manipulate <a class="reference internal" href="../../../_images/labelingSingle.png"><img alt="labeling" src="../../../_images/labelingSingle.png" style="width: 1.5em;" /></a>
<a class="reference internal" href="#vector-labels-tab"><span class="std std-ref">label</span></a> (including their <a class="reference internal" href="../style_library/label_settings.html#labels-callouts"><span class="std std-ref">callout</span></a>)
or <a class="reference internal" href="../../../_images/diagram.png"><img alt="diagram" src="../../../_images/diagram.png" style="width: 2em;" /></a> <a class="reference internal" href="#sec-diagram"><span class="std std-ref">diagram</span></a> properties:</p>
<figure class="align-center" id="id44">
<span id="figure-labels-tools"></span><img alt="../../../_images/diagram_toolbar.png" src="../../../_images/diagram_toolbar.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.32 </span><span class="caption-text">The Label toolbar</span><a class="headerlink" href="#id44" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/mActionShowPinnedLabels.png"><img alt="showPinnedLabels" src="../../../_images/mActionShowPinnedLabels.png" style="width: 1.5em;" /></a> <sup>Highlight Pinned Labels, Diagrams and Callouts</sup>.
If the vector layer of the item is editable, then the highlighting is green,
otherwise it’s blue.</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionShowUnplacedLabel.png"><img alt="showUnplacedLabel" src="../../../_images/mActionShowUnplacedLabel.png" style="width: 1.5em;" /></a> <sup>Toggle Display of Unplaced Labels</sup>: Allows to
determine whether any important labels are missing from the maps (e.g. due
to overlaps or other constraints). They are displayed with a customizable
color (see <a class="reference internal" href="#automated-placement"><span class="std std-ref">Setting the automated placement engine</span></a>).</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionPinLabels.png"><img alt="pinLabels" src="../../../_images/mActionPinLabels.png" style="width: 1.5em;" /></a> <sup>Pin/Unpin Labels and Diagrams</sup>. By clicking or draging an
area, you pin overlaid items. If you click or drag an area holding <kbd class="kbd docutils literal notranslate">Shift</kbd>,
the items are unpinned. Finally, you can also click or drag an area holding
<kbd class="kbd docutils literal notranslate">Ctrl</kbd> to toggle their pin status.</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionShowHideLabels.png"><img alt="showHideLabels" src="../../../_images/mActionShowHideLabels.png" style="width: 1.5em;" /></a> <sup>Show/Hide Labels and Diagrams</sup>. If you click on the items,
or click and drag an area holding <kbd class="kbd docutils literal notranslate">Shift</kbd>, they are hidden.
When an item is hidden, you just have to click on the feature to restore its
visibility. If you drag an area, all the items in the area will be restored.</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionMoveLabel.png"><img alt="moveLabel" src="../../../_images/mActionMoveLabel.png" style="width: 1.5em;" /></a> <sup>Move a Label, Diagram or Callout</sup>: click to select
the item and click to move it to the desired place. The new coordinates are
stored in <a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">auxiliary fields</span></a>.
Selecting the item with this tool and hitting the <kbd class="kbd docutils literal notranslate">Delete</kbd> key
will delete the stored position value.</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionRotateLabel.png"><img alt="rotateLabel" src="../../../_images/mActionRotateLabel.png" style="width: 1.5em;" /></a> <sup>Rotate a Label</sup>. Click to select the label and click again
to apply the desired rotation. Likewise, the new angle is stored in an auxiliary
field. Selecting a label with this tool and hitting the
<kbd class="kbd docutils literal notranslate">Delete</kbd> key will delete the rotation value of this label.</p></li>
<li><p><a class="reference internal" href="../../../_images/mActionChangeLabelProperties.png"><img alt="changeLabelProperties" src="../../../_images/mActionChangeLabelProperties.png" style="width: 1.5em;" /></a> <sup>Change Label Properties</sup>. It opens a dialog to change the
clicked label properties; it can be the label itself, its coordinates, angle,
font, size, multiline alignment … as long as this property has been mapped
to a field. Here you can set the option to <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Label every
part of a feature</span>.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Label tools overwrite current field values</strong></p>
<p>Using the <span class="guilabel">Label toolbar</span> to customize the labeling actually writes
the new value of the property in the mapped field. Hence, be careful to not
inadvertently replace data you may need later!</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">Auxiliary Storage Properties</span></a> mechanism may be used to customize
labeling (position, and so on) without modifying the underlying data source.</p>
</div>
</section>
<section id="customize-the-labels-from-the-map-canvas">
<h4><a class="toc-backref" href="#id107"><span class="section-number">15.1.4.4.2. </span>Customize the labels from the map canvas</a><a class="headerlink" href="#customize-the-labels-from-the-map-canvas" title="Permalink to this headline"></a></h4>
<p>Combined with the <span class="guilabel">Label Toolbar</span>, the data defined override setting
helps you manipulate labels in the map canvas (move, edit, rotate).
We now describe an example using the data-defined override function for the
<a class="reference internal" href="../../../_images/mActionMoveLabel.png"><img alt="moveLabel" src="../../../_images/mActionMoveLabel.png" style="width: 1.5em;" /></a><sup>Move Label, Diagram or Callout</sup> function
(see <a class="reference internal" href="#figure-labels-coordinate-data-defined"><span class="std std-numref">Fig. 15.33</span></a>).</p>
<ol class="arabic">
<li><p>Import <code class="file docutils literal notranslate"><span class="pre">lakes.shp</span></code> from the QGIS sample dataset.</p></li>
<li><p>Double-click the layer to open the Layer Properties. Click on <span class="guilabel">Labels</span>
and <span class="guilabel">Placement</span>. Select <a class="reference internal" href="../../../_images/radiobuttonon.png"><img alt="radioButtonOn" src="../../../_images/radiobuttonon.png" style="width: 1.5em;" /></a> <span class="guilabel">Offset from centroid</span>.</p></li>
<li><p>Look for the <span class="guilabel">Data defined</span> entries. Click the <a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> icon
to define the field type for the <span class="guilabel">Coordinate</span>. Choose <code class="docutils literal notranslate"><span class="pre">xlabel</span></code>
for X and <code class="docutils literal notranslate"><span class="pre">ylabel</span></code> for Y. The icons are now highlighted in yellow.</p>
<figure class="align-center" id="id45">
<span id="figure-labels-coordinate-data-defined"></span><img alt="../../../_images/label_coordinate_data_defined.png" src="../../../_images/label_coordinate_data_defined.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.33 </span><span class="caption-text">Labeling of vector polygon layers with data-defined override</span><a class="headerlink" href="#id45" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
<li><p>Zoom into a lake.</p></li>
<li><p>Set editable the layer using the <a class="reference internal" href="../../../_images/mActionToggleEditing.png"><img alt="toggleEditing" src="../../../_images/mActionToggleEditing.png" style="width: 1.5em;" /></a> <sup>Toggle Editing</sup> button.</p></li>
<li><p>Go to the Label toolbar and click the <a class="reference internal" href="../../../_images/mActionMoveLabel.png"><img alt="moveLabel" src="../../../_images/mActionMoveLabel.png" style="width: 1.5em;" /></a> icon.
Now you can shift the label manually to another position (see <a class="reference internal" href="#figure-labels-move"><span class="std std-numref">Fig. 15.34</span></a>).
The new position of the label is saved in the <code class="docutils literal notranslate"><span class="pre">xlabel</span></code> and <code class="docutils literal notranslate"><span class="pre">ylabel</span></code> columns
of the attribute table.</p></li>
<li><p>It’s also possible to add a line connecting each lake to its moved label using:</p>
<ul>
<li><p>the label’s <a class="reference internal" href="../style_library/label_settings.html#labels-callouts"><span class="std std-ref">callout property</span></a></p></li>
<li><p>or the <a class="reference internal" href="../style_library/symbol_selector.html#geometry-generator-symbol"><span class="std std-ref">geometry generator symbol layer</span></a> with
the expression below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>make_line( centroid( $geometry ), make_point( &quot;xlabel&quot;, &quot;ylabel&quot; ) )
</pre></div>
</div>
<figure class="align-center" id="id46">
<span id="figure-labels-move"></span><img alt="../../../_images/move_label.png" src="../../../_images/move_label.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.34 </span><span class="caption-text">Moved labels</span><a class="headerlink" href="#id46" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">Auxiliary Storage Properties</span></a> mechanism may be used with data-defined
properties without having an editable data source.</p>
</div>
</section>
</section>
</section>
<section id="diagrams-properties">
<span id="sec-diagram"></span><span id="index-19"></span><h2><a class="toc-backref" href="#id108"><span class="section-number">15.1.5. </span>Diagrams Properties</a><a class="headerlink" href="#diagrams-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/diagram.png"><img alt="diagram" src="../../../_images/diagram.png" style="width: 2em;" /></a> The <span class="guilabel">Diagrams</span> tab allows you to add a graphic overlay to
a vector layer (see <a class="reference internal" href="#figure-diagrams-attributes"><span class="std std-numref">Fig. 15.35</span></a>).</p>
<p>The current core implementation of diagrams provides support for:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/diagramNone.png"><img alt="diagramNone" src="../../../_images/diagramNone.png" style="width: 1.5em;" /></a> <span class="guilabel">No diagrams</span>: the default value with no diagram
displayed over the features;</p></li>
<li><p><a class="reference internal" href="../../../_images/pie-chart.png"><img alt="piechart" src="../../../_images/pie-chart.png" style="width: 1.5em;" /></a> <span class="guilabel">Pie chart</span>, a circular statistical graphic divided into
slices to illustrate numerical proportion. The arc length of each slice is
proportional to the quantity it represents;</p></li>
<li><p><a class="reference internal" href="../../../_images/text.png"><img alt="text" src="../../../_images/text.png" style="width: 1.5em;" /></a> <span class="guilabel">Text diagram</span>, a horizontaly divided circle showing statistics
values inside;</p></li>
<li><p><a class="reference internal" href="../../../_images/histogram.png"><img alt="histogram" src="../../../_images/histogram.png" style="width: 1.5em;" /></a> <span class="guilabel">Histogram</span>, bars of varying colors for each attribute
aligned next to each other</p></li>
<li><p><a class="reference internal" href="../../../_images/stacked-bar.png"><img alt="stackedBar" src="../../../_images/stacked-bar.png" style="width: 1.5em;" /></a> <span class="guilabel">Stacked bars</span>, Stacks bars of varying colors for each
attribute on top of each other vertically or horizontally</p></li>
</ul>
<p>In the top right corner of the <span class="guilabel">Diagrams</span> tab, the <a class="reference internal" href="../../../_images/mIconAutoPlacementSettings.png"><img alt="autoPlacement" src="../../../_images/mIconAutoPlacementSettings.png" style="width: 1.5em;" /></a>
<sup>Automated placement settings (applies to all layers)</sup> button provides
means to control diagram <a class="reference internal" href="#automated-placement"><span class="std std-ref">labels placement</span></a> on the
map canvas.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Switch quickly between types of diagrams</strong></p>
<p>Given that the settings are almost common to the different types of
diagram, when designing your diagram, you can easily change the diagram type
and check which one is more appropriate to your data without any loss.</p>
</div>
<p>For each type of diagram, the properties are divided into several tabs:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#diagram-attributes"><span class="std std-ref">Attributes</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-appearance"><span class="std std-ref">Rendering</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-size"><span class="std std-ref">Size</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-placement"><span class="std std-ref">Placement</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-options"><span class="std std-ref">Options</span></a></p></li>
<li><p><a class="reference internal" href="#diagram-legend"><span class="std std-ref">Legend</span></a></p></li>
</ul>
<section id="attributes">
<span id="diagram-attributes"></span><h3><a class="toc-backref" href="#id109"><span class="section-number">15.1.5.1. </span>Attributes</a><a class="headerlink" href="#attributes" title="Permalink to this headline"></a></h3>
<p><span class="guilabel">Attributes</span> defines which variables to display in the diagram.
Use <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>add item</sup> button to select the desired fields into
the ‘Assigned Attributes’ panel. Generated attributes with <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">Expressions</span></a>
can also be used.</p>
<p>You can move up and down any row with click and drag, sorting how attributes
are displayed. You can also change the label in the ‘Legend’ column
or the attribute color by double-clicking the item.</p>
<p>This label is the default text displayed in the legend of the print layout
or of the layer tree.</p>
<figure class="align-center" id="id47">
<span id="figure-diagrams-attributes"></span><img alt="../../../_images/diagram_tab.png" src="../../../_images/diagram_tab.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.35 </span><span class="caption-text">Diagram properties - Attributes tab</span><a class="headerlink" href="#id47" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="rendering">
<span id="diagram-appearance"></span><h3><a class="toc-backref" href="#id110"><span class="section-number">15.1.5.2. </span>Rendering</a><a class="headerlink" href="#rendering" title="Permalink to this headline"></a></h3>
<p><span class="guilabel">Rendering</span> defines how the diagram looks like. It provides
general settings that do not interfere with the statistic values such as:</p>
<ul class="simple">
<li><p>the graphic’s opacity, its outline width and color;</p></li>
<li><p>depending on the type of diagram:</p>
<ul>
<li><p>for histogram and stacked bars, the width of the bar and the spacing
between the bars. You may want to set the spacing to <code class="docutils literal notranslate"><span class="pre">0</span></code> for stacked bars.
Moreover, the <span class="guilabel">Axis line symbol</span> can be made visible on the
map canvas and customized using <a class="reference internal" href="../style_library/symbol_selector.html#vector-line-symbols"><span class="std std-ref">line symbol properties</span></a>.</p></li>
<li><p>for text diagram, the circle background color and
the <a class="reference internal" href="../introduction/general_tools.html#font-selector"><span class="std std-ref">font</span></a> used for texts;</p></li>
<li><p>for pie charts, the <span class="guilabel">Start angle</span> of the first
slice and their <span class="guilabel">Direction</span> (clockwise or not).</p></li>
</ul>
</li>
<li><p>the use of <a class="reference internal" href="#draw-effects"><span class="std std-ref">paint effects</span></a> on the graphics.</p></li>
</ul>
<p>In this tab, you can also manage and fine tune the diagram visibility with
different options:</p>
<ul class="simple">
<li><p><span class="guilabel">Diagram z-index</span>: controls how diagrams are drawn on top of each
other and on top of labels. A diagram with a high index is drawn over diagrams
and labels;</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Show all diagrams</span>: shows all the diagrams even if they
overlap each other;</p></li>
<li><p><span class="guilabel">Show diagram</span>: allows only specific diagrams to be rendered;</p></li>
<li><p><span class="guilabel">Always Show</span>: selects specific diagrams to always render, even when
they overlap other diagrams or map labels;</p></li>
<li><p>setting the <a class="reference internal" href="../introduction/general_tools.html#label-scaledepend"><span class="std std-ref">Scale dependent visibility</span></a>;</p></li>
</ul>
<figure class="align-center" id="id48">
<span id="figure-diagrams-appearance"></span><img alt="../../../_images/diagram_tab_appearance.png" src="../../../_images/diagram_tab_appearance.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.36 </span><span class="caption-text">Diagram properties - Rendering tab</span><a class="headerlink" href="#id48" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="size">
<span id="diagram-size"></span><h3><a class="toc-backref" href="#id111"><span class="section-number">15.1.5.3. </span>Size</a><a class="headerlink" href="#size" title="Permalink to this headline"></a></h3>
<p><span class="guilabel">Size</span> is the main tab to set how the selected statistics are
represented. The diagram size <a class="reference internal" href="../introduction/general_tools.html#unit-selector"><span class="std std-ref">units</span></a> can be ‘Millimeters’,
‘Points’, ‘Pixels’, ‘Map Units’ or ‘Inches’.
You can use:</p>
<ul class="simple">
<li><p><span class="guilabel">Fixed size</span>, a unique size to represent the graphic of all the
features (not available for histograms)</p></li>
<li><p>or <span class="guilabel">Scaled size</span>, based on an expression using layer attributes:</p>
<ol class="arabic simple">
<li><p>In <span class="guilabel">Attribute</span>, select a field or build an expression</p></li>
<li><p>Press <span class="guilabel">Find</span> to return the <span class="guilabel">Maximum value</span> of the
attribute or enter a custom value in the widget.</p></li>
<li><p>For histogram and stacked bars, enter a <span class="guilabel">Bar length</span> value,
used to represent the <span class="guilabel">Maximum value</span> of the attributes.
For each feature, the bar lenght will then be scaled linearly to keep
this matching.</p></li>
<li><p>For pie chart and text diagram, enter a <span class="guilabel">Size</span> value,
used to represent the <span class="guilabel">Maximum value</span> of the attributes.
For each feature, the circle area or diameter will then be scaled
linearly to keep this matching (from <code class="docutils literal notranslate"><span class="pre">0</span></code>).
A <span class="guilabel">Minimum size</span> can however be set for small diagrams.</p></li>
</ol>
</li>
</ul>
<figure class="align-center" id="id49">
<span id="figure-diagrams-size"></span><img alt="../../../_images/diagram_tab_size.png" src="../../../_images/diagram_tab_size.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.37 </span><span class="caption-text">Diagram properties - Size tab</span><a class="headerlink" href="#id49" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="placement">
<span id="diagram-placement"></span><h3><a class="toc-backref" href="#id112"><span class="section-number">15.1.5.4. </span>Placement</a><a class="headerlink" href="#placement" title="Permalink to this headline"></a></h3>
<p><span class="guilabel">Placement</span> defines the diagram position.
Depending on the layer geometry type, it offers different options for the
placement (more details at <a class="reference internal" href="../style_library/label_settings.html#labels-placement"><span class="std std-ref">Placement</span></a>):</p>
<ul class="simple">
<li><p><span class="guilabel">Around point</span> or <span class="guilabel">Over point</span> for point geometry.
The former variable requires a radius to follow.</p></li>
<li><p><span class="guilabel">Around line</span> or <span class="guilabel">Over line</span> for line geometry.
Like point feature, the first variable requires a distance to respect
and you can specify the diagram placement relative to the feature
(‘above’, ‘on’ and/or ‘below’ the line)
It’s possible to select several options at once.
In that case, QGIS will look for the optimal position of the diagram.
Remember that you can also use the line orientation for the position
of the diagram.</p></li>
<li><p><span class="guilabel">Around centroid</span> (at a set <span class="guilabel">Distance</span>),
<span class="guilabel">Over centroid</span>, <span class="guilabel">Using perimeter</span> and
<span class="guilabel">Inside polygon</span> are the options for polygon features.</p></li>
</ul>
<p>The <span class="guilabel">Coordinate</span> group provides direct control on diagram
placement, on a feature-by-feature basis, using their attributes
or an expression to set the <span class="guilabel">X</span> and <span class="guilabel">Y</span> coordinate.
The information can also be filled using the <a class="reference internal" href="#label-toolbar"><span class="std std-ref">Move labels and diagrams</span></a> tool.</p>
<p>In the <span class="guilabel">Priority</span> section, you can define the placement priority rank
of each diagram, ie if there are different diagrams or labels candidates for the
same location, the item with the higher priority will be displayed and the
others could be left out.</p>
<p><span class="guilabel">Discourage diagrams and labels from covering features</span> defines
features to use as <a class="reference internal" href="../style_library/label_settings.html#labels-obstacles"><span class="std std-ref">obstacles</span></a>, ie QGIS will try to not
place diagrams nor labels over these features.
The priority rank is then used to evaluate whether a diagram could be omitted
due to a greater weighted obstacle feature.</p>
<figure class="align-center" id="id50">
<span id="figure-diagrams-placement"></span><img alt="../../../_images/diagram_tab_placement.png" src="../../../_images/diagram_tab_placement.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.38 </span><span class="caption-text">Vector properties dialog with diagram properties, Placement tab</span><a class="headerlink" href="#id50" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="options">
<span id="diagram-options"></span><h3><a class="toc-backref" href="#id113"><span class="section-number">15.1.5.5. </span>Options</a><a class="headerlink" href="#options" title="Permalink to this headline"></a></h3>
<p>The <span class="guilabel">Options</span> tab has settings for histograms and stacked bars.
You can choose whether the <span class="guilabel">Bar orientation</span> should be
<span class="guilabel">Up</span>, <span class="guilabel">Down</span>, <span class="guilabel">Right</span> or <span class="guilabel">Left</span>,
for horizontal and vertical diagrams.</p>
</section>
<section id="legend">
<span id="diagram-legend"></span><span id="index-20"></span><h3><a class="toc-backref" href="#id114"><span class="section-number">15.1.5.6. </span>Legend</a><a class="headerlink" href="#legend" title="Permalink to this headline"></a></h3>
<p>From the <span class="guilabel">Legend</span> tab, you can choose to display items of the diagram
in the <a class="reference internal" href="../introduction/general_tools.html#label-legend"><span class="std std-ref">Layers panel</span></a>, and in the <a class="reference internal" href="../print_composer/composer_items/composer_legend.html#layout-legend-item"><span class="std std-ref">print layout legend</span></a>, next to the layer symbology:</p>
<ul class="simple">
<li><p>check <span class="guilabel">Show legend entries for diagram attributes</span> to display in the
legends the <code class="docutils literal notranslate"><span class="pre">Color</span></code> and <code class="docutils literal notranslate"><span class="pre">Legend</span></code> properties, as previously assigned in the
<span class="guilabel">Attributes</span> tab;</p></li>
<li><p>and, when a <a class="reference internal" href="#diagram-size"><span class="std std-ref">scaled size</span></a> is being used for the diagrams,
push the <span class="guilabel">Legend Entries for Diagram Size…</span> button to configure the
diagram symbol aspect in the legends. This opens the <span class="guilabel">Data-defined
Size Legend</span> dialog whose options are described in <a class="reference internal" href="#data-defined-size-legend"><span class="std std-ref">Data-defined size legend</span></a>.</p></li>
</ul>
<p>When set, the diagram legend items (attributes with color and diagram size)
are also displayed in the print layout legend, next to the layer symbology.</p>
</section>
</section>
<section id="masks-properties">
<span id="vector-mask-menu"></span><h2><a class="toc-backref" href="#id115"><span class="section-number">15.1.6. </span>Masks Properties</a><a class="headerlink" href="#masks-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/labelmask.png"><img alt="labelmask" src="../../../_images/labelmask.png" style="width: 1.5em;" /></a> The <span class="guilabel">Masks</span> tab helps you configure the current layer
symbols overlay with other symbol layers or labels, from any layer.
This is meant to improve the readability of symbols and labels whose colors
are close and can be hard to decipher when overlapping; it adds a custom and
transparent mask around the items to “hide” parts of the symbol layers of
the current layer.</p>
<p>To apply masks on the active layer, you first need to enable in the project
either <a class="reference internal" href="../style_library/symbol_selector.html#mask-marker-symbol"><span class="std std-ref">mask symbol layers</span></a> or <a class="reference internal" href="../style_library/label_settings.html#labels-mask"><span class="std std-ref">mask labels</span></a>. Then, from the <span class="guilabel">Masks</span> tab, check:</p>
<ul class="simple">
<li><p>the <span class="guilabel">Masked symbol layers</span>: lists in a tree structure all the symbol
layers of the current layer. There you can select the symbol layer item you
would like to transparently “cut out” when they overlap the selected mask sources</p></li>
<li><p>the <span class="guilabel">Mask sources</span> tab: list all the mask labels and mask symbol
layers defined in the project.
Select the items that would generate the mask over the selected masked symbol
layers</p></li>
</ul>
<figure class="align-center" id="id51">
<span id="figure-mask-properties"></span><img alt="../../../_images/masks_properties.png" src="../../../_images/masks_properties.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.39 </span><span class="caption-text">Layer properties - Masks tab</span><a class="headerlink" href="#id51" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="d-view-properties">
<span id="sec-3-d-view"></span><span id="index-21"></span><h2><a class="toc-backref" href="#id116"><span class="section-number">15.1.7. </span>3D View Properties</a><a class="headerlink" href="#d-view-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/3d.png"><img alt="3d" src="../../../_images/3d.png" style="width: 1.5em;" /></a> The <span class="guilabel">3D View</span> tab provides settings for vector layers that should
be depicted in the <a class="reference internal" href="../introduction/qgis_gui.html#label-3dmapview"><span class="std std-ref">3D Map view</span></a> tool.</p>
<p>For better performance, data from vector layers are loaded in the background,
using multithreading, and rendered in tiles whose size can be controlled from
the <span class="guilabel">Layer rendering</span> section of the tab:</p>
<ul class="simple">
<li><p><span class="guilabel">Zoom levels count</span>: determines how deep the quadtree will be.
For example, one zoom level means there will be a single tile for the whole layer.
Three zoom levels means there will be 16 tiles at the leaf level (every extra
zoom level multiplies that by 4). The default is <code class="docutils literal notranslate"><span class="pre">3</span></code> and the maximum is <code class="docutils literal notranslate"><span class="pre">8</span></code>.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Show bounding boxes of tiles</span>: especially useful if
there are issues with tiles not showing up when they should</p></li>
</ul>
<p>To display a layer in 3D, select from the combobox at the top of the tab, either:</p>
<ul class="simple">
<li><p><span class="guilabel">Single symbol</span>: features are rendered using a common 3D symbol
whose properties can be <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">data-defined</span></a> or not.
Read details on <a class="reference internal" href="../style_library/3d_symbols.html#dsymbols"><span class="std std-ref">setting a 3D symbol</span></a> for each layer geometry type.</p></li>
<li><p><span class="guilabel">Rule-based</span>: multiple symbol configurations can be defined and applied
selectively based on expression filters and scale range.
More details on how-to at <a class="reference internal" href="#rule-based-rendering"><span class="std std-ref">Rule-based rendering</span></a>.</p></li>
</ul>
<figure class="align-center" id="id52">
<span id="figure-3dview-properties"></span><img alt="../../../_images/3d_view_properties.png" src="../../../_images/3d_view_properties.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.40 </span><span class="caption-text">3D properties of a point layer</span><a class="headerlink" href="#id52" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="fields-properties">
<span id="vector-fields-menu"></span><span id="index-22"></span><h2><a class="toc-backref" href="#id117"><span class="section-number">15.1.8. </span>Fields Properties</a><a class="headerlink" href="#fields-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/mSourceFields.png"><img alt="sourceFields" src="../../../_images/mSourceFields.png" style="width: 1.5em;" /></a> The <span class="guilabel">Fields</span> tab provides information on
fields related to the layer and helps you organize them.</p>
<p>The layer can be made <a class="reference internal" href="editing_geometry_attributes.html#editingvector"><span class="std std-ref">editable</span></a> using the <a class="reference internal" href="../../../_images/mActionToggleEditing.png"><img alt="toggleEditing" src="../../../_images/mActionToggleEditing.png" style="width: 1.5em;" /></a>
<sup>Toggle editing mode</sup>. At this moment, you can modify its structure using
the <a class="reference internal" href="../../../_images/mActionNewAttribute.png"><img alt="newAttribute" src="../../../_images/mActionNewAttribute.png" style="width: 1.5em;" /></a> <sup>New field</sup> and <a class="reference internal" href="../../../_images/mActionDeleteAttribute.png"><img alt="deleteAttribute" src="../../../_images/mActionDeleteAttribute.png" style="width: 1.5em;" /></a> <sup>Delete field</sup>
buttons.</p>
<p>You can also rename fields by double-clicking its name. This is only supported
for data providers like PostgreSQL, Oracle, Memory layer and some OGR layer
depending on the OGR data format and version.</p>
<p>If set in the underlying data source or in the <a class="reference internal" href="#configure-field"><span class="std std-ref">forms properties</span></a>, the field’s alias is also displayed. An alias is a human
readable field name you can use in the feature form or the attribute table.
Aliases are saved in the project file.</p>
<p>Depending on the data provider, you can associate a comment with a field, for
example at its creation. This information is retrieved and shown in the
<span class="guilabel">Comment</span> column and is later displayed when hovering over the
field label in a feature form.</p>
<p>Other than the fields contained in the dataset, virtual fields and
<a class="reference internal" href="#vector-auxiliary-storage"><span class="std std-ref">Auxiliary Storage</span></a> included, the
<span class="guilabel">Fields</span> tab also lists fields from any <a class="reference internal" href="#sec-joins"><span class="std std-ref">joined layers</span></a>.
Depending on the origin of the field, a different background color is applied to it.</p>
<p>For each listed field, the dialog also lists read-only characteristics such as
its <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code> and <code class="docutils literal notranslate"><span class="pre">precision</span></code>. When serving the
layer as <code class="docutils literal notranslate"><span class="pre">WMS</span></code> or <code class="docutils literal notranslate"><span class="pre">WFS</span></code>, you can also check here which fields could be retrieved.</p>
<figure class="align-center" id="id53">
<span id="figure-fields-tab"></span><img alt="../../../_images/fields_properties.png" src="../../../_images/fields_properties.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.41 </span><span class="caption-text">Fields properties tab</span><a class="headerlink" href="#id53" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="attributes-form-properties">
<span id="vector-attributes-menu"></span><h2><a class="toc-backref" href="#id118"><span class="section-number">15.1.9. </span>Attributes Form Properties</a><a class="headerlink" href="#attributes-form-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/mActionFormView.png"><img alt="formView" src="../../../_images/mActionFormView.png" style="width: 1.2em;" /></a> The <span class="guilabel">Attributes Form</span> tab helps you set up the form to
display when creating new features or querying existing one. You can define:</p>
<ul class="simple">
<li><p>the look and the behavior of each field in the feature form or the attribute
table (label, widget, constraints…);</p></li>
<li><p>the form’s structure (custom or autogenerated):</p></li>
<li><p>extra logic in Python to handle interaction with the form or field widgets.</p></li>
</ul>
<p>At the top right of the dialog, you can set whether the form is opened by
default when creating new features. This can be configured per layer or globally
with the <span class="guilabel">Suppress attribute form pop-up after feature creation</span>
option in the <span class="menuselection">Settings ► Options ► Digitizing</span> menu.</p>
<section id="customizing-a-form-for-your-data">
<span id="customize-form"></span><span id="index-23"></span><h3><a class="toc-backref" href="#id119"><span class="section-number">15.1.9.1. </span>Customizing a form for your data</a><a class="headerlink" href="#customizing-a-form-for-your-data" title="Permalink to this headline"></a></h3>
<p>By default, when you click on a feature with the <a class="reference internal" href="../../../_images/mActionIdentify.png"><img alt="identify" src="../../../_images/mActionIdentify.png" style="width: 1.5em;" /></a> <sup>Identify
Features</sup> tool or switch the attribute table to the <em>form view</em> mode, QGIS
displays a basic form with predefined widgets (generally spinboxes and
textboxes — each field is represented on a dedicated row by its label next
to the widget). If <a class="reference internal" href="attribute_table.html#vector-relations"><span class="std std-ref">relations</span></a> are set on the layer,
fields from the referencing layers are shown in an embedded frame
at the bottom of the form, following the same basic structure.</p>
<p>This rendering is the result of the default <code class="docutils literal notranslate"><span class="pre">Autogenerate</span></code> value of the
<span class="guilabel">Attribute editor layout</span> setting in the <span class="menuselection">Layer
properties ► Attributes Form</span> tab. This property holds three different
values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Autogenerate</span></code>: keeps the basic structure of “one row - one field” for the
form but allows to customize each corresponding widget.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Drag-and-drop</span> <span class="pre">designer</span></code>: other than widget customization, the form
structure can be made more complex eg, with widgets embedded in groups and
tabs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Provide</span> <span class="pre">ui</span> <span class="pre">file</span></code>: allows to use a Qt designer file, hence a potentially
more complex and fully featured template, as feature form.</p></li>
</ul>
<section id="the-autogenerated-form">
<h4><a class="toc-backref" href="#id120"><span class="section-number">15.1.9.1.1. </span>The autogenerated form</a><a class="headerlink" href="#the-autogenerated-form" title="Permalink to this headline"></a></h4>
<p>When the <code class="docutils literal notranslate"><span class="pre">Autogenerate</span></code> option is on, the <span class="guilabel">Available widgets</span> panel
shows lists of fields (from the layer and its relations) that would be shown in
the form. Select a field and you can configure its appearance and behavior in
the right panel:</p>
<ul class="simple">
<li><p>adding <a class="reference internal" href="#configure-field"><span class="std std-ref">custom label and automated checks</span></a> to the field;</p></li>
<li><p>setting a <a class="reference internal" href="#edit-widgets"><span class="std std-ref">particular widget</span></a> to use.</p></li>
</ul>
</section>
<section id="the-drag-and-drop-designer">
<span id="drag-drop-designer"></span><h4><a class="toc-backref" href="#id121"><span class="section-number">15.1.9.1.2. </span>The drag and drop designer</a><a class="headerlink" href="#the-drag-and-drop-designer" title="Permalink to this headline"></a></h4>
<p>The drag and drop designer allows you to create a form with several containers
(tabs or groups) to present the attribute fields or other widgets that are not
directly linked to a particular field (like the HTML/QML widgets or the
<a class="reference internal" href="#actions-menu"><span class="std std-ref">actions</span></a> defined for the layer), as shown for example in
<a class="reference internal" href="#figure-fields-form"><span class="std std-numref">Fig. 15.42</span></a>.</p>
<figure class="align-center" id="id54">
<span id="figure-fields-form"></span><img alt="../../../_images/resulting_feature_form.png" src="../../../_images/resulting_feature_form.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.42 </span><span class="caption-text">Resulting built-in form with tabs and named groups</span><a class="headerlink" href="#id54" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<ol class="arabic">
<li><p>Choose <code class="docutils literal notranslate"><span class="pre">Drag</span> <span class="pre">and</span> <span class="pre">drop</span> <span class="pre">designer</span></code> from the <span class="guilabel">Select attribute layout
editor</span> combobox. This enables the <span class="guilabel">Form Layout</span> panel next to the
<span class="guilabel">Available widgets</span> panel, filled with existing fields.
The selected field displays its <a class="reference internal" href="#configure-field"><span class="std std-ref">properties</span></a> in a third
panel.</p></li>
<li><p>Select fields you do not want to use in your <span class="guilabel">Form Layout</span>
panel and hit the <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="signMinus" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> button to remove them. Drag and drop fields
from the other panel to re-add them. The same field can be added multiple times.</p></li>
<li><p>Drag and drop fields within the <span class="guilabel">Form Layout</span> panel to reorder
their position.</p></li>
<li><p>Add containers (tab or group frames) to associate fields that belong to
the same category and better structure the form.</p>
<ol class="arabic">
<li><p>The first step is to use the <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> icon to create a tab in which
fields and groups will be displayed</p></li>
<li><p>Then set the properties of the container, ie:</p>
<ul class="simple">
<li><p>the name</p></li>
<li><p>the type, ie a <span class="guilabel">tab</span> or a <span class="guilabel">group in container</span>
(a group inside a tab or another group)</p></li>
<li><p>and the <span class="guilabel">number of columns</span> the embedded fields
should be distributed over</p></li>
</ul>
<figure class="align-center" id="id55">
<span id="figure-fields-layout"></span><img alt="../../../_images/attribute_editor_layout.png" src="../../../_images/attribute_editor_layout.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.43 </span><span class="caption-text">Dialog to create containers with the <strong>Attribute editor layout</strong></span><a class="headerlink" href="#id55" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>These, and other properties can later be updated by selecting the item and,
from the third panel:</p>
<ul class="simple">
<li><p>hide or show the container’s label</p></li>
<li><p>display the container as a group box (only available for tabs).</p></li>
<li><p>rename the container</p></li>
<li><p>set the number of columns</p></li>
<li><p>enter an expression to control the container’s visibility.
The expression will be re-evaluated every time values in the form change,
and the tab or group box shown/hidden accordingly</p></li>
<li><p>add a background color</p></li>
</ul>
</li>
<li><p>You can create as many containers as you want; press
the <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> icon again to create another tab or a group frame under
an existing tab.</p></li>
</ol>
</li>
<li><p>The next step is to assign the relevant fields to each container,
by simple drag and drop. Groups and tabs can also be moved in the same way.</p></li>
<li><p><a class="reference internal" href="#configure-field"><span class="std std-ref">Customize the widget</span></a> of the fields in use</p></li>
<li><p>In case the layer is involved in a <a class="reference internal" href="attribute_table.html#vector-relations"><span class="std std-ref">one or many to many relation</span></a>, drag-and-drop the relation name from the
<span class="guilabel">Available Widgets</span> panel to the <span class="guilabel">Form Layout</span> panel.
The associated layer attribute form will be embedded at the chosen place
in the current layer’s form. As for the other items, select the relation label
to configure some properties:</p>
<ul class="simple">
<li><p>hide or show the relation label</p></li>
<li><p>show the link button</p></li>
<li><p>show the unlink button</p></li>
</ul>
</li>
<li><p>In case the layer has one or more <a class="reference internal" href="#actions-menu"><span class="std std-ref">actions</span></a> enabled for
<code class="docutils literal notranslate"><span class="pre">Layer</span></code> or <code class="docutils literal notranslate"><span class="pre">Feature</span></code> scope, the actions will be listed under <span class="guilabel">Actions</span>
and you can drag and drop them as with the other fields.
The associated action will be embedded at the chosen place
in the current layer’s form.</p></li>
<li><p>Apply the layer’s properties dialog</p></li>
<li><p>Open a feature attribute form (eg, using the <a class="reference internal" href="../../../_images/mActionIdentify.png"><img alt="identify" src="../../../_images/mActionIdentify.png" style="width: 1.5em;" /></a> <sup>Identify features</sup>
tool) and it should display the new form.</p></li>
</ol>
</section>
<section id="using-custom-ui-file">
<span id="provide-ui-file"></span><h4><a class="toc-backref" href="#id122"><span class="section-number">15.1.9.1.3. </span>Using custom ui-file</a><a class="headerlink" href="#using-custom-ui-file" title="Permalink to this headline"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">Provide</span> <span class="pre">ui-file</span></code> option allows you to use complex dialogs made with
Qt-Designer. Using a UI-file allows a great deal of freedom in creating a
dialog. Note that, in order to link the graphical objects (textbox,
combobox…) to the layer’s fields, you need to give them the same name.</p>
<p>Use the <span class="guilabel">Edit UI</span> to define the path to the file to use.</p>
<p>UI-files can also be hosted on a remote server.
In this case, you provide the URL of the form instead of the file path in <span class="guilabel">Edit UI</span>.</p>
<p>You’ll find some example in the <a class="reference internal" href="../../training_manual/create_vector_data/forms.html#creating-new-form"><span class="std std-ref">Creating a new form</span></a>
lesson of the <a class="reference internal" href="../../training_manual/index.html#qgis-training-manual-index-reference"><span class="std std-ref">QGIS Training Manual</span></a>. For more advanced information,
see <a class="reference external" href="https://woostuff.wordpress.com/2011/09/05/qgis-tips-custom-feature-forms-with-python-logic/">https://woostuff.wordpress.com/2011/09/05/qgis-tips-custom-feature-forms-with-python-logic/</a>.</p>
</section>
<section id="enhance-your-form-with-custom-functions">
<span id="form-custom-functions"></span><h4><a class="toc-backref" href="#id123"><span class="section-number">15.1.9.1.4. </span>Enhance your form with custom functions</a><a class="headerlink" href="#enhance-your-form-with-custom-functions" title="Permalink to this headline"></a></h4>
<p>QGIS forms can have a Python function that is called when the dialog is opened.
Use this function to add extra logic to your dialogs. The form code can be
specified in three different ways:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">load</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">environment</span></code>: use a function, for example in
<code class="file docutils literal notranslate"><span class="pre">startup.py</span></code> or from an installed plugin</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">load</span> <span class="pre">from</span> <span class="pre">an</span> <span class="pre">external</span> <span class="pre">file</span></code>: a file chooser will let you
select a Python file from your filesystem or enter a URL for a remote file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">provide</span> <span class="pre">code</span> <span class="pre">in</span> <span class="pre">this</span> <span class="pre">dialog</span></code>: a Python editor will appear where you can
directly type the function to use.</p></li>
</ul>
<p>In all cases you must enter the name of the function that will be called
(<code class="docutils literal notranslate"><span class="pre">open</span></code> in the example below).</p>
<p>An example is (in module MyForms.py):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="n">dialog</span><span class="p">,</span><span class="n">layer</span><span class="p">,</span><span class="n">feature</span><span class="p">):</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="n">control</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">findChild</span><span class="p">(</span><span class="n">QWidget</span><span class="p">,</span><span class="s2">&quot;My line edit&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Reference in Python Init Function like so: <code class="docutils literal notranslate"><span class="pre">open</span></code></p>
</section>
</section>
<section id="configure-the-field-behavior">
<span id="configure-field"></span><span id="index-24"></span><h3><a class="toc-backref" href="#id124"><span class="section-number">15.1.9.2. </span>Configure the field behavior</a><a class="headerlink" href="#configure-the-field-behavior" title="Permalink to this headline"></a></h3>
<p>The main part of the <span class="guilabel">Attributes Form</span> tab helps you set the
type of widget used to fill or display values of the field, in the attribute
table or the feature form: you can define how user interacts with each field
and the values or range of values that are allowed to be added to each.</p>
<figure class="align-center" id="id56">
<span id="figure-fields-widget"></span><img alt="../../../_images/edit_widgets_dialog.png" src="../../../_images/edit_widgets_dialog.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.44 </span><span class="caption-text">Dialog to select an edit widget for an attribute column</span><a class="headerlink" href="#id56" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="common-settings">
<span id="index-25"></span><h4><a class="toc-backref" href="#id125"><span class="section-number">15.1.9.2.1. </span>Common settings</a><a class="headerlink" href="#common-settings" title="Permalink to this headline"></a></h4>
<p>Regardless the type of widget applied to the field, there are some common
properties you can set to control whether and how a field can be edited.</p>
<section id="widget-display">
<h5><a class="toc-backref" href="#id126"><span class="section-number">15.1.9.2.1.1. </span>Widget display</a><a class="headerlink" href="#widget-display" title="Permalink to this headline"></a></h5>
<p><span class="guilabel">Show label</span>: indicates whether the field name should be displayed
in the form (only in the <a class="reference internal" href="#drag-drop-designer"><span class="std std-ref">Drag and drop</span></a> designer mode).</p>
</section>
<section id="general-options">
<h5><a class="toc-backref" href="#id127"><span class="section-number">15.1.9.2.1.2. </span>General options</a><a class="headerlink" href="#general-options" title="Permalink to this headline"></a></h5>
<ul class="simple">
<li><p><span class="guilabel">Alias</span>: a human readable name to use for fields. The alias will be
displayed in the feature form, the attribute table, or in the <span class="guilabel">Identify
results</span> panel.
It can also be used as field name replacement in the <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">expression builder</span></a>, easing expressions understanding and reviews.
Aliases are saved in project file.</p></li>
<li><p><span class="guilabel">Comment</span>: displays the field’s comment as shown in the
<span class="guilabel">Fields</span> tab, in a read-only state. This information is shown as
tooltip when hovering over the field label in a feature form.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Editable</span>: uncheck this option to set the field read-only
(not manually modifiable) even when the layer is in edit mode. Note that
checking this setting doesn’t override any edit limitation from the provider.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Reuse last entered value</span>: remembers the last value
entered in this field and uses it as default for the next feature being edited
in the layer.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Label on top</span>: places the field name above or beside
the widget in the feature form.</p></li>
</ul>
</section>
<section id="default-values">
<h5><a class="toc-backref" href="#id128"><span class="section-number">15.1.9.2.1.3. </span>Default values</a><a class="headerlink" href="#default-values" title="Permalink to this headline"></a></h5>
<ul>
<li><p><span class="guilabel">Default value</span>: for new features, automatically populates by default
the field with a predefined value or an <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">expression-based one</span></a>.
For example, you can:</p>
<ul class="simple">
<li><p>use <code class="docutils literal notranslate"><span class="pre">$x</span></code>, <code class="docutils literal notranslate"><span class="pre">$length</span></code>, <code class="docutils literal notranslate"><span class="pre">$area</span></code> to automatically populate a field with the
feature’s X coordinate, length, area or any geometric information at its creation;</p></li>
<li><p>increment a field by 1 for each new feature using <code class="docutils literal notranslate"><span class="pre">maximum(&quot;field&quot;)+1</span></code>;</p></li>
<li><p>save the feature creation datetime using <code class="docutils literal notranslate"><span class="pre">now()</span></code>;</p></li>
<li><p>use <a class="reference internal" href="../introduction/general_tools.html#general-tools-variables"><span class="std std-ref">variables</span></a> in expressions, making it
easier to e.g. insert the operator name (<code class="docutils literal notranslate"><span class="pre">&#64;user_full_name</span></code>), the project
file path (<code class="docutils literal notranslate"><span class="pre">&#64;project_path</span></code>), …</p></li>
</ul>
<p>A preview of the resulting default value is displayed at the bottom of the widget.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Default</span> <span class="pre">value</span></code> option is not aware of the values in any other
field of the feature being created so it won’t be possible to use an expression
combining any of those values i.e using an expression like <code class="docutils literal notranslate"><span class="pre">concat(field1,</span> <span class="pre">field2)</span></code>
may not work.</p>
</div>
</li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Apply default value on update</span>: whenever the feature
attribute or geometry is changed, the default value is recalculated. This
could be handy to save values like last user that modifies data, last time it
was changed…</p></li>
</ul>
</section>
<section id="constraints">
<span id="id9"></span><h5><a class="toc-backref" href="#id129"><span class="section-number">15.1.9.2.1.4. </span>Constraints</a><a class="headerlink" href="#constraints" title="Permalink to this headline"></a></h5>
<p>You can constrain the value to insert in the field. This constraint can be:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Not null</span>: requires the user to provide a value;</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Unique</span>: guarantee the inserted value to be unique
throughout the field;</p></li>
<li><p>based on a custom <span class="guilabel">expression</span>: e.g. <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">regexp_match(col0,'[^A-Za-z]')</span></code>
will ensure that the value of the field <em>col0</em> has only alphabet letters.
A short description can be added to help you remember the constraint.</p></li>
</ul>
<p>Whenever a value is added or edited in a field, it’s submitted to the existing
constraints and:</p>
<ul class="simple">
<li><p>if it meets all the requirements, a green check is shown beside the field
in the form;</p></li>
<li><p>if it does not meet all the requirements, then the field is colored in yellow
or orange and a corresponding cross is displayed next to the widget.
You can hover over the cross to remind which
constraints are applied to the field and fix the value:</p>
<ul>
<li><p>A yellow cross appears when the unmet constraint is an unenforced one
and it does not prevent you to save the changes with the “wrong”
values;</p></li>
<li><p>An orange cross can not be ignored and does not allow you to save your
modifications until they meet the constraints. It appears when the
<a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Enforce constraint</span> option is checked.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="edit-widgets">
<span id="id10"></span><h4><a class="toc-backref" href="#id130"><span class="section-number">15.1.9.2.2. </span>Edit widgets</a><a class="headerlink" href="#edit-widgets" title="Permalink to this headline"></a></h4>
<p>Based on the field type, QGIS automatically determines and assigns a default
widget type to it. You can then replace the widget with any other compatible
with the field type. The available widgets are:</p>
<ul class="simple">
<li><p><strong>Checkbox</strong>: Displays a checkbox whose state defines the value to insert.</p></li>
<li><p><strong>Classification</strong>: Only available when a <a class="reference internal" href="#categorized-renderer"><span class="std std-ref">categorized symbology</span></a> is applied to the layer, displays a combo box with
the values of the classes.</p></li>
<li><p><strong>Color</strong>: Displays a <a class="reference internal" href="../introduction/general_tools.html#color-selector"><span class="std std-ref">color widget</span></a> allowing to select
a color; the color value is stored as a html notation in the attribute table.</p></li>
<li><p><strong>Date/Time</strong>: Displays a line field which can open a calendar widget to enter
a date, a time or both. Column type must be text. You can select a custom
format, pop-up a calendar, etc.</p></li>
<li><p><strong>Enumeration</strong>: Opens a combo box with predefined values fetched from the
database. This is currently only supported by the PostgreSQL provider, for
fields of <code class="docutils literal notranslate"><span class="pre">enum</span></code> type.</p></li>
<li><p><strong>Attachment</strong>: Uses a “Open file” dialog to store file path in a
relative or absolute mode. It can be used to display a hyperlink (to
document path), a picture or a web page. User can also configure an
<a class="reference internal" href="attribute_table.html#external-storage"><span class="std std-ref">external storage system</span></a> to fetch/store resources.</p></li>
<li><p><strong>Hidden</strong>: A hidden attribute column is invisible. The user is not able
to see its contents.</p></li>
<li><p><strong>Key/Value</strong>: Displays a two-columns table to store sets of key/value
pairs within a single field. This is currently supported by the PostgreSQL
provider, for fields of <code class="docutils literal notranslate"><span class="pre">hstore</span></code> type.</p></li>
<li><p><strong>JSON View</strong>: Displays JSON data in a syntax highlighted text edit or in
tree view. This widget is currently read only. Several options are available
to change how the data is displayed. ‘Default view’ specify if the widget should
appear in Text or Tree mode. ‘Format JSON’ has three options which are related
to the tree view only:</p>
<ul>
<li><p>Indented: Display data in a human readable form with newlines and four space characters for indentation.</p></li>
<li><p>Compact: Display data in a one-line size optimized string without newlines or spaces.</p></li>
<li><p>Disabled: Display data as it comes from the provider.</p></li>
</ul>
</li>
<li><p><strong>List</strong>: Displays a single column table to add different values within a
single field. This is currently supported by the PostgreSQL provider,
for fields of <code class="docutils literal notranslate"><span class="pre">array</span></code> type.</p></li>
<li><p><strong>Range</strong>: Allows you to set numeric values from a specific range. The edit
widget can be either a slider or a spin box.</p></li>
<li><p><strong>Relation Reference</strong>: This is the default widget assigned to the referencing
field (i.e., the foreign key in the child layer) when a <a class="reference internal" href="attribute_table.html#vector-relations"><span class="std std-ref">relation</span></a>
is set. It provides direct access to the parent feature’s form which in turn
embeds the list and form of its children.</p></li>
<li><p><strong>Text Edit</strong> (default): This opens a text edit field that allows simple
text or multiple lines to be used. If you choose multiple lines you
can also choose html content.</p></li>
<li><p><strong>Unique Values</strong>: You can select one of the values already used in
the attribute table. If ‘Editable’ is activated, a line edit is shown with
autocompletion support, otherwise a combo box is used.</p></li>
<li><p><strong>Uuid Generator</strong>: Generates a read-only UUID (Universally Unique Identifiers)
field, if empty.</p></li>
<li><p><strong>Value Map</strong>: A combo box with predefined items. The value is stored in
the attribute, the description is shown in the combo box. You can define
values manually or load them from a layer or a CSV file.</p></li>
<li><p><strong>Value Relation</strong>: Offers values from a related table in a combobox. You can
select layer, key column and value column. Several options are available to
change the standard behaviors: allow null value, order by value, allow
multiple selections and use of auto-completer. The forms will display either
a drop-down list or a line edit field when completer checkbox is enabled.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Relative Path in Attachment widget</strong></p>
<p>If the path which is selected with the file browser is located in the same
directory as the <code class="file docutils literal notranslate"><span class="pre">.qgs</span></code> project file or below, paths are converted to
relative paths. This increases portability of a <code class="file docutils literal notranslate"><span class="pre">.qgs</span></code> project with
multimedia information attached.</p>
</div>
</section>
</section>
</section>
<section id="joins-properties">
<span id="sec-joins"></span><span id="index-26"></span><h2><a class="toc-backref" href="#id131"><span class="section-number">15.1.10. </span>Joins Properties</a><a class="headerlink" href="#joins-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/join.png"><img alt="join" src="../../../_images/join.png" style="width: 2em;" /></a> The <span class="guilabel">Joins</span> tab allows you to associate features
of the current layer (called <code class="docutils literal notranslate"><span class="pre">Target</span> <span class="pre">layer</span></code>) to features from another
loaded vector layer (or table). The join is based on an attribute that is shared by the
layers. The layers can be geometryless (tables) or not but their join attribute
should be of the same type.</p>
<p>To create a join:</p>
<ol class="arabic simple">
<li><p>Click the <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>Add new join</sup> button. The <span class="guilabel">Add vector
join</span> dialog appears.</p></li>
<li><p>Select the <span class="guilabel">Join layer</span> you want to connect with the target vector
layer</p></li>
<li><p>Specify the <span class="guilabel">Join field</span> and the <span class="guilabel">Target field</span> that are
common to both the join layer and the target layer</p></li>
<li><p>Press <span class="guilabel">OK</span> and a summary of selected parameters is added to the
<span class="guilabel">Join</span> panel.</p></li>
</ol>
<figure class="align-center" id="id57">
<span id="figure-joins"></span><img alt="../../../_images/join_attributes.png" src="../../../_images/join_attributes.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.45 </span><span class="caption-text">Join an attribute table to an existing vector layer</span><a class="headerlink" href="#id57" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The steps above will create a join, where <strong>ALL</strong> the attributes of the
first matching feature in the join layer is added to the target layer’s feature.
QGIS provides more options to tweak the join:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Cache join layer in virtual memory</span>: allows you to cache
values in memory (without geometries) from the joined layer in order to speed
up lookups.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox_unchecked.png"><img alt="unchecked" src="../../../_images/checkbox_unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Create attribute index on the join field</span></p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox_unchecked.png"><img alt="unchecked" src="../../../_images/checkbox_unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Dynamic form</span>: helps to synchronize join fields on the
fly, according to the <span class="guilabel">Target field</span>. This way, constraints for
join fields are also correctly updated. Note that it’s deactivated by default
because it may be very time consuming if you have a lot of features or a
myriad of joins.</p></li>
<li><p>If the target layer is editable, then some icons will be displayed in the
attribute table next to fields, in order to inform about their status:</p>
<ul>
<li><p><a class="reference internal" href="../../../_images/mIconJoinNotEditable.png"><img alt="joinNotEditable" src="../../../_images/mIconJoinNotEditable.png" style="width: 1.5em;" /></a>: the join layer is not configured to be
editable. If you want to be able to edit join features from the target
attribute table, then you have to check the option
<a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Editable join layer</span>.</p></li>
<li><p><a class="reference internal" href="../../../_images/mIconJoinedLayerNotEditable.png"><img alt="joinedLayerNotEditable" src="../../../_images/mIconJoinedLayerNotEditable.png" style="width: 1.5em;" /></a>: the join layer is well configured to be
editable, but its current status is read only.</p></li>
<li><p><a class="reference internal" href="../../../_images/mIconJoinHasNotUpsertOnEdit.png"><img alt="joinHasNotUpsertOnEdit" src="../../../_images/mIconJoinHasNotUpsertOnEdit.png" style="width: 1.5em;" /></a>: the join layer is editable, but synchronization
mechanisms are not activated. If you want to automatically add a feature in
the join layer when a feature is created in the target layer, then you have
to check the option <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Upsert on edit</span>. Symmetrically,
the option <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Delete cascade</span> may be activated if you
want to automatically delete join features.</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="../../../_images/checkbox_unchecked.png"><img alt="unchecked" src="../../../_images/checkbox_unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Joined fields</span>: instead of adding all the fields from
the joined layer, you can specify a subset.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox_unchecked.png"><img alt="unchecked" src="../../../_images/checkbox_unchecked.png" style="width: 1.3em;" /></a> <span class="guilabel">Custom field name prefix</span> for joined fields, in order
to avoid name collision</p></li>
</ul>
<p>QGIS currently has support for joining non-spatial table formats supported by
OGR (e.g., CSV, DBF and Excel), delimited text and the PostgreSQL provider.</p>
</section>
<section id="auxiliary-storage-properties">
<span id="vector-auxiliary-storage"></span><h2><a class="toc-backref" href="#id132"><span class="section-number">15.1.11. </span>Auxiliary Storage Properties</a><a class="headerlink" href="#auxiliary-storage-properties" title="Permalink to this headline"></a></h2>
<p>The regular way to customize styling and labeling is to use data-defined
properties as described in <a class="reference internal" href="../introduction/general_tools.html#data-defined"><span class="std std-ref">Data defined override setup</span></a>. However, it may not be
possible if the underlying data is read only. Moreover, configuring these
data-defined properties may be very time consuming or not desirable! For
example, if you want to fully use map tools coming with <a class="reference internal" href="#label-toolbar"><span class="std std-ref">The Label Toolbar</span></a>,
then you need to add and configure more than 20 fields in your original data
source (X and Y positions, rotation angle, font style, color and so on).</p>
<p>The Auxiliary Storage mechanism provides the solution to these limitations
and awkward configurations. Auxiliary fields are a roundabout way to
automatically manage and store these data-defined properties (labels,
diagram, symbology…) in a SQLite database thanks to editable joins.
This allows you to store properties for layers that aren’t editable.</p>
<p>A tab is available in vector layer properties dialog to manage auxiliary
storage:</p>
<figure class="align-center" id="id58">
<img alt="../../../_images/auxiliary_storage_tab.png" src="../../../_images/auxiliary_storage_tab.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.46 </span><span class="caption-text">Auxiliary Storage tab</span><a class="headerlink" href="#id58" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="labeling">
<span id="vector-auxiliary-storage-key"></span><h3><a class="toc-backref" href="#id133"><span class="section-number">15.1.11.1. </span>Labeling</a><a class="headerlink" href="#labeling" title="Permalink to this headline"></a></h3>
<p>Considering that the data source may be customized thanks to data-defined
properties without being editable, labeling map tools described in
<a class="reference internal" href="#label-toolbar"><span class="std std-ref">The Label Toolbar</span></a> are always available as soon as labeling is activated.</p>
<p>Actually, the auxiliary storage system needs an auxiliary layer to store these
properties in a SQLite database (see <a class="reference internal" href="#vector-auxiliary-storage-database"><span class="std std-ref">Auxiliary storage database</span></a>).
Its creation process is run the first time you click on the map while a
labeling map tool is currently activated. Then, a window is displayed, allowing
you to select the primary key to use for joining (to ensure that features are
uniquely identified):</p>
<figure class="align-center" id="id59">
<span id="figure-auxiliary-layer-creation"></span><img alt="../../../_images/auxiliary_storage_key.png" src="../../../_images/auxiliary_storage_key.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.47 </span><span class="caption-text">Auxiliary Layer creation dialog</span><a class="headerlink" href="#id59" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>As soon as an auxiliary layer is configured for the current data source, you can
retrieve its information in the tab:</p>
<figure class="align-center" id="id60">
<img alt="../../../_images/auxiliary_storage_tabkey.png" src="../../../_images/auxiliary_storage_tabkey.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.48 </span><span class="caption-text">Auxiliary Layer key</span><a class="headerlink" href="#id60" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The auxiliary layer now has these characteristics:</p>
<ul class="simple">
<li><p>the primary key is <code class="docutils literal notranslate"><span class="pre">ID</span></code>,</p></li>
<li><p>there are <code class="docutils literal notranslate"><span class="pre">0</span></code> features using an auxiliary field,</p></li>
<li><p>there are <code class="docutils literal notranslate"><span class="pre">0</span></code> auxiliary fields.</p></li>
</ul>
<p>Now that the auxiliary layer is created, you can edit the layer labels.
Click on a label while the <a class="reference internal" href="../../../_images/mActionChangeLabelProperties.png"><img alt="changeLabelProperties" src="../../../_images/mActionChangeLabelProperties.png" style="width: 1.5em;" /></a> <sup>Change Label</sup>
map tool is activated, then you can update styling properties like sizes,
colors, and so on. The corresponding data-defined properties are created
and can be retrieved:</p>
<figure class="align-center" id="id61">
<img alt="../../../_images/auxiliary_storage_fields.png" src="../../../_images/auxiliary_storage_fields.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.49 </span><span class="caption-text">Auxiliary Fields</span><a class="headerlink" href="#id61" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>As you can see in the figure above, <code class="docutils literal notranslate"><span class="pre">21</span></code> fields are automatically created and
configured for labeling. For example, the <code class="docutils literal notranslate"><span class="pre">FontStyle</span></code> auxiliary field type is
a <code class="docutils literal notranslate"><span class="pre">String</span></code> and is named <code class="docutils literal notranslate"><span class="pre">labeling_fontstyle</span></code> in the underlying SQLite
database. There is also <code class="docutils literal notranslate"><span class="pre">1</span></code> feature which is currently using these auxiliary
fields.</p>
<p>Notice that the icon <a class="reference internal" href="../../../_images/mIconDataDefineOn.png"><img alt="dataDefineOn" src="../../../_images/mIconDataDefineOn.png" style="width: 1.5em;" /></a> is displayed in the <span class="guilabel">Labels</span>
properties tab indicating that the data-defined override options are set
correctly:</p>
<figure class="align-center" id="id62">
<img alt="../../../_images/auxiliary_storage_dd.png" src="../../../_images/auxiliary_storage_dd.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.50 </span><span class="caption-text">Data-defined properties automatically created</span><a class="headerlink" href="#id62" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Otherwise, there’s another way to create an auxiliary field for a
specific property thanks to the
<a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>data-defined override</sup> button.
By clicking on <span class="guilabel">Store data in the project</span>, an auxiliary
field is automatically created for the <span class="guilabel">Opacity</span> field.
If you click on this button and the auxiliary layer is not created
yet, a window (<a class="reference internal" href="#figure-auxiliary-layer-creation"><span class="std std-numref">Fig. 15.47</span></a>) is first
displayed to select the primary key to use for joining.</p>
</section>
<section id="symbology">
<h3><a class="toc-backref" href="#id134"><span class="section-number">15.1.11.2. </span>Symbology</a><a class="headerlink" href="#symbology" title="Permalink to this headline"></a></h3>
<p>Like the method described above for customizing labels, auxiliary fields can
also be used to stylize symbols and diagrams. To do this, click on
<a class="reference internal" href="../../../_images/mIconDataDefine.png"><img alt="dataDefined" src="../../../_images/mIconDataDefine.png" style="width: 1.5em;" /></a> <sup>Data-defined override</sup> and select <span class="guilabel">Store data in
the project</span> for a specific property. For example, the <span class="guilabel">Fill
color</span> field:</p>
<figure class="align-center" id="id63">
<img alt="../../../_images/auxiliary_storage_symbol.png" src="../../../_images/auxiliary_storage_symbol.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.51 </span><span class="caption-text">Data-defined property menu for symbol</span><a class="headerlink" href="#id63" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>There are different attributes for each symbol (e.g. fill style, fill color,
stroke color, etc…), so each auxiliary field representing an attribute
requires a unique name to avoid conflicts. After selecting <span class="guilabel">Store
data in the project</span>, a window opens and displays the <span class="guilabel">Type</span> of the
field and prompts you to enter a unique name for the auxiliary field. For
example, when creating a <span class="guilabel">Fill color</span> auxiliary field the following
window opens:</p>
<figure class="align-center" id="id64">
<img alt="../../../_images/auxiliary_storage_symbol_name.png" src="../../../_images/auxiliary_storage_symbol_name.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.52 </span><span class="caption-text">Name of the auxiliary field for a symbol</span><a class="headerlink" href="#id64" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Once created, the auxiliary field can be retrieved in the auxiliary storage
tab:</p>
<figure class="align-center" id="id65">
<img alt="../../../_images/auxiliary_storage_symbol_field.png" src="../../../_images/auxiliary_storage_symbol_field.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.53 </span><span class="caption-text">Auxiliary field symbol</span><a class="headerlink" href="#id65" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="attribute-table-and-widgets">
<h3><a class="toc-backref" href="#id135"><span class="section-number">15.1.11.3. </span>Attribute table and widgets</a><a class="headerlink" href="#attribute-table-and-widgets" title="Permalink to this headline"></a></h3>
<p>Auxiliary fields can be edited using the
<a class="reference internal" href="attribute_table.html#sec-attribute-table"><span class="std std-ref">attribute table</span></a>. However, not all auxiliary fields
are initially visible in the attribute table.</p>
<p>Auxiliary fields representing attributes of a layer’s symbology, labeling,
appearance, or diagrams will appear automatically in the attribute table. The
exception are attributes that can be modified using the <a class="reference internal" href="#label-toolbar"><span class="std std-ref">Label Toolbar</span></a>
which are hidden by default. Auxiliary fields representing a <code class="docutils literal notranslate"><span class="pre">Color</span></code> have a
widget <strong>Color</strong> set by default, otherwise auxiliary fields default to the
<strong>Text Edit</strong> widget.</p>
<p>Auxiliary fields that represent attributes that can be modified using
the <a class="reference internal" href="#label-toolbar"><span class="std std-ref">Label toolbar</span></a> are <strong>Hidden</strong> in the attribute table
by default. To make a field visible, open the <a class="reference internal" href="#vector-attributes-menu"><span class="std std-ref">Attribute Form properties
tab</span></a> and change the value of an auxiliary field
<span class="guilabel">Widget Type</span> from <strong>Hidden</strong> to another relevant value. For example,
change the <strong>auxiliary_storage_labeling_size</strong> to <strong>Text Edit</strong> or change
<strong>auxiliary_storage_labeling_color</strong> to the <strong>Color</strong> widget. Those fields will
now be visible in the attribute table.</p>
<p>Auxiliary fields in the attribute table will appear like the following image:</p>
<figure class="align-center" id="id66">
<img alt="../../../_images/auxiliary_storage_widgets.png" src="../../../_images/auxiliary_storage_widgets.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.54 </span><span class="caption-text">Form with auxiliary fields</span><a class="headerlink" href="#id66" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="management">
<h3><a class="toc-backref" href="#id136"><span class="section-number">15.1.11.4. </span>Management</a><a class="headerlink" href="#management" title="Permalink to this headline"></a></h3>
<p>The <span class="guilabel">Auxiliary Layer</span> menu allows you to manage the auxiliary fields:</p>
<figure class="align-center" id="id67">
<img alt="../../../_images/auxiliary_storage_actions.png" src="../../../_images/auxiliary_storage_actions.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.55 </span><span class="caption-text">Auxiliary layer management</span><a class="headerlink" href="#id67" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The first item <span class="guilabel">Create</span> is disabled in this case because the auxiliary
layer is already created. But in case of a fresh work, you can use this action to
create an auxiliary layer. As explained in <a class="reference internal" href="#vector-auxiliary-storage-key"><span class="std std-ref">Labeling</span></a>,
a primary key will be needed then.</p>
<p>The <span class="guilabel">Clear</span> action allows to keep all auxiliary fields, but remove
their contents. This way, the number of features using these fields will fall to
<code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>The <span class="guilabel">Delete</span> action completely removes the auxiliary layer. In other
words, the corresponding table is deleted from the underlying SQLite database
and properties customization are lost.</p>
<p>Finally, the <span class="guilabel">Export</span> action allows to save the auxiliary layer as a
<a class="reference internal" href="../managing_data_source/create_layers.html#general-saveas"><span class="std std-ref">new vector layer</span></a>. Note that geometries are not stored
in auxiliary storage. However, in this case, geometries are exported from the
original data source too.</p>
</section>
<section id="auxiliary-storage-database">
<span id="vector-auxiliary-storage-database"></span><h3><a class="toc-backref" href="#id137"><span class="section-number">15.1.11.5. </span>Auxiliary storage database</a><a class="headerlink" href="#auxiliary-storage-database" title="Permalink to this headline"></a></h3>
<p>When you save your project with the <code class="docutils literal notranslate"><span class="pre">.qgs</span></code> format, the SQLite database
used for auxiliary storage is saved at the same place but with the extension
<code class="docutils literal notranslate"><span class="pre">.qgd</span></code>.</p>
<p>For convenience, an archive may be used instead thanks to the <code class="docutils literal notranslate"><span class="pre">.qgz</span></code> format.
In this case, <code class="docutils literal notranslate"><span class="pre">.qgd</span></code> and  <code class="docutils literal notranslate"><span class="pre">.qgs</span></code> files are both embedded in the archive.</p>
</section>
</section>
<section id="actions-properties">
<span id="actions-menu"></span><span id="index-27"></span><h2><a class="toc-backref" href="#id138"><span class="section-number">15.1.12. </span>Actions Properties</a><a class="headerlink" href="#actions-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/action.png"><img alt="action" src="../../../_images/action.png" style="width: 2em;" /></a> QGIS provides the ability to perform an action based on the attributes
of a feature. This can be used to perform any number of actions, for example,
running a program with arguments built from the attributes of a feature or
passing parameters to a web reporting tool.</p>
<figure class="align-center" id="id68">
<span id="figure-actions"></span><img alt="../../../_images/action_dialog.png" src="../../../_images/action_dialog.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.56 </span><span class="caption-text">Overview action dialog with some sample actions</span><a class="headerlink" href="#id68" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Actions are useful when you frequently want to run an external application or
view a web page based on one or more values in your vector layer. They are
divided into six types and can be used like this:</p>
<ul class="simple">
<li><p>Generic, Mac, Windows and Unix actions start an external process.</p></li>
<li><p>Python actions execute a Python expression.</p></li>
<li><p>Generic and Python actions are visible everywhere.</p></li>
<li><p>Mac, Windows and Unix actions are visible only on the respective platform (i.e.,
you can define three ‘Edit’ actions to open an editor and the users can only
see and execute the one ‘Edit’ action for their platform to run the editor).</p></li>
</ul>
<p>There are several examples included in the dialog. You can load them by clicking
on <span class="guilabel">Create Default Actions</span>. To edit any of the examples, double-click
its row. One example is performing a search based on an attribute value. This
concept is used in the following discussion.</p>
<p>The <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Show in Attribute Table</span> allows you to display in the
attribute table dialog the checked feature-scoped actions, either as <span class="guilabel">Combo
Box</span> or as <span class="guilabel">Separate Buttons</span> (see <a class="reference internal" href="attribute_table.html#configure-table-columns"><span class="std std-ref">Configuring the columns</span></a>).</p>
<section id="defining-actions">
<span id="adding-actions"></span><span id="index-28"></span><h3><a class="toc-backref" href="#id139"><span class="section-number">15.1.12.1. </span>Defining Actions</a><a class="headerlink" href="#defining-actions" title="Permalink to this headline"></a></h3>
<p>To define an attribute action, open the vector <span class="guilabel">Layer
Properties</span> dialog and click on the <span class="guilabel">Actions</span> tab. In the
<span class="guilabel">Actions</span> tab, click the <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>Add a new action</sup>
to open the <span class="guilabel">Edit Action</span> dialog.</p>
<p>Select the action <span class="guilabel">Type</span> and provide a descriptive name
for the action. The action itself must contain the name of the application
that will be executed when the action is invoked.
You can add one or more attribute field values as arguments to the application.
When the action is invoked, any set of characters that start with a <code class="docutils literal notranslate"><span class="pre">%</span></code>
followed by the name of a field will be replaced by the value of that field.
The special characters <code class="docutils literal notranslate"><span class="pre">%%</span></code> will be replaced by the value of the field
that was selected from the identify results or attribute table (see <a class="reference internal" href="#using-actions">using_actions</a>
below). Double quote marks can be used to group text into a single argument to
the program, script or command. Double quotes will be ignored if preceded by a
backslash.</p>
<p>The <span class="guilabel">Action Scopes</span> allows you to define <em>where</em> the action should be
available. You have 4 different choices:</p>
<ol class="arabic simple">
<li><p><span class="guilabel">Feature Scope</span>: action is available when right click in the cell
within the attribute table.</p></li>
<li><p><span class="guilabel">Field Scope</span>: action is available when right click in the cell
within the attribute table, in the feature form and in the default action
button of the main toolbar.</p></li>
<li><p><span class="guilabel">Layer Scope</span>: action is available in the action button in the
attribute table toolbar. Be aware that this type of action involves the entire
layer and not the single features.</p></li>
<li><p><span class="guilabel">Canvas</span>: action is available in the main action button in the
toolbar.</p></li>
</ol>
<p>If you have field names that are substrings of other field names (e.g.,
<code class="docutils literal notranslate"><span class="pre">col1</span></code> and <code class="docutils literal notranslate"><span class="pre">col10</span></code>), you should indicate that by surrounding the field name
(and the % character) with square brackets (e.g., <code class="docutils literal notranslate"><span class="pre">[%col10]</span></code>). This will
prevent the <code class="docutils literal notranslate"><span class="pre">%col10</span></code> field name from being mistaken for the <code class="docutils literal notranslate"><span class="pre">%col1</span></code> field
name with a <code class="docutils literal notranslate"><span class="pre">0</span></code> on the end. The brackets will be removed by QGIS when it
substitutes in the value of the field. If you want the substituted field to be
surrounded by square brackets, use a second set like this: <code class="docutils literal notranslate"><span class="pre">[[%col10]]</span></code>.</p>
<p>Using the <span class="guilabel">Identify Features</span> tool, you can open the
<span class="guilabel">Identify Results</span> dialog. It includes a <em>(Derived)</em> item that contains
information relevant to the layer type. The values in this item can be accessed
in a similar way to the other fields by proceeding the derived field name with
<code class="docutils literal notranslate"><span class="pre">(Derived).</span></code>. For example, a point layer has an <code class="docutils literal notranslate"><span class="pre">X</span></code> and <code class="docutils literal notranslate"><span class="pre">Y</span></code> field, and the
values of these fields can be used in the action with <code class="docutils literal notranslate"><span class="pre">%(Derived).X</span></code> and
<code class="docutils literal notranslate"><span class="pre">%(Derived).Y</span></code>. The derived attributes are only available from the
<span class="guilabel">Identify Results</span> dialog box, not the <span class="guilabel">Attribute Table</span> dialog box.</p>
<p id="index-29">Two example actions are shown below:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">konqueror</span> <span class="pre">https://www.google.com/search?q=%nam</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">konqueror</span> <span class="pre">https://www.google.com/search?q=%%</span></code></p></li>
</ul>
<p>In the first example, the web browser konqueror is invoked and passed a URL
to open. The URL performs a Google search on the value of the <code class="docutils literal notranslate"><span class="pre">nam</span></code> field
from our vector layer. Note that the application or script called by the
action must be in the path, or you must provide the full path. To be certain, we
could rewrite the first example as:
<code class="docutils literal notranslate"><span class="pre">/opt/kde3/bin/konqueror</span> <span class="pre">https://www.google.com/search?q=%nam</span></code>. This will
ensure that the konqueror application will be executed when the action is
invoked.</p>
<p>The second example uses the %% notation, which does not rely on a particular
field for its value. When the action is invoked, the %% will be replaced by
the value of the selected field in the identify results or attribute table.</p>
</section>
<section id="using-actions">
<span id="index-30"></span><span id="id11"></span><h3><a class="toc-backref" href="#id140"><span class="section-number">15.1.12.2. </span>Using Actions</a><a class="headerlink" href="#using-actions" title="Permalink to this headline"></a></h3>
<p>QGIS offers many ways to execute actions you enabled on a layer. Depending on
their settings, they can be available:</p>
<ul class="simple">
<li><p>in the drop-down menu of <a class="reference internal" href="../../../_images/mAction.png"><img alt="actionRun" src="../../../_images/mAction.png" style="width: 1.5em;" /></a> <sup>Run Feature Action</sup> button from
the <span class="guilabel">Attributes toolbar</span> or <span class="guilabel">Attribute table</span> dialog;</p></li>
<li><p>when right-clicking a feature with the <a class="reference internal" href="../../../_images/mActionIdentify.png"><img alt="identify" src="../../../_images/mActionIdentify.png" style="width: 1.5em;" /></a> <sup>Identify Features</sup> tool
(see <a class="reference internal" href="../introduction/general_tools.html#identify"><span class="std std-ref">Identifying Features</span></a> for more information);</p></li>
<li><p>from the <span class="guilabel">Identify Results</span> panel, under the <span class="guilabel">Actions</span> section;</p></li>
<li><p>as items of an <span class="guilabel">Actions</span> column in the <span class="guilabel">Attribute Table</span>
dialog.</p></li>
</ul>
<p>If you are invoking an action that uses the <code class="docutils literal notranslate"><span class="pre">%%</span></code> notation, right-click on the
field value in the <span class="guilabel">Identify Results</span> dialog or the
<span class="guilabel">Attribute Table</span> dialog that you wish to pass to the application
or script.</p>
<p>Here is another example that pulls data out of a vector layer and inserts
it into a file using bash and the <code class="docutils literal notranslate"><span class="pre">echo</span></code> command (so it will only work on
<a class="reference internal" href="../../../_images/nix.png"><img alt="nix" src="../../../_images/nix.png" style="width: 1em;" /></a> or perhaps <a class="reference internal" href="../../../_images/osx.png"><img alt="osx" src="../../../_images/osx.png" style="width: 1em;" /></a>). The layer in question has fields for a species name
<code class="docutils literal notranslate"><span class="pre">taxon_name</span></code>, latitude <code class="docutils literal notranslate"><span class="pre">lat</span></code> and longitude <code class="docutils literal notranslate"><span class="pre">long</span></code>. We would like to be
able to make a spatial selection of localities and export these field values
to a text file for the selected record (shown in yellow in the QGIS map area).
Here is the action to achieve this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;echo </span><span class="se">\&quot;</span><span class="s2">%taxon_name </span><span class="si">%la</span><span class="s2">t </span><span class="si">%lo</span><span class="s2">ng</span><span class="se">\&quot;</span><span class="s2"> &gt;&gt; /tmp/species_localities.txt&quot;</span>
</pre></div>
</div>
<p>After selecting a few localities and running the action on each one, opening
the output file will show something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Acacia</span> <span class="n">mearnsii</span> <span class="o">-</span><span class="mf">34.0800000000</span> <span class="mf">150.0800000000</span>
<span class="n">Acacia</span> <span class="n">mearnsii</span> <span class="o">-</span><span class="mf">34.9000000000</span> <span class="mf">150.1200000000</span>
<span class="n">Acacia</span> <span class="n">mearnsii</span> <span class="o">-</span><span class="mf">35.2200000000</span> <span class="mf">149.9300000000</span>
<span class="n">Acacia</span> <span class="n">mearnsii</span> <span class="o">-</span><span class="mf">32.2700000000</span> <span class="mf">150.4100000000</span>
</pre></div>
</div>
<p>As an exercise, we can create an action that does a Google search on the <code class="docutils literal notranslate"><span class="pre">lakes</span></code>
layer. First, we need to determine the URL required to perform a search on a
keyword. This is easily done by just going to Google and doing a simple
search, then grabbing the URL from the address bar in your browser. From this
little effort, we see that the format is <a class="reference external" href="https://www.google.com/search?q=QGIS">https://www.google.com/search?q=QGIS</a>,
where <code class="docutils literal notranslate"><span class="pre">QGIS</span></code> is the search term. Armed with this information, we can proceed:</p>
<ol class="arabic">
<li><p>Make sure the <code class="docutils literal notranslate"><span class="pre">lakes</span></code> layer is loaded.</p></li>
<li><p>Open the <span class="guilabel">Layer Properties</span> dialog by double-clicking on the
layer in the legend, or right-click and choose <span class="menuselection">Properties</span>
from the pop-up menu.</p></li>
<li><p>Click on the <span class="guilabel">Actions</span> tab.</p></li>
<li><p>Click <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a> <sup>Add a new action</sup>.</p></li>
<li><p>Choose the <span class="guilabel">Open</span> action type,</p></li>
<li><p>Enter a name for the action, for example <code class="docutils literal notranslate"><span class="pre">Google</span> <span class="pre">Search</span></code>.</p></li>
<li><p>Additionally you can add a <span class="guilabel">Short Name</span> or even an <span class="guilabel">Icon</span>.</p></li>
<li><p>Choose the action <span class="guilabel">Scope</span>. See <a class="reference internal" href="#adding-actions"><span class="std std-ref">Defining Actions</span></a> for further
information. Leave the default settings for this example.</p></li>
<li><p>For the action, we need to provide the name of the external program to run.
In this case, we can use Firefox. If the program is not in your path, you
need to provide the full path.</p></li>
<li><p>Following the name of the external application, add the URL used for doing
a Google search, up to but not including the search term:
<code class="docutils literal notranslate"><span class="pre">https://www.google.com/search?q=</span></code></p></li>
<li><p>The text in the <span class="guilabel">Action</span> field should now look like this:
<code class="docutils literal notranslate"><span class="pre">https://www.google.com/search?q=</span></code></p></li>
<li><p>Click on the drop-down box containing the field names for the <code class="docutils literal notranslate"><span class="pre">lakes</span></code>
layer. It’s located just to the left of the <span class="guilabel">Insert</span> button.</p></li>
<li><p>From the drop-down box, select ‘NAMES’ and click <span class="guilabel">Insert</span>.</p></li>
<li><p>Your action text now looks like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">https://www.google.com/search?q=[%NAMES%]</span></code></p>
</li>
<li><p>To finalize and add the action, click the <span class="guilabel">OK</span> button.</p></li>
</ol>
<figure class="align-center" id="id69">
<span id="figure-add-action"></span><img alt="../../../_images/add_action_edit.png" src="../../../_images/add_action_edit.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.57 </span><span class="caption-text">Edit action dialog configured with the example</span><a class="headerlink" href="#id69" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>This completes the action, and it is ready to use. The final text of the
action should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>https://www.google.com/search?q=[%NAMES%]
</pre></div>
</div>
<p>We can now use the action. Close the <span class="guilabel">Layer Properties</span> dialog and
zoom in to an area of interest. Make sure the <code class="docutils literal notranslate"><span class="pre">lakes</span></code> layer is active and
identify a lake. In the result box you’ll now see that our action is visible:</p>
<figure class="align-center" id="id70">
<span id="figure-actions-selection"></span><img alt="../../../_images/action_identifyaction.png" src="../../../_images/action_identifyaction.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.58 </span><span class="caption-text">Select feature and choose action</span><a class="headerlink" href="#id70" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>When we click on the action, it brings up Firefox and navigates to the URL
<a class="reference external" href="https://www.google.com/search?q=Tustumena">https://www.google.com/search?q=Tustumena</a>. It is also possible to add further
attribute fields to the action. Therefore, you can add a <code class="docutils literal notranslate"><span class="pre">+</span></code> to the end of
the action text, select another field and click on <span class="guilabel">Insert Field</span>. In
this example, there is just no other field available that would make sense
to search for.</p>
<p>You can define multiple actions for a layer, and each will show up in the
<span class="guilabel">Identify Results</span> dialog.</p>
<p>You can also invoke actions from the attribute table
by selecting a row and right-clicking, then choosing the action from the
pop-up menu.</p>
<p>There are all kinds of uses for actions. For example, if you have
a point layer containing locations of images or photos along with a file name,
you could create an action to launch a viewer to display the image. You could
also use actions to launch web-based reports for an attribute field or
combination of fields, specifying them in the same way we did in our
Google search example.</p>
<p>We can also make more complex examples, for instance, using <strong>Python</strong>
actions.</p>
<p>Usually, when we create an action to open a file with an external application,
we can use absolute paths, or eventually relative paths. In the second case,
the path is relative to the location of the external program executable file.
But what about if we need to use relative paths, relative to the selected layer
(a file-based one, like Shapefile or SpatiaLite)? The following code will
do the trick:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;firefox&quot;</span>
<span class="n">imagerelpath</span> <span class="o">=</span> <span class="s2">&quot;images_test/test_image.jpg&quot;</span>
<span class="n">layer</span> <span class="o">=</span> <span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">activeLayer</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="n">layerpath</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">source</span><span class="p">()</span> <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">providerType</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;ogr&#39;</span>
  <span class="k">else</span> <span class="p">(</span><span class="n">qgis</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">QgsDataSourceURI</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">source</span><span class="p">())</span><span class="o">.</span><span class="n">database</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">providerType</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;spatialite&#39;</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">layerpath</span><span class="p">))</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">imagerelpath</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span> <span class="p">[</span><span class="n">command</span><span class="p">,</span> <span class="n">image</span> <span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>We just have to remember that the action is one of type <em>Python</em> and
the <em>command</em> and <em>imagerelpath</em> variables must be changed to fit our needs.</p>
<p>But what about if the relative path needs to be relative to the (saved)
project file? The code of the Python action would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;firefox&quot;</span>
<span class="n">imagerelpath</span> <span class="o">=</span> <span class="s2">&quot;images_test/test_image.jpg&quot;</span>
<span class="n">projectpath</span> <span class="o">=</span> <span class="n">qgis</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">fileName</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">projectpath</span><span class="p">))</span> <span class="k">if</span> <span class="n">projectpath</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="kc">None</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">imagerelpath</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span> <span class="p">[</span><span class="n">command</span><span class="p">,</span> <span class="n">image</span> <span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>Another Python action example is the one that allows us to add new layers
to the project. For instance, the following examples will add to the project
respectively a vector and a raster. The names of the files to be added to the
project and the names to be given to the layers are data driven (<em>filename</em> and
<em>layername</em> are column names of the table of attributes of the vector where
the action was created):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addVectorLayer</span><span class="p">(</span><span class="s1">&#39;/yourpath/[% &quot;filename&quot; %].shp&#39;</span><span class="p">,</span>
  <span class="s1">&#39;[% &quot;layername&quot; %]&#39;</span><span class="p">,</span> <span class="s1">&#39;ogr&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To add a raster (a TIF image in this example), it becomes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">qgis</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addRasterLayer</span><span class="p">(</span><span class="s1">&#39;/yourpath/[% &quot;filename&quot; %].tif&#39;</span><span class="p">,</span>
  <span class="s1">&#39;[% &quot;layername&quot; %]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="display-properties">
<span id="maptips"></span><span id="index-31"></span><h2><a class="toc-backref" href="#id141"><span class="section-number">15.1.13. </span>Display Properties</a><a class="headerlink" href="#display-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/display.png"><img alt="display" src="../../../_images/display.png" style="width: 1.5em;" /></a> The <span class="guilabel">Display</span> tab helps you configure fields to use for
feature identification:</p>
<ul class="simple">
<li><p>The <span class="guilabel">Display name</span>: based on a field or an <a class="reference internal" href="../expressions/expression.html#vector-expressions"><span class="std std-ref">expression</span></a>. This is:</p>
<ul>
<li><p>the label shown on top of the feature information in the <a class="reference internal" href="../introduction/general_tools.html#identify"><span class="std std-ref">Identify
tool</span></a> results</p></li>
<li><p>the field used in the <a class="reference internal" href="../introduction/qgis_configuration.html#locator-options"><span class="std std-ref">locator bar</span></a> when looking for
features in all layers</p></li>
<li><p>the feature identifier in the attribute table <a class="reference internal" href="attribute_table.html#attribute-table-view"><span class="std std-ref">form view</span></a></p></li>
<li><p>the feature identifier when the map or layout is exported to a layered
output format such as GeoPDF</p></li>
<li><p>the map tip information, i.e. the message displayed in the map canvas when
hovering over a feature of the active layer with the <a class="reference internal" href="../../../_images/mActionMapTips.png"><img alt="mapTips" src="../../../_images/mActionMapTips.png" style="width: 1.5em;" /></a> <sup>Show
Map Tips</sup> icon pressed. Applicable when no <span class="guilabel">HTML Map Tip</span> is set.</p></li>
</ul>
</li>
<li><p>The <span class="guilabel">HTML Map Tip</span> is specifically created for the map tips: it’s
a more complex and full HTML text mixing fields, expressions and html tags
(multiline, fonts, images, hyperlink…).</p></li>
</ul>
<figure class="align-center" id="id71">
<span id="figure-display-code"></span><img alt="../../../_images/display_html.png" src="../../../_images/display_html.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.59 </span><span class="caption-text">HTML code for map tip</span><a class="headerlink" href="#id71" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>To activate map tips, select the menu option <span class="menuselection">View ► Show Map
Tips</span> or click on the <a class="reference internal" href="../../../_images/mActionMapTips.png"><img alt="mapTips" src="../../../_images/mActionMapTips.png" style="width: 1.5em;" /></a> <sup>Show Map Tips</sup> icon of the
<span class="guilabel">Attributes Toolbar</span>. Map tip is a cross-session feature meaning that
once activated, it stays on and apply to any layer in any project, even in
future QGIS sessions until it’s toggled off.</p>
<figure class="align-center" id="id72">
<span id="figure-display-mapped"></span><img alt="../../../_images/map_tip.png" src="../../../_images/map_tip.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.60 </span><span class="caption-text">Map tip made with HTML code</span><a class="headerlink" href="#id72" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="rendering-properties">
<span id="vectorrenderingmenu"></span><span id="index-32"></span><h2><a class="toc-backref" href="#id142"><span class="section-number">15.1.14. </span>Rendering Properties</a><a class="headerlink" href="#rendering-properties" title="Permalink to this headline"></a></h2>
<section id="scale-dependent-visibility">
<h3><a class="toc-backref" href="#id143"><span class="section-number">15.1.14.1. </span>Scale dependent visibility</a><a class="headerlink" href="#scale-dependent-visibility" title="Permalink to this headline"></a></h3>
<p>You can set the <span class="guilabel">Maximum (inclusive)</span> and <span class="guilabel">Minimum
(exclusive)</span> scale, defining a range of scale in which features will be
visible. Out of this range, they are hidden. The <a class="reference internal" href="../../../_images/mActionMapIdentification.png"><img alt="mapIdentification" src="../../../_images/mActionMapIdentification.png" style="width: 1.5em;" /></a>
<sup>Set to current canvas scale</sup> button helps you use the current map
canvas scale as boundary of the range visibility.
See <a class="reference internal" href="../introduction/general_tools.html#label-scaledepend"><span class="std std-ref">Scale Dependent Rendering</span></a> for more information.</p>
</section>
<section id="simplify-geometry">
<h3><a class="toc-backref" href="#id144"><span class="section-number">15.1.14.2. </span>Simplify geometry</a><a class="headerlink" href="#simplify-geometry" title="Permalink to this headline"></a></h3>
<p>QGIS offers support for on-the-fly feature generalisation. This can
improve rendering times when drawing many complex features at small scales.
This feature can be enabled or disabled in the layer settings using the
<a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Simplify geometry</span> option. There is also a global
setting that enables generalisation by default for newly added layers (see
<a class="reference internal" href="../introduction/qgis_configuration.html#global-simplification"><span class="std std-ref">global simplification</span></a> for more information).</p>
<figure class="align-center" id="id73">
<span id="figure-rendering"></span><img alt="../../../_images/simplify_rendering.png" src="../../../_images/simplify_rendering.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.61 </span><span class="caption-text">Layer Geometry Simplification dialog</span><a class="headerlink" href="#id73" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Feature generalisation may introduce artefacts into your rendered
output in some cases. These may include slivers between polygons and
inaccurate rendering when using offset-based symbol layers.</p>
</div>
<p>While rendering extremely detailed layers (e.g. polygon layers with a huge number
of nodes), this can cause layout exports in PDF/SVG format to be huge as all
nodes are included in the exported file. This can also make the resultant file
very slow to work with/open in other programs.</p>
<p>Checking <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Force layer to render as raster</span> forces these
layers to be rasterised so that the exported files won’t have to include all
the nodes contained in these layers and the rendering is therefore sped up.</p>
<p>You can also do this by forcing the layout to export as a raster,
but that is an all-or-nothing solution, given that the rasterisation
is applied to all layers.</p>
<p><span class="guilabel">Refresh layer at interval (seconds)</span>: set a timer to automatically
refresh individual layers at a matching interval. Canvas updates are
deferred in order to avoid refreshing multiple times if more than one layer
has an auto update interval set.</p>
<p>Depending on the data provider (e.g. PostgreSQL), notifications can be sent to
QGIS when changes are applied to the data source, out of QGIS. Use the <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a>
<span class="guilabel">Refresh layer on notification</span> option to trigger an update.
You can also limit the layer refresh to a specific message set in the <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a>
<span class="guilabel">Only if message is</span> text box.</p>
</section>
</section>
<section id="variables-properties">
<span id="vectorvariablesmenu"></span><span id="index-33"></span><h2><a class="toc-backref" href="#id145"><span class="section-number">15.1.15. </span>Variables Properties</a><a class="headerlink" href="#variables-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/mIconExpression.png"><img alt="expression" src="../../../_images/mIconExpression.png" style="width: 1.5em;" /></a> The <span class="guilabel">Variables</span> tab lists all the variables available at
the layer’s level (which includes all global and project’s variables).</p>
<p>It also allows the user to manage layer-level variables. Click the <a class="reference internal" href="../../../_images/symbologyAdd.png"><img alt="signPlus" src="../../../_images/symbologyAdd.png" style="width: 1.5em;" /></a>
button to add a new custom layer-level variable. Likewise, select a custom
layer-level variable from the list and click the <a class="reference internal" href="../../../_images/symbologyRemove.png"><img alt="signMinus" src="../../../_images/symbologyRemove.png" style="width: 1.5em;" /></a> button to remove
it.</p>
<p>More information on variables usage in the General Tools
<a class="reference internal" href="../introduction/general_tools.html#general-tools-variables"><span class="std std-ref">Storing values in Variables</span></a> section.</p>
</section>
<section id="metadata-properties">
<span id="vectormetadatamenu"></span><span id="index-34"></span><h2><a class="toc-backref" href="#id146"><span class="section-number">15.1.16. </span>Metadata Properties</a><a class="headerlink" href="#metadata-properties" title="Permalink to this headline"></a></h2>
<p>The <a class="reference internal" href="../../../_images/editmetadata.png"><img alt="editMetadata" src="../../../_images/editmetadata.png" style="width: 1.2em;" /></a> <span class="guilabel">Metadata</span> tab provides you with options
to create and edit a metadata report on your layer.
See <a class="reference internal" href="../introduction/general_tools.html#metadatamenu"><span class="std std-ref">Metadata</span></a> for more information.</p>
</section>
<section id="dependencies-properties">
<span id="vectordependenciesmenu"></span><span id="index-35"></span><h2><a class="toc-backref" href="#id147"><span class="section-number">15.1.17. </span>Dependencies Properties</a><a class="headerlink" href="#dependencies-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/dependencies.png"><img alt="dependencies" src="../../../_images/dependencies.png" style="width: 1.5em;" /></a> The <span class="guilabel">Dependencies</span> tab allows to declare data
dependencies between layers. A data dependency occurs when a data modification
in a layer, not by direct user manipulation, may modify data of other layers.
This is the case for instance when geometry of a layer is updated by a
database trigger or custom PyQGIS scripting after modification of another
layer’s geometry.</p>
<p>In the <span class="guilabel">Dependencies</span> tab, you can select any layers which may externally
alter the data in the current layer. Correctly specifying dependent layers
allows QGIS to invalidate caches for this layer when the dependent layers are
altered.</p>
</section>
<section id="legend-properties">
<span id="vectorlegendmenu"></span><span id="index-36"></span><h2><a class="toc-backref" href="#id148"><span class="section-number">15.1.18. </span>Legend Properties</a><a class="headerlink" href="#legend-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/legend.png"><img alt="legend" src="../../../_images/legend.png" style="width: 1.2em;" /></a> The <span class="guilabel">Legend</span> properties tab provides you with advanced
settings for the <a class="reference internal" href="../introduction/general_tools.html#label-legend"><span class="std std-ref">Layers panel</span></a> and/or the <a class="reference internal" href="../print_composer/composer_items/composer_legend.html#layout-legend-item"><span class="std std-ref">print
layout legend</span></a>. These options include:</p>
<ul class="simple">
<li><p>Depending on the symbology applied to the layer, you may end up with several
entries in the legend, not necessarily readable/useful to display.
The <span class="guilabel">Legend placeholder image</span> helps you <a class="reference internal" href="../introduction/general_tools.html#embedded-file-selector"><span class="std std-ref">select an image</span></a> for replacement, displayed both in the
<span class="guilabel">Layers</span> panel and the print layout legend.</p></li>
<li><p><a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Text on symbols</span>: In some cases it can be useful to add
extra information to the symbols in the legend. With this frame, you can
affect to any of the symbols used in the layer symbology a text that is
displayed over the symbol, in both <span class="guilabel">Layers</span> panel and print layout
legend. This mapping is done by typing each text next to the symbol in the
table widget or filling the table using the <span class="guilabel">Set Labels from Expression</span>
button. Text appearance is handled through the font and color selector
widgets of the <span class="guilabel">Text Format</span> button.</p></li>
</ul>
<figure class="align-center" id="id74">
<span id="figure-legend-text-symbol"></span><img alt="../../../_images/text_legend_symbols.png" src="../../../_images/text_legend_symbols.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.62 </span><span class="caption-text">Setting text on symbols (left) and its rendering in the <span class="guilabel">Layers</span> panel (right)</span><a class="headerlink" href="#id74" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<ul>
<li><p>a list of widgets you can embed within the layer tree in the Layers panel.
The idea is to have a way to quickly access some actions that are often used
with the layer (setup transparency, filtering, selection, style or other
stuff…).</p>
<p>By default, QGIS provides transparency widget but this can be extended by
plugins registering their own widgets and assign custom actions to layers
they manage.</p>
</li>
</ul>
</section>
<section id="qgis-server-properties">
<span id="vectorservermenu"></span><span id="index-37"></span><h2><a class="toc-backref" href="#id149"><span class="section-number">15.1.19. </span>QGIS Server Properties</a><a class="headerlink" href="#qgis-server-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/overlay.png"><img alt="overlay" src="../../../_images/overlay.png" style="width: 1.5em;" /></a> The <span class="guilabel">QGIS Server</span> tab consists of <span class="guilabel">Description</span>,
<span class="guilabel">Attribution</span>, <span class="guilabel">MetadataURL</span>, and <span class="guilabel">LegendUrl</span> sections.</p>
<p>From the <span class="guilabel">Description</span> section, you can change the <span class="guilabel">Short name</span> used to
reference the layer in requests (to learn more about short names, read
<a class="reference internal" href="../../server_manual/config.html#server-short-name"><span class="std std-ref">Short name for layers, groups and project</span></a>). You can also add or edit a <span class="guilabel">Title</span> and
<span class="guilabel">Abstract</span> for the layer, or define a <span class="guilabel">Keyword list</span> here. These
keyword lists can be used in a metadata catalog. If you want to use a title from an
XML metadata file, you have to fill in a link in the <span class="guilabel">DataUrl</span> field.</p>
<p>Use <span class="guilabel">Attribution</span> to get attribute data from an XML metadata catalog.</p>
<p>In <span class="guilabel">MetadataUrl</span>, you can define the general path to the XML metadata
catalog. This information will be saved in the QGIS project file for subsequent
sessions and will be used for QGIS server.</p>
<p>In the <span class="guilabel">LegendUrl</span> section, you can provide the url of a legend image
in the url field. You can use the Format drop-down option to apply the appropriate
format of the image. Currently png, jpg and jpeg image formats are supported.</p>
<figure class="align-center" id="id75">
<span id="figure-server-vector"></span><img alt="../../../_images/vector_server_properties.png" src="../../../_images/vector_server_properties.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.63 </span><span class="caption-text">QGIS Server tab in vector layers properties dialog</span><a class="headerlink" href="#id75" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>To learn more about QGIS Server, read the <a class="reference internal" href="../../server_manual/index.html#qgis-server-manual"><span class="std std-ref">QGIS Server Guide/Manual</span></a>.</p>
</section>
<section id="digitizing-properties">
<span id="digitizingmenu"></span><span id="index-38"></span><h2><a class="toc-backref" href="#id150"><span class="section-number">15.1.20. </span>Digitizing Properties</a><a class="headerlink" href="#digitizing-properties" title="Permalink to this headline"></a></h2>
<p><a class="reference internal" href="../../../_images/digitizing.png"><img alt="digitizing" src="../../../_images/digitizing.png" style="width: 1.5em;" /></a> The <span class="guilabel">Digitizing</span> tab gives access to options that help
to ensure the quality of digitized geometries.</p>
<figure class="align-center" id="id76">
<span id="figure-digitizing-vector"></span><img alt="../../../_images/vector_digitizing_properties.png" src="../../../_images/vector_digitizing_properties.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.64 </span><span class="caption-text">The QGIS Digitizing tab in the vector layers properties dialog</span><a class="headerlink" href="#id76" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="automatic-fixes">
<span id="snap-to-grid"></span><h3><a class="toc-backref" href="#id151"><span class="section-number">15.1.20.1. </span>Automatic Fixes</a><a class="headerlink" href="#automatic-fixes" title="Permalink to this headline"></a></h3>
<p>Options in the <span class="guilabel">Automatic Fixes</span> section will directly affect the vertices
of any geometry which is added or modified.
If the <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Remove duplicate nodes</span> option is checked, any two subsequent
vertices with exactly the same coordinates will be removed.
If the <span class="guilabel">Geometry precision</span> is set, all vertices will be rounded to
the closest multiple of the configured geometry precision. The rounding will
happen in the layer coordinate reference system. Z and M values are not
rounded. With many map tools, a grid is shown on the canvas while digitizing.</p>
<figure class="align-center" id="id77">
<span id="figure-snap-to-grid"></span><img alt="../../../_images/vertex_snap_to_grid.png" src="../../../_images/vertex_snap_to_grid.png" />
<figcaption>
<p><span class="caption-number">Fig. 15.65 </span><span class="caption-text">Moving the top vertex snaps all the vertices to the grid</span><a class="headerlink" href="#id77" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="geometry-checks">
<h3><a class="toc-backref" href="#id152"><span class="section-number">15.1.20.2. </span>Geometry Checks</a><a class="headerlink" href="#geometry-checks" title="Permalink to this headline"></a></h3>
<p>In the <span class="guilabel">Geometry checks</span> section, additional validations on a per
geometry basis can be activated. Immediately after any geometry modification,
failures in these checks are reported to the user in the <span class="guilabel">Geometry validation</span> panel.
As long as a check is failing, it is not possible to save the layer.
The <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Is valid</span> check will run basic validity checks like self intersection on
geometries.</p>
</section>
<section id="topology-checks">
<h3><a class="toc-backref" href="#id153"><span class="section-number">15.1.20.3. </span>Topology Checks</a><a class="headerlink" href="#topology-checks" title="Permalink to this headline"></a></h3>
<p>In the <span class="guilabel">Topology checks</span> section, additional topology validation
checks can be activated. Topology checks will be executed when the user
saves the layer. Check errors will be reported in the <span class="guilabel">Geometry validation</span>
panel. As long as validation errors are present, the layer can not be saved.
Topology checks are executed in the area of the bounding box of the modified
features. Since other features may be present in the same area, topological
errors concerning these features are reported as well as errors introduced
in the current edit session.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Topology check option</p></th>
<th class="head"><p>Illustration</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>The <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Gap</span> check will check for
gaps between neighbouring polygons.</p></td>
<td><figure class="align-default">
<img alt="../../../_images/gapcheck.png" src="../../../_images/gapcheck.png" />
</figure>
</td>
</tr>
<tr class="row-odd"><td><p>The <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Overlap</span> check will check
for overlaps between neighbouring polygons.</p></td>
<td><figure class="align-default">
<img alt="../../../_images/overlapcheck.png" src="../../../_images/overlapcheck.png" />
</figure>
</td>
</tr>
<tr class="row-even"><td><p>The <a class="reference internal" href="../../../_images/checkbox.png"><img alt="checkbox" src="../../../_images/checkbox.png" style="width: 1.3em;" /></a> <span class="guilabel">Missing vertex</span> check will
check for shared boundaries of neighbouring polygons
where one border misses a vertex which is present on
the other one.</p></td>
<td><figure class="align-default">
<img alt="../../../_images/missingvertexcheck.png" src="../../../_images/missingvertexcheck.png" />
</figure>
</td>
</tr>
</tbody>
</table>
<section id="gap-check-exceptions">
<h4><a class="toc-backref" href="#id154"><span class="section-number">15.1.20.3.1. </span>Gap check exceptions</a><a class="headerlink" href="#gap-check-exceptions" title="Permalink to this headline"></a></h4>
<p>Sometimes it is desirable to keep gaps inside an area in a polygon
layer that otherwise is fully covered by polygons.
For example, a land use layer may have acceptable holes for lakes.
It is possible to define areas that are ignored in the gap check. Since gaps inside
these areas are allowed, we will refer to them as <em>Allowed Gaps</em> areas.</p>
<p>In the options for the gap checks under <span class="guilabel">Allowed Gaps</span>, an <em>Allowed Gaps layer</em>
can be configured.</p>
<p>Whenever the gap check is executed, gaps which are covered by one or more polygons
in the <em>Allowed Gaps Layer</em> are not reported as topology errors.</p>
<p>It is also possible to configure an additional <span class="guilabel">Buffer</span>.
This buffer is applied to each polygon on the <em>Allowed Gaps Layer</em>.
This makes it possible to make the tests less susceptible to small changes in the
outlines at the borders of gaps.</p>
<p>When <em>Allowed Gaps</em> are enabled, an additional button (<span class="guilabel">Add Allowed Gap</span>) for
detected gap errors is available in the geometry validation dock, where gaps are reported
during digitizing.
If the <span class="guilabel">Add Allowed Gap</span> button is pushed, a new polygon with the geometry
of the detected gap is inserted into the <em>Allowed Gaps Layer</em>.
This makes it possible to quickly flag gaps as allowed.</p>
</section>
<section id="geometry-validation-panel">
<span id="id12"></span><h4><a class="toc-backref" href="#id155"><span class="section-number">15.1.20.3.2. </span>Geometry validation panel</a><a class="headerlink" href="#geometry-validation-panel" title="Permalink to this headline"></a></h4>
<p>The <span class="guilabel">Geometry Validation</span> panel is triggered when any of the abovementioned
digitizing checks finds an error. The dialog provides you with the list of errors
and their description, and you can to browse the list using the keyboard arrows or
dedicated arrows.</p>
<p>You’ll need to address all the issues before you can save edits to the layer.
To do so:</p>
<ol class="arabic simple">
<li><p>Select an error, and it’s possible to:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../../_images/mActionZoomToSelected.png"><img alt="zoomToSelected" src="../../../_images/mActionZoomToSelected.png" style="width: 1.5em;" /></a> <span class="guilabel">Zoom to Feature(s)</span></p></li>
<li><p><a class="reference internal" href="../../../_images/mActionZoomToLayer.png"><img alt="zoomToLayer" src="../../../_images/mActionZoomToLayer.png" style="width: 1.5em;" /></a> <span class="guilabel">Zoom to problem</span></p></li>
</ul>
</li>
<li><p>Pick the usual <a class="reference internal" href="editing_geometry_attributes.html#editingvector"><span class="std std-ref">digitizing tools</span></a> to fix the issue.</p></li>
</ol>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="15. Working with Vector Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="attribute_table.html" class="btn btn-neutral float-right" title="15.2. Working with the Attribute Table" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2002-now, QGIS project.
      <span class="lastupdated">Last updated on Oct 24, 2021 11:42.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <!-- Transifex follows a particular logic to build target pages
example of expected format: .../locale-en-lc-messages-docs-gentle-gis-introduction-data-capture-po--release-3-16 
for the page ...3.16/docs/gentle_gis_introduction/data_capture.html in release_3.16 branch-->
<!--Make sure that mismatching languages codes are converted-->


  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-info-circle"> QGIS Documentation </span>
      v: testing
      <span class="fa fa-caret-down"></span>
    </span>

    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        
          <dd><a href="https://docs.qgis.org/testing/en/docs/user_manual/working_with_vector/vector_properties.html">en</a></dd>
        
      </dl>

      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://docs.qgis.org/testing/en/docs/user_manual/working_with_vector/vector_properties.html">testing</a></dd>
        
          <dd><a href="https://docs.qgis.org/latest/en/docs/user_manual/working_with_vector/vector_properties.html">latest</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.16/en/docs/user_manual/working_with_vector/vector_properties.html">3.16</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.10/en/docs/user_manual/working_with_vector/vector_properties.html">3.10</a></dd>
        
          <dd><a href="https://docs.qgis.org/3.4/en/docs/user_manual/working_with_vector/vector_properties.html">3.4</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.18/en/docs/user_manual/working_with_vector/vector_properties.html">2.18</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.14/en/docs/user_manual/working_with_vector/vector_properties.html">2.14</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.8/en/docs/user_manual/working_with_vector/vector_properties.html">2.8</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.6/en/docs/user_manual/working_with_vector/vector_properties.html">2.6</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.2/en/docs/user_manual/working_with_vector/vector_properties.html">2.2</a></dd>
        
          <dd><a href="https://docs.qgis.org/2.0/en/docs/user_manual/working_with_vector/vector_properties.html">2.0</a></dd>
        
          <dd><a href="https://docs.qgis.org/1.8/en/docs/user_manual/working_with_vector/vector_properties.html">1.8</a></dd>
        
      </dl>

       
       <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://docs.qgis.org/testing/pdf">PDF</a></dd>
        
          <dd><a href="https://docs.qgis.org/testing/zip">HTML</a></dd>
        
      </dl>
      

      
       
      <dl>
        <dt>Contribute to Docs</dt>
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/edit/master/docs/user_manual/working_with_vector/vector_properties.rst" target="_blank" rel="noopener noreferrer">Edit on GitHub</a>
          </dd>
          
          
          <dd>
            <a href="https://github.com/qgis/QGIS-Documentation/issues" target="_blank" rel="noopener noreferrer">Report Issue</a>
          </dd>
      </dl>
      

      <dl>
        <dt>On QGIS Project</dt>
          <dd>
            <a href="https://qgis.org/en" target="_blank" rel="noopener noreferrer">Home</a>
          </dd>
          <dd>
            <a href="https://qgis.org/api/" target="_blank" rel="noopener noreferrer">C++ API</a>
          </dd>
          <dd>
            <a href="https://qgis.org/pyqgis/master" target="_blank" rel="noopener noreferrer">PyQGIS API</a>
          </dd>
          <dd>
            <a href="https://github.com/qgis/QGIS/tree/master" target="_blank" rel="noopener noreferrer">Source</a>
          </dd>
      </dl>

    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>